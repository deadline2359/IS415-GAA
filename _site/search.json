[
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html",
    "title": "Take-home Exercise 2",
    "section": "",
    "text": "This exercise examines the vaccination rate of Jakarta, capital of Indonesia. Within the state, there are 257 subdistricts, which vaccination rates are not same as the others. This exercise benefits from the government of Indonesia releasing the detailed data of their immunisation programme for COVID-19."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#sources",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#sources",
    "title": "Take-home Exercise 2",
    "section": "3.1 Sources",
    "text": "3.1 Sources\nAspatial Dataset\n\nJakarta Provincial Vaccination Data- Vaccination data of Jakarta dating from 20 June 2021 to 5 September 2022.\nDKI Jakarta Administration Boundary 2019 - Shape files of the different provinces in Indonesia."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#aspatial-dataset",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#aspatial-dataset",
    "title": "Take-home Exercise 2",
    "section": "3.2 Aspatial Dataset",
    "text": "3.2 Aspatial Dataset\nWe will be looking at the data (presented in XLSX files) dating from July 2021 to June 2022. As the Indonesian government provided the data almost daily, we will only be using the data from the last day of the month (else the earliest possible) in order to better understand the trends by month (i.e., last day of February 2022 is provided is 27th).\n\nJul 2021Aug 2021Sep 2021Oct 2021Nov 2021Dec 2021Jan 2022Feb 2022Mar 2022Apr 2022Mei 2022Jun 2022\n\n\n\njul2021 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Juli 2021).xlsx\", sheet = \"Data Kelurahan\")\njul2021[\"Date\"] <- as.Date(\"2021-07-31\", format = \"%Y-%m-%d\")\nhead(jul2021, 5)\n\n# A tibble: 5 × 28\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 4441501 4499710 1663218 6162928\n2 3172051003     JAKART… PADEMA… ANCOL     23947   12333   11614    4181   15795\n3 3173041007     JAKART… TAMBORA ANGKE     29381   13875   15506    4798   20304\n4 3175041005     JAKART… KRAMAT… BALE K…   29074   18314   10760    3658   14418\n5 3175031003     JAKART… JATINE… BALI M…    9752    5173    4579    2007    6586\n# … with 19 more variables: `LANSIA\\r\\nDOSIS 1` <dbl>,\n#   `LANSIA\\r\\nDOSIS 2` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>,\n#   `GOTONG ROYONG TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `TENAGA KESEHATAN\\r\\nDOSIS 1` <dbl>, `TENAGA KESEHATAN\\r\\nDOSIS 2` <dbl>, …\n\n\n\n\n\naug2021 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Agustus 2021).xlsx\", sheet = \"Data Kelurahan\")\naug2021[\"Date\"] <- as.Date(\"2021-08-31\", format = \"%Y-%m-%d\")\nhead(aug2021, 5)\n\n# A tibble: 5 × 28\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 3277484 5663727 3412906 9076633\n2 3172051003     JAKART… PADEMA… ANCOL     23947    9191   14756    8935   23691\n3 3173041007     JAKART… TAMBORA ANGKE     29381   10400   18981   10470   29451\n4 3175041005     JAKART… KRAMAT… BALE K…   29074   12510   16564    7766   24330\n5 3175031003     JAKART… JATINE… BALI M…    9752    3704    6048    3671    9719\n# … with 19 more variables: `LANSIA\\r\\nDOSIS 1` <dbl>,\n#   `LANSIA\\r\\nDOSIS 2` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>,\n#   `GOTONG ROYONG TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `TENAGA KESEHATAN\\r\\nDOSIS 1` <dbl>, `TENAGA KESEHATAN\\r\\nDOSIS 2` <dbl>, …\n\n\n\n\n\nsep2021 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 September 2021).xlsx\", sheet = \"Data Kelurahan\")\nsep2021[\"Date\"] <- as.Date(\"2021-09-30\", format = \"%Y-%m-%d\")\nsep2021[\"Date\"]\n\n# A tibble: 268 × 1\n   Date      \n   <date>    \n 1 2021-09-30\n 2 2021-09-30\n 3 2021-09-30\n 4 2021-09-30\n 5 2021-09-30\n 6 2021-09-30\n 7 2021-09-30\n 8 2021-09-30\n 9 2021-09-30\n10 2021-09-30\n# … with 258 more rows\n\nhead(sep2021, 5)\n\n# A tibble: 5 × 28\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 2235772 6705439 5171697  1.19e7\n2 3172051003     JAKART… PADEMA… ANCOL     23947    6688   17259   13376  3.06e4\n3 3173041007     JAKART… TAMBORA ANGKE     29381    7581   21800   16438  3.82e4\n4 3175041005     JAKART… KRAMAT… BALE K…   29074    8708   20366   14412  3.48e4\n5 3175031003     JAKART… JATINE… BALI M…    9752    2517    7235    5660  1.29e4\n# … with 19 more variables: `LANSIA\\r\\nDOSIS 1` <dbl>,\n#   `LANSIA\\r\\nDOSIS 2` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>,\n#   `GOTONG ROYONG TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `TENAGA KESEHATAN\\r\\nDOSIS 1` <dbl>, `TENAGA KESEHATAN\\r\\nDOSIS 2` <dbl>, …\n\n\n\n\n\noct2021 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Oktober 2021).xlsx\", sheet = \"Data Kelurahan\")\noct2021[\"Date\"] <- as.Date(\"2021-10-31\", format = \"%Y-%m-%d\")\nhead(oct2021, 5)\n\n# A tibble: 5 × 28\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 1880524 7060687 5729001  1.28e7\n2 3172051003     JAKART… PADEMA… ANCOL     23947    5991   17956   14504  3.25e4\n3 3173041007     JAKART… TAMBORA ANGKE     29381    6557   22824   18185  4.10e4\n4 3175041005     JAKART… KRAMAT… BALE K…   29074    7586   21488   16444  3.79e4\n5 3175031003     JAKART… JATINE… BALI M…    9752    2125    7627    6277  1.39e4\n# … with 19 more variables: `LANSIA\\r\\nDOSIS 1` <dbl>,\n#   `LANSIA\\r\\nDOSIS 2` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>,\n#   `GOTONG ROYONG TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `TENAGA KESEHATAN\\r\\nDOSIS 1` <dbl>, `TENAGA KESEHATAN\\r\\nDOSIS 2` <dbl>, …\n\n\n\n\n\nnov2021 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 November 2021).xlsx\", sheet = \"Data Kelurahan\")\nnov2021[\"Date\"] <- as.Date(\"2021-11-30\", format = \"%Y-%m-%d\")\nhead(nov2021, 5)\n\n# A tibble: 5 × 28\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 1723821 7217390 6172636  1.34e7\n2 3172051003     JAKART… PADEMA… ANCOL     23947    5527   18420   15466  3.39e4\n3 3173041007     JAKART… TAMBORA ANGKE     29381    5986   23395   19404  4.28e4\n4 3175041005     JAKART… KRAMAT… BALE K…   29074    6802   22272   18084  4.04e4\n5 3175031003     JAKART… JATINE… BALI M…    9752    1920    7832    6773  1.46e4\n# … with 19 more variables: `LANSIA\\r\\nDOSIS 1` <dbl>,\n#   `LANSIA\\r\\nDOSIS 2` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>,\n#   `GOTONG ROYONG TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `TENAGA KESEHATAN\\r\\nDOSIS 1` <dbl>, `TENAGA KESEHATAN\\r\\nDOSIS 2` <dbl>, …\n\n\n\n\n\ndec2021 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Desember 2021).xlsx\", sheet = \"Data Kelurahan\")\ndec2021[\"Date\"] <- as.Date(\"2021-12-31\", format = \"%Y-%m-%d\")\nhead(dec2021, 5)\n\n# A tibble: 5 × 28\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 1623736 7317475 6370175  1.37e7\n2 3172051003     JAKART… PADEMA… ANCOL     23947    5062   18885   15996  3.49e4\n3 3173041007     JAKART… TAMBORA ANGKE     29381    5626   23755   20026  4.38e4\n4 3175041005     JAKART… KRAMAT… BALE K…   29074    6335   22739   18925  4.17e4\n5 3175031003     JAKART… JATINE… BALI M…    9752    1782    7970    7003  1.50e4\n# … with 19 more variables: `LANSIA\\r\\nDOSIS 1` <dbl>,\n#   `LANSIA\\r\\nDOSIS 2` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>,\n#   `GOTONG ROYONG TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `TENAGA KESEHATAN\\r\\nDOSIS 1` <dbl>, `TENAGA KESEHATAN\\r\\nDOSIS 2` <dbl>, …\n\n\n\n\n\njan2022 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Januari 2022).xlsx\", sheet = \"Data Kelurahan\")\njan2022[\"Date\"] <- as.Date(\"2022-01-31\", format = \"%Y-%m-%d\")\nhead(jan2022, 5)\n\n# A tibble: 5 × 28\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 1538221 7402990 6516678  1.39e7\n2 3172051003     JAKART… PADEMA… ANCOL     23947    4647   19300   16477  3.58e4\n3 3173041007     JAKART… TAMBORA ANGKE     29381    5388   23993   20463  4.45e4\n4 3175041005     JAKART… KRAMAT… BALE K…   29074    5967   23107   19468  4.26e4\n5 3175031003     JAKART… JATINE… BALI M…    9752    1678    8074    7176  1.52e4\n# … with 19 more variables: `LANSIA\\r\\nDOSIS 1` <dbl>,\n#   `LANSIA\\r\\nDOSIS 2` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>,\n#   `GOTONG ROYONG TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `TENAGA KESEHATAN\\r\\nDOSIS 1` <dbl>, `TENAGA KESEHATAN\\r\\nDOSIS 2` <dbl>, …\n\n\n\n\n\nfeb2022 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (27 Februari 2022).xlsx\", sheet = \"Data Kelurahan\")\nfeb2022[\"Date\"] <- as.Date(\"2022-02-27\", format = \"%Y-%m-%d\")\nhead(feb2022, 5)\n\n# A tibble: 5 × 28\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ TOTAL…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 1517196 7424015 6590380  1.40e7\n2 3172051003     JAKART… PADEMA… ANCOL     23947    4592   19355   16687  3.60e4\n3 3173041007     JAKART… TAMBORA ANGKE     29381    5319   24062   20738  4.48e4\n4 3175041005     JAKART… KRAMAT… BALE K…   29074    5903   23171   19754  4.29e4\n5 3175031003     JAKART… JATINE… BALI M…    9752    1649    8103    7245  1.53e4\n# … with 19 more variables: `LANSIA\\r\\nDOSIS 1` <dbl>,\n#   `LANSIA\\r\\nDOSIS 2` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>,\n#   `GOTONG ROYONG TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `TENAGA KESEHATAN\\r\\nDOSIS 1` <dbl>, `TENAGA KESEHATAN\\r\\nDOSIS 2` <dbl>, …\n\n\n\n\n\nmar2022 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Maret 2022).xlsx\", sheet = \"Data Kelurahan\")\nmar2022[\"Date\"] <- as.Date(\"2022-03-31\", format = \"%Y-%m-%d\")\nhead(mar2022, 5)\n\n# A tibble: 5 × 35\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ JUMLA…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 1482471 7458740 6682911 1836511\n2 3172051003     JAKART… PADEMA… ANCOL     23947    4522   19425   16909    3934\n3 3173041007     JAKART… TAMBORA ANGKE     29381    5186   24195   21000    6122\n4 3175041005     JAKART… KRAMAT… BALE K…   29074    5780   23294   20123    4124\n5 3175031003     JAKART… JATINE… BALI M…    9752    1621    8131    7332    2159\n# … with 26 more variables: `TOTAL VAKSIN\\r\\nDIBERIKAN` <dbl>,\n#   `LANSIA\\r\\nDOSIS 1` <dbl>, `LANSIA\\r\\nDOSIS 2` <dbl>,\n#   `LANSIA\\r\\nDOSIS 3` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 3` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>, …\n\n\n\n\n\napr2022 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 April 2022).xlsx\", sheet = \"Data Kelurahan\")\napr2022[\"Date\"] <- as.Date(\"2022-04-30\", format = \"%Y-%m-%d\")\nhead(apr2022, 5)\n\n# A tibble: 5 × 35\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ JUMLA…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 1453423 7487788 6727002 2720796\n2 3172051003     JAKART… PADEMA… ANCOL     23947    4449   19498   17027    6568\n3 3173041007     JAKART… TAMBORA ANGKE     29381    5101   24280   21134    8915\n4 3175041005     JAKART… KRAMAT… BALE K…   29074    5699   23375   20315    6491\n5 3175031003     JAKART… JATINE… BALI M…    9752    1598    8154    7395    3225\n# … with 26 more variables: `TOTAL VAKSIN\\r\\nDIBERIKAN` <dbl>,\n#   `LANSIA\\r\\nDOSIS 1` <dbl>, `LANSIA\\r\\nDOSIS 2` <dbl>,\n#   `LANSIA\\r\\nDOSIS 3` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 3` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>, …\n\n\n\n\n\nmay2022 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Mei 2022).xlsx\", sheet = \"Data Kelurahan\")\nmay2022[\"Date\"] <- as.Date(\"2022-05-31\", format = \"%Y-%m-%d\")\nhead(may2022, 5)\n\n# A tibble: 5 × 35\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ JUMLA…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 1445540 7495671 6743764 2885301\n2 3172051003     JAKART… PADEMA… ANCOL     23947    4440   19507   17077    7022\n3 3173041007     JAKART… TAMBORA ANGKE     29381    5084   24297   21182    9484\n4 3175041005     JAKART… KRAMAT… BALE K…   29074    5676   23398   20373    7030\n5 3175031003     JAKART… JATINE… BALI M…    9752    1589    8163    7413    3413\n# … with 26 more variables: `TOTAL VAKSIN\\r\\nDIBERIKAN` <dbl>,\n#   `LANSIA\\r\\nDOSIS 1` <dbl>, `LANSIA\\r\\nDOSIS 2` <dbl>,\n#   `LANSIA\\r\\nDOSIS 3` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 3` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>, …\n\n\n\n\n\njun2022 <- read_excel(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 Juni 2022).xlsx\", sheet = \"Data Kelurahan\")\njun2022[\"Date\"] <- as.Date(\"2022-06-30\", format = \"%Y-%m-%d\")\nhead(jun2022, 5)\n\n# A tibble: 5 × 35\n  KODE KELURAH…¹ WILAY…² KECAM…³ KELUR…⁴ SASARAN BELUM…⁵ JUMLA…⁶ JUMLA…⁷ JUMLA…⁸\n  <chr>          <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1 <NA>           <NA>    <NA>    TOTAL   8941211 1431393 7509818 6756584 3031594\n2 3172051003     JAKART… PADEMA… ANCOL     23947    4402   19545   17106    7369\n3 3173041007     JAKART… TAMBORA ANGKE     29381    5041   24340   21213   10086\n4 3175041005     JAKART… KRAMAT… BALE K…   29074    5632   23442   20416    7398\n5 3175031003     JAKART… JATINE… BALI M…    9752    1576    8176    7427    3602\n# … with 26 more variables: `TOTAL VAKSIN\\r\\nDIBERIKAN` <dbl>,\n#   `LANSIA\\r\\nDOSIS 1` <dbl>, `LANSIA\\r\\nDOSIS 2` <dbl>,\n#   `LANSIA\\r\\nDOSIS 3` <dbl>, `LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 1` <dbl>, `PELAYAN PUBLIK\\r\\nDOSIS 2` <dbl>,\n#   `PELAYAN PUBLIK\\r\\nDOSIS 3` <dbl>,\n#   `PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN` <dbl>,\n#   `GOTONG ROYONG\\r\\nDOSIS 1` <dbl>, `GOTONG ROYONG\\r\\nDOSIS 2` <dbl>, …"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#geospatial-dataset",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#geospatial-dataset",
    "title": "Take-home Exercise 2",
    "section": "3.3 Geospatial Dataset",
    "text": "3.3 Geospatial Dataset\n\nImportingDataset\n\n\nThe EPSG code for Indonesia is 23845.\n\njakarta_boundary <- st_read(dsn = \"data/geospatial\", \n                 layer = \"BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA\") %>% \n  select(c(1:9))%>%  \n  na.omit() %>% \n  dplyr::filter(KAB_KOTA != \"KEPULAUAN SERIBU\")\n\nReading layer `BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex02\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 269 features and 161 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 106.3831 ymin: -6.370815 xmax: 106.9728 ymax: -5.184322\nGeodetic CRS:  WGS 84\n\njakarta_boundary$geometry\n\nGeometry set for 261 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 106.6862 ymin: -6.370815 xmax: 106.9728 ymax: -6.089036\nGeodetic CRS:  WGS 84\nFirst 5 geometries:\n\n\n\n\n\nhead(jakarta_boundary, 5)\n\nSimple feature collection with 5 features and 9 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 106.8105 ymin: -6.17575 xmax: 106.8711 ymax: -6.141043\nGeodetic CRS:  WGS 84\n  OBJECT_ID  KODE_DESA          DESA   KODE    PROVINSI      KAB_KOTA\n1     25477 3173031006     KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT\n2     25478 3173031007        GLODOK 317303 DKI JAKARTA JAKARTA BARAT\n3     25397 3171031003 HARAPAN MULIA 317103 DKI JAKARTA JAKARTA PUSAT\n4     25400 3171031006  CEMPAKA BARU 317103 DKI JAKARTA JAKARTA PUSAT\n5     25390 3171021001    PASAR BARU 317102 DKI JAKARTA JAKARTA PUSAT\n    KECAMATAN    DESA_KELUR JUMLAH_PEN                       geometry\n1  TAMAN SARI     KEAGUNGAN      21609 MULTIPOLYGON (((106.8164 -6...\n2  TAMAN SARI        GLODOK       9069 MULTIPOLYGON (((106.8148 -6...\n3   KEMAYORAN HARAPAN MULIA      29085 MULTIPOLYGON (((106.8576 -6...\n4   KEMAYORAN  CEMPAKA BARU      41913 MULTIPOLYGON (((106.8631 -6...\n5 SAWAH BESAR    PASAR BARU      15793 MULTIPOLYGON (((106.8369 -6..."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#combine",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#combine",
    "title": "Take-home Exercise 2",
    "section": "4.1 Combine",
    "text": "4.1 Combine\nYou may realise that the dataframes from the months March to June in 2022 have 35 columns in total. Whereas the months before have only 28. Note that all dataframes have been added an additional one “date” column stating their month (originally 34 and 27 respectively).\n\nCombining MonthsData\n\n\nSince we will not have any data on these extra 7 columns, we will pick out find the common 28 columns and slice the dataframes before combining all together.\n\ncolumn_name28 <- names(jul2021)\ncolumn_name35 <- names(jun2022)\noverlapped_cols = intersect(column_name28, column_name35)\n\n\nvaccine_months_list <- list(jul2021, aug2021, sep2021, oct2021, nov2021, dec2021, jan2022, feb2022, mar2022, apr2022, may2022, jun2022)\n\nvaccine_months <- data.frame()\n\n\nfor (month in vaccine_months_list) {\n  vaccine_months <- rbind(vaccine_months, month[2:nrow(month),overlapped_cols])\n}\nvaccine_months <- vaccine_months %>% \n  select(1, 4, 5, 6, 28)\n\n\n\n\nhead(vaccine_months, 5)\n\n# A tibble: 5 × 5\n  `KODE KELURAHAN` KELURAHAN    SASARAN `BELUM VAKSIN` Date      \n  <chr>            <chr>          <dbl>          <dbl> <date>    \n1 3172051003       ANCOL          23947          12333 2021-07-31\n2 3173041007       ANGKE          29381          13875 2021-07-31\n3 3175041005       BALE KAMBANG   29074          18314 2021-07-31\n4 3175031003       BALI MESTER     9752           5173 2021-07-31\n5 3175101006       BAMBU APUS     26285          13775 2021-07-31"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#create-monthly-vaccination-rate",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#create-monthly-vaccination-rate",
    "title": "Take-home Exercise 2",
    "section": "4.2 Create Monthly Vaccination Rate",
    "text": "4.2 Create Monthly Vaccination Rate\nThere is a total of 267 kelurahan or urban villages in the Special Capital Region of Jakarta.\n\\[\n267kelurahan \\times 12 months = 3204\n\\]\nWe can tell that we have the correct number of rows in our final dataframe, vaccine_months.\n\nnrow(vaccine_months)\n\n[1] 3204\n\n\n\n4.2.1 Calculate Monthly Vaccination Rate\nContinuing, we will need to create a column with the vaccination rates of each village in order to map a choropleth map.\nSince “SASARAN” is the target number of vaccinations provided and “BELUM VAKSIN” tells of the number of people not yet vaccinated, we can derive vaccination rates of each month for each village.\n\nvaccine_months[\"vaccination rate\"] <- (vaccine_months[\"SASARAN\"] - vaccine_months[\"BELUM VAKSIN\"])/vaccine_months[\"SASARAN\"] * 100\n\n\n\n\n\n\n\nRegarding the target numbers…\n\n\n\n\n\nIt is important to know that the target numbers did not change over the months, which ensures the measurement is consistent, rather than subjected to change due to population differences.\n\nfor (month in vaccine_months_list[c(2:length(vaccine_months_list))]) {\n  if (all.equal(jun2022[\"SASARAN\"], month[\"SASARAN\"]) == TRUE) {\n    print(\"TRUE\")\n  } else {\n    print(\"False\")\n  }\n}\n\n[1] \"TRUE\"\n[1] \"TRUE\"\n[1] \"TRUE\"\n[1] \"TRUE\"\n[1] \"TRUE\"\n[1] \"TRUE\"\n[1] \"TRUE\"\n[1] \"TRUE\"\n[1] \"TRUE\"\n[1] \"TRUE\"\n[1] \"TRUE\""
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#joining-of-geospatial-and-aspatial-datasets",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#joining-of-geospatial-and-aspatial-datasets",
    "title": "Take-home Exercise 2",
    "section": "4.3 Joining of Geospatial and Aspatial Datasets",
    "text": "4.3 Joining of Geospatial and Aspatial Datasets\nAs mentioned we want to visualise the vaccination rates on the map of Jakarta, this will require us to join the two existing dataframes in order to have a complete dataframe for the map.\nWe will join the two dataframes using “KODE KELURAHAN” in vaccine_months and “KODE_DESA” in jakarta_boundary, both referring to the code of the villages.\n\njakarta <- left_join(vaccine_months, jakarta_boundary, by=c(\"KODE KELURAHAN\"=\"KODE_DESA\"))\n\nIn addition, we are only interested in those kelurahan that are on the Java island. Hence, the Kepulauan Seribu or the Thousand Islands, north of Jakarta’s coast, will be removed from the dataset through the column “KAB_KOTA”, meaning city region.\n\njakarta <- na.omit(jakarta[jakarta[\"KAB_KOTA\"] != \"KEPULAUAN SERIBU\", ]) %>% \n  select(1:6, 11, 15)\n\nhead(jakarta, 5)\n\n# A tibble: 5 × 8\n  `KODE KELURAHAN` KELURAHAN    SASARAN BELUM VAKSI…¹ Date       vacci…² KAB_K…³\n  <chr>            <chr>          <dbl>         <dbl> <date>       <dbl> <chr>  \n1 3172051003       ANCOL          23947         12333 2021-07-31    48.5 JAKART…\n2 3173041007       ANGKE          29381         13875 2021-07-31    52.8 JAKART…\n3 3175041005       BALE KAMBANG   29074         18314 2021-07-31    37.0 JAKART…\n4 3175031003       BALI MESTER     9752          5173 2021-07-31    47.0 JAKART…\n5 3175101006       BAMBU APUS     26285         13775 2021-07-31    47.6 JAKART…\n# … with 1 more variable: geometry <MULTIPOLYGON [°]>, and abbreviated variable\n#   names ¹​`BELUM VAKSIN`, ²​`vaccination rate`, ³​KAB_KOTA\n\n\nConsidering that the columns are in Bahasa Indonesia, you may want to check out the translations of the selected columns to better understand the data.\n\n\n\n\n\n\nTranslations of Column Names\n\n\n\n\n\n\n\n\nBahasa Indonesia\nEnglish\n\n\n\n\nKode Kelurahan\nSub-district Code\n\n\nKelurahan\nUrban village\n\n\nSasaran\nTarget\n\n\nBelum Vaksin\nYet to be Vaccinated\n\n\nKab Kota\nCity region"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#entire-province",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#entire-province",
    "title": "Take-home Exercise 2",
    "section": "5.1 Entire Province",
    "text": "5.1 Entire Province\n\nJul 2021Aug 2021Sep 2021Oct 2021Nov 2021Dec 2021Jan 2022Feb 2022Mar 2022Apr 2022May 2022Jun 2022\n\n\n\njul21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-07-31\",])\ntm_shape(jul21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (July 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")\n\n\n\n\n\n\n\naug21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-08-31\",])\ntm_shape(aug21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (August 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")\n\n\n\n\n\n\n\nsep21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-09-30\",])\ntm_shape(sep21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (September 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")\n\n\n\n\n\n\n\noct21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-10-31\",])\ntm_shape(oct21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (October 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")\n\n\n\n\n\n\n\nnov21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-11-30\",])\ntm_shape(nov21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (November 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")\n\n\n\n\n\n\n\ndec21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-12-31\",])\ntm_shape(dec21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (December 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")\n\n\n\n\n\n\n\njan22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-01-31\",])\ntm_shape(jan22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (January 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")\n\n\n\n\n\n\n\nfeb22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-02-27\",])\ntm_shape(feb22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (February 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")\n\n\n\n\n\n\n\nmar22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-03-31\",])\ntm_shape(mar22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (March 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")\n\n\n\n\n\n\n\napr22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-04-30\",])\ntm_shape(apr22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (April 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")\n\n\n\n\n\n\n\nmay22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-05-31\",])\ntm_shape(may22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (May 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")\n\n\n\n\n\n\n\njun22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-06-30\",])\ntm_shape(jun22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (June 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#provincinal-region",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#provincinal-region",
    "title": "Take-home Exercise 2",
    "section": "5.2 Provincinal Region",
    "text": "5.2 Provincinal Region\n\nJul 2021Aug 2021Sep 2021Oct 2021Nov 2021Dec 2021Jan 2022Feb 2022Mar 2022Apr 2022May 2022Jun 2022\n\n\n\njul21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-07-31\",])\ntm_shape(jul21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (July 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)\n\n\n\n\n\n\n\naug21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-08-31\",])\ntm_shape(aug21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (August 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)\n\n\n\n\n\n\n\nsep21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-09-30\",])\ntm_shape(sep21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (September 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)\n\n\n\n\n\n\n\noct21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-10-31\",])\ntm_shape(oct21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (October 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)\n\n\n\n\n\n\n\nnov21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-11-30\",])\ntm_shape(nov21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (November 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)\n\n\n\n\n\n\n\ndec21_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2021-12-31\",])\ntm_shape(dec21_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (December 2021)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)\n\n\n\n\n\n\n\njan22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-01-31\",])\ntm_shape(jan22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (January 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)\n\n\n\n\n\n\n\nfeb22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-02-27\",])\ntm_shape(feb22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (February 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)\n\n\n\n\n\n\n\nmar22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-03-31\",])\ntm_shape(mar22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (March 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)\n\n\n\n\n\n\n\napr22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-04-30\",])\ntm_shape(apr22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (April 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)\n\n\n\n\n\n\n\n\nmay22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-05-31\",])\ntm_shape(may22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (May 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)\n\n\n\n\n\n\n\n\njun22_vaccination_rate <- st_as_sf(jakarta[jakarta$\"Date\" == \"2022-06-30\",])\ntm_shape(jun22_vaccination_rate) +\n  tm_fill(\"vaccination rate\",\n          n = 5,\n          style = \"quantile\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Vaccination Rates in Jakarta (June 2022)\",\n            main.title.size = 1.10,\n            main.title.position = \"center\") +\n   tm_facets(by = \"KAB_KOTA\",\n            free.coords = TRUE, \n            drop.shapes = TRUE)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#observations",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#observations",
    "title": "Take-home Exercise 2",
    "section": "5.3 Observations",
    "text": "5.3 Observations\nAs you observed the changes throughout the 12 months, you will quickly notice vaccination rates started higher in the north and shifted towards the south. It is crucial to note that all kelurahan actually increased in vaccination rates as seen in the legends of the maps. This may suggest the shift in programme’s focus as time went on. However, much of the middle region remained having moderate to lower rates throughout the period.\nThe immunisation programme also seemed to slow down starting from November 2021, with the lowest class increasing by less than 3% compared to more than 8% in the past months. Using quantile, one can too observe that certain kelurahan never left certain classes. Take for example, Srengseng Sawah. In spite of the village being located far south, it has always had one of the highest vaccination rates among all villages."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#observations-1",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#observations-1",
    "title": "Take-home Exercise 2",
    "section": "6.1 Observations",
    "text": "6.1 Observations\nThe Gi* maps confirmed our theory on the shifting geographical regions the vaccination programme focused on. Hot spots clustered in the north region of Jakarta in the early months of July and August 2021. But hots spot clusters mainly appear in the south region starting from September of that year.\nSimilarly, cold spots appear in central Jakarta, the densest region of the capital. It is likely one of the first places that is offered vaccination due to being the administrative center of Indonesia. This means that a big part of the population will be public servants, provided by vaccinations by Phase 2, before June 2021.\nThe i values in the different regions suggest that vaccination take-up might be closely tie to whether vaccination was more available in a particular region (i.e., more centers/vaccinations were located there) or related to the timing people in a region are offered vaccinations (i.e., regions with more elderly/public servants/healthcare workers were offered vaccinations first)."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#creating-time-series-cube",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#creating-time-series-cube",
    "title": "Take-home Exercise 2",
    "section": "7.1 Creating Time Series Cube",
    "text": "7.1 Creating Time Series Cube\nUsing spacetime(), we want to create an spatio-temporal cube to include time in our analysis.\n\ncolnames(jakarta_boundary)[colnames(jakarta_boundary) == \"KODE_DESA\"] =\"KODE KELURAHAN\"\n\njakarta_st <- spacetime(.data=jakarta, .geometry=jakarta_boundary,\n                      .loc_col = \"KODE KELURAHAN\",\n                      .time_col = \"Date\")\n\nis_spacetime_cube(jakarta_st)\n\n[1] TRUE"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#computing-gi",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#computing-gi",
    "title": "Take-home Exercise 2",
    "section": "7.2 Computing Gi*",
    "text": "7.2 Computing Gi*\nSimilar to the section on Local Gi* Analysis, we want to derive the neighbours and their inverse distance with the subject village.\n\njakarta_nb <- jakarta_st %>%\n  activate(\"geometry\") %>%\n  mutate(nb = include_self(st_contiguity(geometry)),\n         wt = st_inverse_distance(nb, geometry,\n                                  scale = 1,\n                                  alpha = 1),\n         .before = 1) %>%\n  set_nbs(\"nb\") %>%\n  set_wts(\"wt\")\nhead(jakarta_nb)\n\n# A tibble: 6 × 10\n  `KODE KELURAHAN` KELURAHAN     SASARAN BELUM VAKS…¹ Date       vacci…² KAB_K…³\n  <chr>            <chr>           <dbl>        <dbl> <date>       <dbl> <chr>  \n1 3173031006       KEAGUNGAN       17387         8126 2021-07-31    53.3 JAKART…\n2 3173031007       GLODOK           7837         3006 2021-07-31    61.6 JAKART…\n3 3171031003       HARAPAN MULIA   22557        11339 2021-07-31    49.7 JAKART…\n4 3171031006       CEMPAKA BARU    32581        17361 2021-07-31    46.7 JAKART…\n5 3171021001       PASAR BARU      12035         4899 2021-07-31    59.3 JAKART…\n6 3171021002       KARANG ANYAR    25761        12303 2021-07-31    52.2 JAKART…\n# … with 3 more variables: geometry <MULTIPOLYGON [°]>, nb <list>, wt <list>,\n#   and abbreviated variable names ¹​`BELUM VAKSIN`, ²​`vaccination rate`,\n#   ³​KAB_KOTA\n\n\nGrouping by “Date”, local_gstar_perm() will be calculating the local Gi* of each kelurahan each month.\n\ngi_stars <- jakarta_nb %>% \n  group_by(Date) %>% \n  mutate(gi_star = local_gstar_perm(\n    `vaccination rate`, nb, wt)) %>% \n  tidyr::unnest(gi_star)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#man-kendall-test",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#man-kendall-test",
    "title": "Take-home Exercise 2",
    "section": "6.3 Man-Kendall Test",
    "text": "6.3 Man-Kendall Test\nFinally, we will be conducting the Man-Kendall test to determine the trend of vaccination rates of a village and if they are significant.\n\n6.3.1 All Kelurahan\nWe will first examine the overall region.\n\n6.3.1.1 Emerging Hotspot Analysis\nWe want to observe here whether is temporal trend associated with vaccination rates or are vaccination rates purely situated in the spatial context through emerging_hotspot_analysis().\n\nehsa <- emerging_hotspot_analysis(\n  x = jakarta_st, \n  .var = \"vaccination rate\", \n  k = 1, \n  nsim = 99\n)\n\n\n\n6.3.1.2 Visualisation\n\n6.3.1.2.1 Distribution of EHSA Classes\nThe chart below shows an interesting hot and cold spots analysis. The highest bar is oscilating hotspots. It is defined by its wavering cluster as it has been also a significant cold spot, even though it’s a hot spot at the end of observing time period. This might be referring to much of the south and east Jakarta, where it’s has been only cold spots at the start.\nThe second highest being sporadic coldspots, where the areas have been on-again and off-again cold spot. These regions may be those villages in the central part of the maps, which has been sidelined by the drastic difference in vaccination rates between the areas further coastal and further inland throughout our examination.\nThe overall chart shows how much the villages have in vaccination rates across the months that little selurahan have remained hot or cold spots throughout..\n\nggplot(data = ehsa,\n       aes(x = classification)) +\n  geom_bar()\n\n\n\n\n\n\n6.3.1.2.2 EHSA\nJoining the EHSA data with the boundaries so we can view the trends in a map.\n\njakarta_ehsa <- jakarta_boundary %>%\n  left_join(ehsa,\n            by = c(\"KODE KELURAHAN\" = \"location\"))\nhead(jakarta_ehsa, 5)\n\nSimple feature collection with 5 features and 12 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 106.8105 ymin: -6.17575 xmax: 106.8711 ymax: -6.141043\nGeodetic CRS:  WGS 84\n  OBJECT_ID KODE KELURAHAN          DESA   KODE    PROVINSI      KAB_KOTA\n1     25477     3173031006     KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT\n2     25478     3173031007        GLODOK 317303 DKI JAKARTA JAKARTA BARAT\n3     25397     3171031003 HARAPAN MULIA 317103 DKI JAKARTA JAKARTA PUSAT\n4     25400     3171031006  CEMPAKA BARU 317103 DKI JAKARTA JAKARTA PUSAT\n5     25390     3171021001    PASAR BARU 317102 DKI JAKARTA JAKARTA PUSAT\n    KECAMATAN    DESA_KELUR JUMLAH_PEN        tau    p_value\n1  TAMAN SARI     KEAGUNGAN      21609 0.21212119 0.37269139\n2  TAMAN SARI        GLODOK       9069 0.51515144 0.02364218\n3   KEMAYORAN HARAPAN MULIA      29085 0.24242422 0.30367327\n4   KEMAYORAN  CEMPAKA BARU      41913 0.27272725 0.24372220\n5 SAWAH BESAR    PASAR BARU      15793 0.06060605 0.83701146\n       classification                       geometry\n1 no pattern detected MULTIPOLYGON (((106.8164 -6...\n2   sporadic coldspot MULTIPOLYGON (((106.8148 -6...\n3 no pattern detected MULTIPOLYGON (((106.8576 -6...\n4   sporadic coldspot MULTIPOLYGON (((106.8631 -6...\n5 no pattern detected MULTIPOLYGON (((106.8369 -6...\n\n\nUnlike as expected, oscilating hotspots are more evenly distributed than first thought of as they are not concentrated in any particular region. However clearly, the south and north regions are less dominated by oscilating hotspots, with especially the south having more sporadic coldspots than others.\n\nehsa_sig <- jakarta_ehsa  %>%\n  filter(p_value < 0.05)\ntmap_mode(\"view\")\ntm_shape(jakarta_ehsa) +\n  tm_polygons(id=\"DESA\") +\n  tm_borders(alpha = 0.5) +\ntm_shape(ehsa_sig) +\n  tm_fill(\"classification\", id=\"DESA\") + \n  tm_borders(alpha = 0.4) +\n  tm_view(set.zoom.limits = c(5,25),\n          set.view = 9) \n\n\n\n\n\n\n\n\n\n\n6.3.2 Kelurahan\nWe will now more closely examine 3 kelurahan and understand the trends behind them.\nThe below code chunk shows us using\n\nehsa <- gi_stars %>%\n  group_by(`KELURAHAN`) %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>%\n  tidyr::unnest_wider(mk)\n\n\nemerging <- ehsa %>% \n  arrange(sl, abs(tau)) %>% \n  slice(1:5)\nemerging\n\n# A tibble: 5 × 6\n  KELURAHAN         tau        sl     S     D  varS\n  <chr>           <dbl>     <dbl> <dbl> <dbl> <dbl>\n1 KARANG ANYAR   -0.970 0.0000156   -64  66.0  213.\n2 KARET KUNINGAN -0.970 0.0000156   -64  66.0  213.\n3 KARTINI        -0.970 0.0000156   -64  66.0  213.\n4 CIPINANG MUARA  0.970 0.0000156    64  66.0  213.\n5 MANGGARAI       0.970 0.0000156    64  66.0  213.\n\n\n\n6.3.2.1 Pluit\nPluit is located in north Jakarta, along the coast. This is a village which had higher vaccination rate but slowly overtook by others as the programme expanded..\n\npluit <- gi_stars %>% \n  ungroup() %>% \n  filter(`KELURAHAN` == \"PLUIT\") |> \n  select(`KELURAHAN`, `Date`, gi_star)\n\n\nggplot(data = pluit, \n       aes(x = `Date`, \n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\n\n\n\nThis is quite reflected in this chart, where its Gi* values have a downward trend.\n\npluit %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>% \n  tidyr::unnest_wider(mk)\n\n# A tibble: 1 × 5\n     tau      sl     S     D  varS\n   <dbl>   <dbl> <dbl> <dbl> <dbl>\n1 -0.667 0.00319   -44  66.0  213.\n\n\nThe p-value or sl then indicates that this is a significant trend, implying that time indeed plays a role in influencing the village’s vaccination rates.\n\n\n\n6.3.3 Melawai\nMelawai is a spordiac coldspot, locating in south Jakarta.\n\nmelawai <- gi_stars %>% \n  ungroup() %>% \n  filter(`KELURAHAN` == \"MELAWAI\") |> \n  select(`KELURAHAN`, `Date`, gi_star)\n\n\nggplot(data = melawai, \n       aes(x = `Date`, \n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\n\n\n\nIt, like Pluit, has a overall downward trend but it has a spike in October 2021 before continuing downwards.\n\nmelawai %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>% \n  tidyr::unnest_wider(mk)\n\n# A tibble: 1 × 5\n     tau        sl     S     D  varS\n   <dbl>     <dbl> <dbl> <dbl> <dbl>\n1 -0.909 0.0000521   -60  66.0  213.\n\n\nIt too has a p-value lower than 0.05, suggesting the downward trend is significant.\n\n\n6.3.4 Srengseng Sawah\nSrengseng Sawah is a village we have mentioned in the\n\nsrengseng_sawah <- gi_stars %>% \n  ungroup() %>% \n  filter(`KELURAHAN` == \"SRENGSENG SAWAH\") |> \n  select(`KELURAHAN`, `Date`, gi_star)\n\n\nggplot(data = srengseng_sawah, \n       aes(x = `Date`, \n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\n\n\n\n\nsrengseng_sawah %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>% \n  tidyr::unnest_wider(mk)\n\n# A tibble: 1 × 5\n    tau      sl     S     D  varS\n  <dbl>   <dbl> <dbl> <dbl> <dbl>\n1 0.727 0.00127    48  66.0  213."
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html",
    "title": "In-class Exercise 8",
    "section": "",
    "text": "pacman::p_load(olsrr, corrplot, ggpubr, sf, spdep, GWmodel, tmap, tidyverse, gtsummary)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#geospatial-data",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#geospatial-data",
    "title": "In-class Exercise 8",
    "section": "2.1 Geospatial Data",
    "text": "2.1 Geospatial Data\n\nImportingData\n\n\n\nmpsz_svy21 = st_read(dsn = \"data/geospatial\",\n               layer = \"MP14_SUBZONE_WEB_PL\") %>% \n  st_transform(crs = 3414)\n\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `C:\\deadline2359\\IS415-GAA\\In-class_Ex\\In-class_Ex08\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\n\n\n\n\nhead(mpsz_svy21)\n\nSimple feature collection with 6 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 24468.89 ymin: 28369.47 xmax: 32362.39 ymax: 30542.74\nProjected CRS: SVY21 / Singapore TM\n  OBJECTID SUBZONE_NO      SUBZONE_N SUBZONE_C CA_IND      PLN_AREA_N\n1        1          1   MARINA SOUTH    MSSZ01      Y    MARINA SOUTH\n2        2          1   PEARL'S HILL    OTSZ01      Y          OUTRAM\n3        3          3      BOAT QUAY    SRSZ03      Y SINGAPORE RIVER\n4        4          8 HENDERSON HILL    BMSZ08      N     BUKIT MERAH\n5        5          3        REDHILL    BMSZ03      N     BUKIT MERAH\n6        6          7 ALEXANDRA HILL    BMSZ07      N     BUKIT MERAH\n  PLN_AREA_C       REGION_N REGION_C          INC_CRC FMEL_UPD_D   X_ADDR\n1         MS CENTRAL REGION       CR 5ED7EB253F99252E 2014-12-05 31595.84\n2         OT CENTRAL REGION       CR 8C7149B9EB32EEFC 2014-12-05 28679.06\n3         SR CENTRAL REGION       CR C35FEFF02B13E0E5 2014-12-05 29654.96\n4         BM CENTRAL REGION       CR 3775D82C5DDBEFBD 2014-12-05 26782.83\n5         BM CENTRAL REGION       CR 85D9ABEF0A40678F 2014-12-05 26201.96\n6         BM CENTRAL REGION       CR 9D286521EF5E3B59 2014-12-05 25358.82\n    Y_ADDR SHAPE_Leng SHAPE_Area                       geometry\n1 29220.19   5267.381  1630379.3 MULTIPOLYGON (((31495.56 30...\n2 29782.05   3506.107   559816.2 MULTIPOLYGON (((29092.28 30...\n3 29974.66   1740.926   160807.5 MULTIPOLYGON (((29932.33 29...\n4 29933.77   3313.625   595428.9 MULTIPOLYGON (((27131.28 30...\n5 30005.70   2825.594   387429.4 MULTIPOLYGON (((26451.03 30...\n6 29991.38   4428.913  1030378.8 MULTIPOLYGON (((25899.7 297..."
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#aspatial-data",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#aspatial-data",
    "title": "In-class Exercise 8",
    "section": "2.2 Aspatial Data",
    "text": "2.2 Aspatial Data\n\nImportingData\n\n\n\ncondo_resale = read_csv(\"data/aspatial/Condo_resale_2015.csv\")\n\n\n\n\nhead(condo_resale)\n\n# A tibble: 6 × 23\n  LATITUDE LONGI…¹ POSTC…² SELLI…³ AREA_…⁴   AGE PROX_…⁵ PROX_…⁶ PROX_…⁷ PROX_…⁸\n     <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1     1.29    104.  118635 3000000     309    30    7.94   0.166   2.52     6.62\n2     1.33    104.  288420 3880000     290    32    6.61   0.280   1.93     7.51\n3     1.31    104.  267833 3325000     248    33    6.90   0.429   0.502    6.46\n4     1.31    104.  258380 4250000     127     7    4.04   0.395   1.99     4.91\n5     1.32    104.  467169 1400000     145    28   11.8    0.119   1.12     6.41\n6     1.31    104.  466472 1320000     139    22   10.3    0.125   0.789    5.09\n# … with 13 more variables: PROX_HAWKER_MARKET <dbl>, PROX_KINDERGARTEN <dbl>,\n#   PROX_MRT <dbl>, PROX_PARK <dbl>, PROX_PRIMARY_SCH <dbl>,\n#   PROX_TOP_PRIMARY_SCH <dbl>, PROX_SHOPPING_MALL <dbl>,\n#   PROX_SUPERMARKET <dbl>, PROX_BUS_STOP <dbl>, NO_Of_UNITS <dbl>,\n#   FAMILY_FRIENDLY <dbl>, FREEHOLD <dbl>, LEASEHOLD_99YR <dbl>, and\n#   abbreviated variable names ¹​LONGITUDE, ²​POSTCODE, ³​SELLING_PRICE,\n#   ⁴​AREA_SQM, ⁵​PROX_CBD, ⁶​PROX_CHILDCARE, ⁷​PROX_ELDERLYCARE, …\n\n\n\n2.2.1 Data Structure\n\ndplyr::glimpse(condo_resale)\n\nRows: 1,436\nColumns: 23\n$ LATITUDE             <dbl> 1.287145, 1.328698, 1.313727, 1.308563, 1.321437,…\n$ LONGITUDE            <dbl> 103.7802, 103.8123, 103.7971, 103.8247, 103.9505,…\n$ POSTCODE             <dbl> 118635, 288420, 267833, 258380, 467169, 466472, 3…\n$ SELLING_PRICE        <dbl> 3000000, 3880000, 3325000, 4250000, 1400000, 1320…\n$ AREA_SQM             <dbl> 309, 290, 248, 127, 145, 139, 218, 141, 165, 168,…\n$ AGE                  <dbl> 30, 32, 33, 7, 28, 22, 24, 24, 27, 31, 17, 22, 6,…\n$ PROX_CBD             <dbl> 7.941259, 6.609797, 6.898000, 4.038861, 11.783402…\n$ PROX_CHILDCARE       <dbl> 0.16597932, 0.28027246, 0.42922669, 0.39473543, 0…\n$ PROX_ELDERLYCARE     <dbl> 2.5198118, 1.9333338, 0.5021395, 1.9910316, 1.121…\n$ PROX_URA_GROWTH_AREA <dbl> 6.618741, 7.505109, 6.463887, 4.906512, 6.410632,…\n$ PROX_HAWKER_MARKET   <dbl> 1.76542207, 0.54507614, 0.37789301, 1.68259969, 0…\n$ PROX_KINDERGARTEN    <dbl> 0.05835552, 0.61592412, 0.14120309, 0.38200076, 0…\n$ PROX_MRT             <dbl> 0.5607188, 0.6584461, 0.3053433, 0.6910183, 0.528…\n$ PROX_PARK            <dbl> 1.1710446, 0.1992269, 0.2779886, 0.9832843, 0.116…\n$ PROX_PRIMARY_SCH     <dbl> 1.6340256, 0.9747834, 1.4715016, 1.4546324, 0.709…\n$ PROX_TOP_PRIMARY_SCH <dbl> 3.3273195, 0.9747834, 1.4715016, 2.3006394, 0.709…\n$ PROX_SHOPPING_MALL   <dbl> 2.2102717, 2.9374279, 1.2256850, 0.3525671, 1.307…\n$ PROX_SUPERMARKET     <dbl> 0.9103958, 0.5900617, 0.4135583, 0.4162219, 0.581…\n$ PROX_BUS_STOP        <dbl> 0.10336166, 0.28673408, 0.28504777, 0.29872340, 0…\n$ NO_Of_UNITS          <dbl> 18, 20, 27, 30, 30, 31, 32, 32, 32, 32, 34, 34, 3…\n$ FAMILY_FRIENDLY      <dbl> 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0…\n$ FREEHOLD             <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1…\n$ LEASEHOLD_99YR       <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n\n\n\n\n2.2.2 Longitude\n\nhead(condo_resale$LONGITUDE)\n\n[1] 103.7802 103.8123 103.7971 103.8247 103.9505 103.9386\n\n\n\n\n2.2.3 Latitude\n\nhead(condo_resale$LATITUDE)\n\n[1] 1.287145 1.328698 1.313727 1.308563 1.321437 1.314198\n\n\n\n\n2.2.4 Summary\n\nsummary(condo_resale)\n\n    LATITUDE       LONGITUDE        POSTCODE      SELLING_PRICE     \n Min.   :1.240   Min.   :103.7   Min.   : 18965   Min.   :  540000  \n 1st Qu.:1.309   1st Qu.:103.8   1st Qu.:259849   1st Qu.: 1100000  \n Median :1.328   Median :103.8   Median :469298   Median : 1383222  \n Mean   :1.334   Mean   :103.8   Mean   :440439   Mean   : 1751211  \n 3rd Qu.:1.357   3rd Qu.:103.9   3rd Qu.:589486   3rd Qu.: 1950000  \n Max.   :1.454   Max.   :104.0   Max.   :828833   Max.   :18000000  \n    AREA_SQM          AGE           PROX_CBD       PROX_CHILDCARE    \n Min.   : 34.0   Min.   : 0.00   Min.   : 0.3869   Min.   :0.004927  \n 1st Qu.:103.0   1st Qu.: 5.00   1st Qu.: 5.5574   1st Qu.:0.174481  \n Median :121.0   Median :11.00   Median : 9.3567   Median :0.258135  \n Mean   :136.5   Mean   :12.14   Mean   : 9.3254   Mean   :0.326313  \n 3rd Qu.:156.0   3rd Qu.:18.00   3rd Qu.:12.6661   3rd Qu.:0.368293  \n Max.   :619.0   Max.   :37.00   Max.   :19.1804   Max.   :3.465726  \n PROX_ELDERLYCARE  PROX_URA_GROWTH_AREA PROX_HAWKER_MARKET PROX_KINDERGARTEN \n Min.   :0.05451   Min.   :0.2145       Min.   :0.05182    Min.   :0.004927  \n 1st Qu.:0.61254   1st Qu.:3.1643       1st Qu.:0.55245    1st Qu.:0.276345  \n Median :0.94179   Median :4.6186       Median :0.90842    Median :0.413385  \n Mean   :1.05351   Mean   :4.5981       Mean   :1.27987    Mean   :0.458903  \n 3rd Qu.:1.35122   3rd Qu.:5.7550       3rd Qu.:1.68578    3rd Qu.:0.578474  \n Max.   :3.94916   Max.   :9.1554       Max.   :5.37435    Max.   :2.229045  \n    PROX_MRT         PROX_PARK       PROX_PRIMARY_SCH  PROX_TOP_PRIMARY_SCH\n Min.   :0.05278   Min.   :0.02906   Min.   :0.07711   Min.   :0.07711     \n 1st Qu.:0.34646   1st Qu.:0.26211   1st Qu.:0.44024   1st Qu.:1.34451     \n Median :0.57430   Median :0.39926   Median :0.63505   Median :1.88213     \n Mean   :0.67316   Mean   :0.49802   Mean   :0.75471   Mean   :2.27347     \n 3rd Qu.:0.84844   3rd Qu.:0.65592   3rd Qu.:0.95104   3rd Qu.:2.90954     \n Max.   :3.48037   Max.   :2.16105   Max.   :3.92899   Max.   :6.74819     \n PROX_SHOPPING_MALL PROX_SUPERMARKET PROX_BUS_STOP       NO_Of_UNITS    \n Min.   :0.0000     Min.   :0.0000   Min.   :0.001595   Min.   :  18.0  \n 1st Qu.:0.5258     1st Qu.:0.3695   1st Qu.:0.098356   1st Qu.: 188.8  \n Median :0.9357     Median :0.5687   Median :0.151710   Median : 360.0  \n Mean   :1.0455     Mean   :0.6141   Mean   :0.193974   Mean   : 409.2  \n 3rd Qu.:1.3994     3rd Qu.:0.7862   3rd Qu.:0.220466   3rd Qu.: 590.0  \n Max.   :3.4774     Max.   :2.2441   Max.   :2.476639   Max.   :1703.0  \n FAMILY_FRIENDLY     FREEHOLD      LEASEHOLD_99YR  \n Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  \n 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000  \n Median :0.0000   Median :0.0000   Median :0.0000  \n Mean   :0.4868   Mean   :0.4227   Mean   :0.4882  \n 3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.:1.0000  \n Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  \n\n\n\n\n\n\n\n\n\n\n\n\nCheck the summary…\n\n\n\nIf a column has too many zeros or has the same statistics throughout the measurements, the column may not be suitable for using.\n\n\n\n2.2.5 Converting Aspatial DataFrame into a sf object\n\nCodeData\n\n\n\ncondo_resale.sf <- st_as_sf(condo_resale,\n                            coords = c(\"LONGITUDE\", \"LATITUDE\"),\n                            crs=4326) %>%\n  st_transform(crs=3414)\n\n\n\n\nhead(condo_resale.sf)\n\nSimple feature collection with 6 features and 21 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 22085.12 ymin: 29951.54 xmax: 41042.56 ymax: 34546.2\nProjected CRS: SVY21 / Singapore TM\n# A tibble: 6 × 22\n  POSTCODE SELLI…¹ AREA_…²   AGE PROX_…³ PROX_…⁴ PROX_…⁵ PROX_…⁶ PROX_…⁷ PROX_…⁸\n     <dbl>   <dbl>   <dbl> <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1   118635 3000000     309    30    7.94   0.166   2.52     6.62   1.77   0.0584\n2   288420 3880000     290    32    6.61   0.280   1.93     7.51   0.545  0.616 \n3   267833 3325000     248    33    6.90   0.429   0.502    6.46   0.378  0.141 \n4   258380 4250000     127     7    4.04   0.395   1.99     4.91   1.68   0.382 \n5   467169 1400000     145    28   11.8    0.119   1.12     6.41   0.565  0.461 \n6   466472 1320000     139    22   10.3    0.125   0.789    5.09   0.781  0.0994\n# … with 12 more variables: PROX_MRT <dbl>, PROX_PARK <dbl>,\n#   PROX_PRIMARY_SCH <dbl>, PROX_TOP_PRIMARY_SCH <dbl>,\n#   PROX_SHOPPING_MALL <dbl>, PROX_SUPERMARKET <dbl>, PROX_BUS_STOP <dbl>,\n#   NO_Of_UNITS <dbl>, FAMILY_FRIENDLY <dbl>, FREEHOLD <dbl>,\n#   LEASEHOLD_99YR <dbl>, geometry <POINT [m]>, and abbreviated variable names\n#   ¹​SELLING_PRICE, ²​AREA_SQM, ³​PROX_CBD, ⁴​PROX_CHILDCARE, ⁵​PROX_ELDERLYCARE,\n#   ⁶​PROX_URA_GROWTH_AREA, ⁷​PROX_HAWKER_MARKET, ⁸​PROX_KINDERGARTEN"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#eda-using-statistical-graphics",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#eda-using-statistical-graphics",
    "title": "In-class Exercise 8",
    "section": "3.1 EDA using statistical graphics",
    "text": "3.1 EDA using statistical graphics\nThe below code chunk plots the distribution of the selling price.\n\nggplot(data=condo_resale.sf, aes(x=`SELLING_PRICE`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\n\n\n\nThe figure above tells us that selling price is skewed right. This means that more condominiums are transacted at a relatively lower price.\nMoving on, we can normalised the skewed distribution using log transformation.\nBelow shows us deriving a new variable called “LOG_SELLING_PRICE” by using a log transformation on the variable “SELLING_PRICE“. It is performed using mutate() of dplyr package.\n\ncondo_resale.sf <- condo_resale.sf %>%\n  dplyr::mutate(`LOG_SELLING_PRICE` = log(SELLING_PRICE))\n\nWe will now plot the new column.\n\nggplot(data=condo_resale.sf, aes(x=`LOG_SELLING_PRICE`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\n\n\n\nThe distribution is definitely less skewed now."
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#multiple-histogram-plots-distribution-of-variables",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#multiple-histogram-plots-distribution-of-variables",
    "title": "In-class Exercise 8",
    "section": "3.2 Multiple Histogram Plots Distribution of Variables",
    "text": "3.2 Multiple Histogram Plots Distribution of Variables\nUsing ggarrange() of ggpubr package, we can draw multiple histograms.\n\nAREA_SQM <- ggplot(data=condo_resale.sf, aes(x= `AREA_SQM`)) + \n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nAGE <- ggplot(data=condo_resale.sf, aes(x= `AGE`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_CBD <- ggplot(data=condo_resale.sf, aes(x= `PROX_CBD`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_CHILDCARE <- ggplot(data=condo_resale.sf, aes(x= `PROX_CHILDCARE`)) + \n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_ELDERLYCARE <- ggplot(data=condo_resale.sf, aes(x= `PROX_ELDERLYCARE`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_URA_GROWTH_AREA <- ggplot(data=condo_resale.sf, \n                               aes(x= `PROX_URA_GROWTH_AREA`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_HAWKER_MARKET <- ggplot(data=condo_resale.sf, aes(x= `PROX_HAWKER_MARKET`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_KINDERGARTEN <- ggplot(data=condo_resale.sf, aes(x= `PROX_KINDERGARTEN`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_MRT <- ggplot(data=condo_resale.sf, aes(x= `PROX_MRT`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_PARK <- ggplot(data=condo_resale.sf, aes(x= `PROX_PARK`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_PRIMARY_SCH <- ggplot(data=condo_resale.sf, aes(x= `PROX_PRIMARY_SCH`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_TOP_PRIMARY_SCH <- ggplot(data=condo_resale.sf, \n                               aes(x= `PROX_TOP_PRIMARY_SCH`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nggpubr::ggarrange(AREA_SQM, AGE, PROX_CBD, PROX_CHILDCARE, PROX_ELDERLYCARE, \n          PROX_URA_GROWTH_AREA, PROX_HAWKER_MARKET, PROX_KINDERGARTEN, PROX_MRT,\n          PROX_PARK, PROX_PRIMARY_SCH, PROX_TOP_PRIMARY_SCH,  \n          ncol = 3, nrow = 4)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex09/In-class_Ex09.html",
    "href": "In-class_Ex/In-class_Ex09/In-class_Ex09.html",
    "title": "In-class Exercise 9",
    "section": "",
    "text": "Tip\n\n\n\nCreate a model folder under data so you can save all the modelling."
  },
  {
    "objectID": "In-class_Ex/In-class_Ex09/In-class_Ex09.html#retrieve-stored-data",
    "href": "In-class_Ex/In-class_Ex09/In-class_Ex09.html#retrieve-stored-data",
    "title": "In-class Exercise 9",
    "section": "2.1 Retrieve Stored Data",
    "text": "2.1 Retrieve Stored Data\n\ntrain_data <- read_rds(\"data/model/train_data.rds\")\ntest_data <- read_rds(\"data/model/test_data.rds\")"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex09/In-class_Ex09.html#gwr-predictive-method",
    "href": "In-class_Ex/In-class_Ex09/In-class_Ex09.html#gwr-predictive-method",
    "title": "In-class Exercise 9",
    "section": "3.1 GWR Predictive Method",
    "text": "3.1 GWR Predictive Method\n\ntraining_data_sp <- as_Spatial(train_data)\ntraining_data_sp\n\nclass       : SpatialPointsDataFrame \nfeatures    : 10335 \nextent      : 11597.31, 42623.63, 28217.39, 48741.06  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 17\nnames       : resale_price, floor_area_sqm, storey_order, remaining_lease_mths,          PROX_CBD,     PROX_ELDERLYCARE,        PROX_HAWKER,           PROX_MRT,          PROX_PARK,   PROX_GOOD_PRISCH,        PROX_MALL,            PROX_CHAS,     PROX_SUPERMARKET, WITHIN_350M_KINDERGARTEN, WITHIN_350M_CHILDCARE, ... \nmin values  :       218000,             74,            1,                  555, 0.999393538715878, 1.98943787433087e-08, 0.0333358643817954, 0.0220407324774434, 0.0441643212802781, 0.0652540365486641,                0, 6.20621206270077e-09, 1.21715176356525e-07,                        0,                     0, ... \nmax values  :      1186888,            133,           17,                 1164,  19.6500691667807,     3.30163731686804,   2.86763031236184,   2.13060636038504,   2.41313695915468,   10.6223726149914, 2.27100643784442,    0.808332738794272,     1.57131703651196,                        7,                    20, ..."
  },
  {
    "objectID": "In-class_Ex/In-class_Ex09/In-class_Ex09.html#preparing-coordinates",
    "href": "In-class_Ex/In-class_Ex09/In-class_Ex09.html#preparing-coordinates",
    "title": "In-class Exercise 9",
    "section": "3.2 Preparing Coordinates",
    "text": "3.2 Preparing Coordinates\n\n3.2.1 Extracting coordinates\nExtract x,y coordinates of the full, training and test datasets.\n\ncoords <- st_coordinates(mdata)\ncoords_train <- st_coordinates(train_data)\ncoords_test <- st_coordinates(test_data)\n\n\nwrite_rds(coords_train, \"data/model/coords_train.rds\")\nwrite_rds(coords_test, \"data/model/coords_test.rds\")\n\nFirstly, the geometry columns of the sf dataframe will be dropped using st_drop_geometry()\n\ntrain_data <- train_data %>% \n  st_drop_geometry()"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex09/In-class_Ex09.html#calibrating-random-forest",
    "href": "In-class_Ex/In-class_Ex09/In-class_Ex09.html#calibrating-random-forest",
    "title": "In-class Exercise 9",
    "section": "3.3 Calibrating Random Forest",
    "text": "3.3 Calibrating Random Forest\nPerform random forest regression using ranger package.\n\nset.seed(1234)\nrf <- ranger(resale_price ~ floor_area_sqm +\n                  storey_order + remaining_lease_mths +\n                  PROX_CBD + PROX_ELDERLYCARE + PROX_HAWKER +\n                  PROX_MRT + PROX_PARK + PROX_MALL +\n                  PROX_SUPERMARKET + WITHIN_350M_KINDERGARTEN +\n                  WITHIN_350M_CHILDCARE + WITHIN_350M_BUS +\n                  WITHIN_1KM_PRISCH,\n                data = train_data)\nrf # OOB prediction error (MSE) is not the same as Residual standard error as it has not been square-root\n\nRanger result\n\nCall:\n ranger(resale_price ~ floor_area_sqm + storey_order + remaining_lease_mths +      PROX_CBD + PROX_ELDERLYCARE + PROX_HAWKER + PROX_MRT + PROX_PARK +      PROX_MALL + PROX_SUPERMARKET + WITHIN_350M_KINDERGARTEN +      WITHIN_350M_CHILDCARE + WITHIN_350M_BUS + WITHIN_1KM_PRISCH,      data = train_data) \n\nType:                             Regression \nNumber of trees:                  500 \nSample size:                      10335 \nNumber of independent variables:  14 \nMtry:                             3 \nTarget node size:                 5 \nVariable importance mode:         none \nSplitrule:                        variance \nOOB prediction error (MSE):       728602496 \nR squared (OOB):                  0.9495728 \n\n\n\n\n\n\n\n\nFor the code chunk below…\n\n\n\nIt shouldn’t run longer than 10 minutes.\n\n\n\nset.seed(1234)\ngwRF_adaptive <- grf(formula = resale_price ~ floor_area_sqm +\n                  storey_order + remaining_lease_mths +\n                  PROX_CBD + PROX_ELDERLYCARE + PROX_HAWKER +\n                  PROX_MRT + PROX_PARK + PROX_MALL +\n                  PROX_SUPERMARKET + WITHIN_350M_KINDERGARTEN +\n                  WITHIN_350M_CHILDCARE + WITHIN_350M_BUS +\n                  WITHIN_1KM_PRISCH,\n                dframe = train_data, # if coords col not removed, the column data will be recognised as a list\n                bw = 55, # 55 nearest transactions\n                # use grf.bw() to calculate the suitable bandwidth\n                kernel = \"adaptive\", # if kernel diff, bw or bandwidth will also be diff\n                coords = coords_train)\ngwRF_adaptive \n\nThe top chunk of the report is for statistic and descriptive. Whereas the bottom chunk of the report is for predictive.\n\nwrite_rds(gwRF_adaptive, \"data/model/gwRF_adaptive.rds\")\n\n\n\n\n\n\n\nImportant\n\n\n\nType into the console “gwRF_adaptive $ Global_Model $ variable.importance” (without space) to get how important each variable is.\n\n\n\nvi_df <- as.data.frame(gwRF_adaptive$Global_Model$variable.importance)\n\n\n3.3.1 Predicting Test Data\n\n3.3.1.1 Prepare Test Data\nCombining the test data with its corresponding coordinates data.\n\ntest_data <- cbind(test_data, coords_test) %>% \n  st_drop_geometry()\n\n\n\n3.3.1.2 Predict Test Data\n\n# takes very long to run\ngwRF_pred <- predict.grf(gwf.adaptive,\n                    test_data,\n                    x.var.name = \"X\",\n                    y.var.name = \"Y\",\n                    local.w = 1,\n                    global.w = 0)\n\n\ngwRF_pred_df <- as.data.frame(gwRF_pred)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#drawing-statistical-point-map",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#drawing-statistical-point-map",
    "title": "In-class Exercise 8",
    "section": "3.3 Drawing Statistical Point Map",
    "text": "3.3 Drawing Statistical Point Map\nLastly, we want to reveal the geospatial distribution condominium resale prices in Singapore. The map will be prepared by using tmap package.\n\ntmap_mode(\"view\")\ntmap_options(check.and.fix = TRUE)\ntm_shape(mpsz_svy21)+\n  tm_polygons() +\ntm_shape(condo_resale.sf) +  \n  tm_dots(col = \"SELLING_PRICE\",\n          alpha = 0.6,\n          style=\"quantile\") +\n  tm_view(set.zoom.limits = c(11,14))\n\n\n\n\n\ntmap_mode(\"plot\")"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#simple-linear-regression-method",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#simple-linear-regression-method",
    "title": "In-class Exercise 8",
    "section": "4.1 Simple Linear Regression Method",
    "text": "4.1 Simple Linear Regression Method\nFirst, a simple linear regression model will be built by using SELLING_PRICE as the dependent variable and AREA_SQM as the independent variable.\n\ncondo.slr <- lm(formula=SELLING_PRICE ~ AREA_SQM, data = condo_resale.sf)\n\nlm() returns an object of class “lm” or for multiple responses of class c(“mlm”, “lm”).\nThe functions summary() and anova() can be used to obtain and print a summary and analysis of variance table of the results. The generic accessor functions coefficients, effects, fitted.values and residuals extract various useful features of the value returned by lm.\n\nsummary(condo.slr)\n\n\nCall:\nlm(formula = SELLING_PRICE ~ AREA_SQM, data = condo_resale.sf)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-3695815  -391764   -87517   258900 13503875 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept) -258121.1    63517.2  -4.064 5.09e-05 ***\nAREA_SQM      14719.0      428.1  34.381  < 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 942700 on 1434 degrees of freedom\nMultiple R-squared:  0.4518,    Adjusted R-squared:  0.4515 \nF-statistic:  1182 on 1 and 1434 DF,  p-value: < 2.2e-16\n\n\nThe output report reveals that the SELLING_PRICE can be explained by using the formula:\n  *y = -258121.1 + 14719x1*\n  \nThe R-squared of 0.4518 reveals that the simple regression model built is able to explain about 45% of the resale prices.\nSince p-value is much smaller than 0.0001, we will reject the null hypothesis that mean is a good estimator of SELLING_PRICE. This will allow us to infer that simple linear regression model above is a good estimator of SELLING_PRICE.\nThe Coefficients: section of the report reveals that the p-values of both the estimates of the Intercept and ARA_SQM are smaller than 0.001. In view of this, the null hypothesis of the B0 and B1 are equal to 0 will be rejected. As a results, we will be able to infer that the B0 and B1 are good parameter estimates.\nTo visualise the best fit curve on a scatterplot, lm() can be incorporated as a method function in ggplot’s geometry as shown in the code chunk below.\n\nggplot(data=condo_resale.sf,  \n       aes(x=`AREA_SQM`, y=`SELLING_PRICE`)) +\n  geom_point() +\n  geom_smooth(method = lm)\n\n\n\n\nFigure above reveals that there are a few statistical outliers with relatively high selling prices."
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#multiple-linear-regression-method",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#multiple-linear-regression-method",
    "title": "In-class Exercise 8",
    "section": "4.2 Multiple Linear Regression Method",
    "text": "4.2 Multiple Linear Regression Method\n\n4.2.1 Visualising the relationships of the independent variables\n\n\n\n\n\n\nWarning\n\n\n\nBefore building a multiple regression model, make sure that the independent variables used are not highly correlated to each other.\nIf these highly correlated independent variables are used in building a regression model by mistake, the quality of the model will be compromised. This phenomenon is known as multicollinearity in statistics.\n\n\nCorrelation matrix is commonly used to visualise the relationships between the independent variables.In this section, the corrplot package will be used. Beside the pairs() of R, there are many packages support the display of a correlation matrix.\nThe code chunk below is used to plot a scatterplot matrix of the relationship between the independent variables in condo_resale data.frame.\n\ncorrplot(cor(condo_resale[, 5:23]), diag = FALSE, order = \"AOE\",\n         tl.pos = \"td\", tl.cex = 0.5, method = \"number\", type = \"upper\")\n\n\n\n\nMatrix reorder is very important for mining the hidden structure and patter in the matrix.\nThere are four methods in corrplot (parameter order), named “AOE”, “FPC”, “hclust”, “alphabet”.\nIn the code chunk above, AOE order is used. It orders the variables by using the angular order of the eigenvectors method suggested by Michael Friendly.\nFrom the scatterplot matrix, it is clear that Freehold is highly correlated to LEASE_99YEAR. In view of this, it is wise to only include either one of them in the subsequent model building. As a result, LEASE_99YEAR is excluded in the subsequent model building."
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#building-hedonic-prici-ng-model-using-multiple-linear-regression-method",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#building-hedonic-prici-ng-model-using-multiple-linear-regression-method",
    "title": "In-class Exercise 8",
    "section": "4.3 Building Hedonic Prici ng Model using Multiple Linear Regression method",
    "text": "4.3 Building Hedonic Prici ng Model using Multiple Linear Regression method\nThe code chunk below using lm() to calibrate the multiple linear regression model.\n\ncondo.mlr <- lm(formula = SELLING_PRICE ~ AREA_SQM + AGE    + \n                  PROX_CBD + PROX_CHILDCARE + PROX_ELDERLYCARE +\n                  PROX_URA_GROWTH_AREA + PROX_HAWKER_MARKET + PROX_KINDERGARTEN + \n                  PROX_MRT  + PROX_PARK + PROX_PRIMARY_SCH + \n                  PROX_TOP_PRIMARY_SCH + PROX_SHOPPING_MALL + PROX_SUPERMARKET + \n                  PROX_BUS_STOP + NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n                data=condo_resale.sf)\nsummary(condo.mlr)\n\n\nCall:\nlm(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + PROX_CHILDCARE + \n    PROX_ELDERLYCARE + PROX_URA_GROWTH_AREA + PROX_HAWKER_MARKET + \n    PROX_KINDERGARTEN + PROX_MRT + PROX_PARK + PROX_PRIMARY_SCH + \n    PROX_TOP_PRIMARY_SCH + PROX_SHOPPING_MALL + PROX_SUPERMARKET + \n    PROX_BUS_STOP + NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n    data = condo_resale.sf)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-3475964  -293923   -23069   241043 12260381 \n\nCoefficients:\n                       Estimate Std. Error t value Pr(>|t|)    \n(Intercept)           481728.40  121441.01   3.967 7.65e-05 ***\nAREA_SQM               12708.32     369.59  34.385  < 2e-16 ***\nAGE                   -24440.82    2763.16  -8.845  < 2e-16 ***\nPROX_CBD              -78669.78    6768.97 -11.622  < 2e-16 ***\nPROX_CHILDCARE       -351617.91  109467.25  -3.212  0.00135 ** \nPROX_ELDERLYCARE      171029.42   42110.51   4.061 5.14e-05 ***\nPROX_URA_GROWTH_AREA   38474.53   12523.57   3.072  0.00217 ** \nPROX_HAWKER_MARKET     23746.10   29299.76   0.810  0.41782    \nPROX_KINDERGARTEN     147468.99   82668.87   1.784  0.07466 .  \nPROX_MRT             -314599.68   57947.44  -5.429 6.66e-08 ***\nPROX_PARK             563280.50   66551.68   8.464  < 2e-16 ***\nPROX_PRIMARY_SCH      180186.08   65237.95   2.762  0.00582 ** \nPROX_TOP_PRIMARY_SCH    2280.04   20410.43   0.112  0.91107    \nPROX_SHOPPING_MALL   -206604.06   42840.60  -4.823 1.57e-06 ***\nPROX_SUPERMARKET      -44991.80   77082.64  -0.584  0.55953    \nPROX_BUS_STOP         683121.35  138353.28   4.938 8.85e-07 ***\nNO_Of_UNITS             -231.18      89.03  -2.597  0.00951 ** \nFAMILY_FRIENDLY       140340.77   47020.55   2.985  0.00289 ** \nFREEHOLD              359913.01   49220.22   7.312 4.38e-13 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 755800 on 1417 degrees of freedom\nMultiple R-squared:  0.6518,    Adjusted R-squared:  0.6474 \nF-statistic: 147.4 on 18 and 1417 DF,  p-value: < 2.2e-16"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#preparing-publication-quality-table-olsrr-method",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#preparing-publication-quality-table-olsrr-method",
    "title": "In-class Exercise 8",
    "section": "4.4 Preparing Publication Quality Table: olsrr method",
    "text": "4.4 Preparing Publication Quality Table: olsrr method\nWith reference to the report above, it is clear that not all the independent variables are statistically significant. The model will be revised by removing those variables which are not statistically significant.\nNow, the revised model will be ready for calibration using the code chunk below.\n\ncondo.mlr1 <- lm(formula = SELLING_PRICE ~ AREA_SQM + AGE + \n                   PROX_CBD + PROX_CHILDCARE + PROX_ELDERLYCARE +\n                   PROX_URA_GROWTH_AREA + PROX_MRT  + PROX_PARK + \n                   PROX_PRIMARY_SCH + PROX_SHOPPING_MALL    + PROX_BUS_STOP + \n                   NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD,\n                 data=condo_resale.sf)\nols_regress(condo.mlr1)\n\n                             Model Summary                               \n------------------------------------------------------------------------\nR                       0.807       RMSE                     755957.289 \nR-Squared               0.651       Coef. Var                    43.168 \nAdj. R-Squared          0.647       MSE                571471422208.591 \nPred R-Squared          0.638       MAE                      414819.628 \n------------------------------------------------------------------------\n RMSE: Root Mean Square Error \n MSE: Mean Square Error \n MAE: Mean Absolute Error \n\n                                     ANOVA                                       \n--------------------------------------------------------------------------------\n                    Sum of                                                      \n                   Squares          DF         Mean Square       F         Sig. \n--------------------------------------------------------------------------------\nRegression    1.512586e+15          14        1.080418e+14    189.059    0.0000 \nResidual      8.120609e+14        1421    571471422208.591                      \nTotal         2.324647e+15        1435                                          \n--------------------------------------------------------------------------------\n\n                                               Parameter Estimates                                                \n-----------------------------------------------------------------------------------------------------------------\n               model           Beta    Std. Error    Std. Beta       t        Sig           lower          upper \n-----------------------------------------------------------------------------------------------------------------\n         (Intercept)     527633.222    108183.223                   4.877    0.000     315417.244     739849.200 \n            AREA_SQM      12777.523       367.479        0.584     34.771    0.000      12056.663      13498.382 \n                 AGE     -24687.739      2754.845       -0.167     -8.962    0.000     -30091.739     -19283.740 \n            PROX_CBD     -77131.323      5763.125       -0.263    -13.384    0.000     -88436.469     -65826.176 \n      PROX_CHILDCARE    -318472.751    107959.512       -0.084     -2.950    0.003    -530249.889    -106695.613 \n    PROX_ELDERLYCARE     185575.623     39901.864        0.090      4.651    0.000     107302.737     263848.510 \nPROX_URA_GROWTH_AREA      39163.254     11754.829        0.060      3.332    0.001      16104.571      62221.936 \n            PROX_MRT    -294745.107     56916.367       -0.112     -5.179    0.000    -406394.234    -183095.980 \n           PROX_PARK     570504.807     65507.029        0.150      8.709    0.000     442003.938     699005.677 \n    PROX_PRIMARY_SCH     159856.136     60234.599        0.062      2.654    0.008      41697.849     278014.424 \n  PROX_SHOPPING_MALL    -220947.251     36561.832       -0.115     -6.043    0.000    -292668.213    -149226.288 \n       PROX_BUS_STOP     682482.221    134513.243        0.134      5.074    0.000     418616.359     946348.082 \n         NO_Of_UNITS       -245.480        87.947       -0.053     -2.791    0.005       -418.000        -72.961 \n     FAMILY_FRIENDLY     146307.576     46893.021        0.057      3.120    0.002      54320.593     238294.560 \n            FREEHOLD     350599.812     48506.485        0.136      7.228    0.000     255447.802     445751.821 \n-----------------------------------------------------------------------------------------------------------------"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#preparing-publication-quality-table-gtsummary-method",
    "href": "In-class_Ex/In-class_Ex08/In-class_Ex08.html#preparing-publication-quality-table-gtsummary-method",
    "title": "In-class Exercise 8",
    "section": "4.5 Preparing Publication Quality Table: gtsummary method",
    "text": "4.5 Preparing Publication Quality Table: gtsummary method\nThe gtsummary package provides an elegant and flexible way to create publication-ready summary tables in R.\nIn the code chunk below, tbl_regression() is used to create a well formatted regression report.\n\ntbl_regression(condo.mlr1, intercept = TRUE)\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    (Intercept)\n527,633\n315,417, 739,849\n<0.001\n    AREA_SQM\n12,778\n12,057, 13,498\n<0.001\n    AGE\n-24,688\n-30,092, -19,284\n<0.001\n    PROX_CBD\n-77,131\n-88,436, -65,826\n<0.001\n    PROX_CHILDCARE\n-318,473\n-530,250, -106,696\n0.003\n    PROX_ELDERLYCARE\n185,576\n107,303, 263,849\n<0.001\n    PROX_URA_GROWTH_AREA\n39,163\n16,105, 62,222\n<0.001\n    PROX_MRT\n-294,745\n-406,394, -183,096\n<0.001\n    PROX_PARK\n570,505\n442,004, 699,006\n<0.001\n    PROX_PRIMARY_SCH\n159,856\n41,698, 278,014\n0.008\n    PROX_SHOPPING_MALL\n-220,947\n-292,668, -149,226\n<0.001\n    PROX_BUS_STOP\n682,482\n418,616, 946,348\n<0.001\n    NO_Of_UNITS\n-245\n-418, -73\n0.005\n    FAMILY_FRIENDLY\n146,308\n54,321, 238,295\n0.002\n    FREEHOLD\n350,600\n255,448, 445,752\n<0.001\n  \n  \n  \n    \n      1 CI = Confidence Interval\n    \n  \n\n\n\n\nWith gtsummary package, model statistics can be included in the report by either appending them to the report table by using add_glance_table() or adding as a table source note by using add_glance_source_note() as shown in the code chunk below.\n\ntbl_regression(condo.mlr1, \n               intercept = TRUE) %>% \n  add_glance_source_note(\n    label = list(sigma ~ \"\\U03C3\"),\n    include = c(r.squared, adj.r.squared, \n                AIC, statistic,\n                p.value, sigma))\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    (Intercept)\n527,633\n315,417, 739,849\n<0.001\n    AREA_SQM\n12,778\n12,057, 13,498\n<0.001\n    AGE\n-24,688\n-30,092, -19,284\n<0.001\n    PROX_CBD\n-77,131\n-88,436, -65,826\n<0.001\n    PROX_CHILDCARE\n-318,473\n-530,250, -106,696\n0.003\n    PROX_ELDERLYCARE\n185,576\n107,303, 263,849\n<0.001\n    PROX_URA_GROWTH_AREA\n39,163\n16,105, 62,222\n<0.001\n    PROX_MRT\n-294,745\n-406,394, -183,096\n<0.001\n    PROX_PARK\n570,505\n442,004, 699,006\n<0.001\n    PROX_PRIMARY_SCH\n159,856\n41,698, 278,014\n0.008\n    PROX_SHOPPING_MALL\n-220,947\n-292,668, -149,226\n<0.001\n    PROX_BUS_STOP\n682,482\n418,616, 946,348\n<0.001\n    NO_Of_UNITS\n-245\n-418, -73\n0.005\n    FAMILY_FRIENDLY\n146,308\n54,321, 238,295\n0.002\n    FREEHOLD\n350,600\n255,448, 445,752\n<0.001\n  \n  \n    \n      R² = 0.651; Adjusted R² = 0.647; AIC = 42,967; Statistic = 189; p-value = <0.001; σ = 755,957\n    \n  \n  \n    \n      1 CI = Confidence Interval\n    \n  \n\n\n\n\n\n4.5.1 Checking for Multicolinearity\nIn this section, a fantastic R package specially programmed for performing OLS regression can be used. It is called olsrr. It provides a collection of very useful methods for building better multiple linear regression models:\n\ncomprehensive regression output\nresidual diagnostics\nmeasures of influence\nheteroskedasticity tests\ncollinearity diagnostics\nmodel fit assessment\nvariable contribution assessment\nvariable selection procedures\n\nIn the code chunk below, the ols_vif_tol() of olsrr package is used to test if there are sign of multicollinearity.\n\nols_vif_tol(condo.mlr1)\n\n              Variables Tolerance      VIF\n1              AREA_SQM 0.8728554 1.145665\n2                   AGE 0.7071275 1.414172\n3              PROX_CBD 0.6356147 1.573280\n4        PROX_CHILDCARE 0.3066019 3.261559\n5      PROX_ELDERLYCARE 0.6598479 1.515501\n6  PROX_URA_GROWTH_AREA 0.7510311 1.331503\n7              PROX_MRT 0.5236090 1.909822\n8             PROX_PARK 0.8279261 1.207837\n9      PROX_PRIMARY_SCH 0.4524628 2.210126\n10   PROX_SHOPPING_MALL 0.6738795 1.483945\n11        PROX_BUS_STOP 0.3514118 2.845664\n12          NO_Of_UNITS 0.6901036 1.449058\n13      FAMILY_FRIENDLY 0.7244157 1.380423\n14             FREEHOLD 0.6931163 1.442759\n\n\nSince the VIF of the independent variables are less than 10, it can safely conclude that there are no sign of multicollinearity among the independent variables.\n\n\n4.5.2 Test for Non-Linearity\nIn multiple linear regression, it is important to test the assumption that linearity and additivity of the relationship between dependent and independent variables.\nIn the code chunk below, the ols_plot_resid_fit() of olsrr package is used to perform linearity assumption test.\n\nols_plot_resid_fit(condo.mlr1)\n\n\n\n\nThe figure above reveals that most of the data poitns are scattered around the 0 line, hence we can safely conclude that the relationships between the dependent variable and independent variables are linear.\n\n4.5.2.1 13.8.5.3 Test for Normality Assumption\nLastly, the code chunk below uses ols_plot_resid_hist() of olsrr package to perform normality assumption test."
  },
  {
    "objectID": "In-class_Ex/In-class_Ex09/data/geospatial/MPSZ-2019.html",
    "href": "In-class_Ex/In-class_Ex09/data/geospatial/MPSZ-2019.html",
    "title": "Ailys' IS415 Journey",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     dataset\n\n\n        0 0     false"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html",
    "title": "Take-home Exercise 3",
    "section": "",
    "text": "pacman::p_load(sf, tmap, sfdep, tidyverse, olsrr, ggpubr, GWmodel, SpatialML, tidymodels, jsonlite) \n# either import tidymodels or rsample"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#import-hdb-resale-flat-prices",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#import-hdb-resale-flat-prices",
    "title": "Take-home Exercise 3",
    "section": "3.1 Import HDB Resale Flat Prices",
    "text": "3.1 Import HDB Resale Flat Prices\n\nCodeData\n\n\n\nresale_prices <- read_csv(\"data/aspatial/resale-flat-prices-based-on-registration-date-from-jan-2017-onwards.csv\")\n\n\n\n\nhead(resale_prices, 5)\n\n# A tibble: 5 × 11\n  month   town     flat_…¹ block stree…² store…³ floor…⁴ flat_…⁵ lease…⁶ remai…⁷\n  <chr>   <chr>    <chr>   <chr> <chr>   <chr>     <dbl> <chr>     <dbl> <chr>  \n1 2017-01 ANG MO … 2 ROOM  406   ANG MO… 10 TO …      44 Improv…    1979 61 yea…\n2 2017-01 ANG MO … 3 ROOM  108   ANG MO… 01 TO …      67 New Ge…    1978 60 yea…\n3 2017-01 ANG MO … 3 ROOM  602   ANG MO… 01 TO …      67 New Ge…    1980 62 yea…\n4 2017-01 ANG MO … 3 ROOM  465   ANG MO… 04 TO …      68 New Ge…    1980 62 yea…\n5 2017-01 ANG MO … 3 ROOM  601   ANG MO… 01 TO …      67 New Ge…    1980 62 yea…\n# … with 1 more variable: resale_price <dbl>, and abbreviated variable names\n#   ¹​flat_type, ²​street_name, ³​storey_range, ⁴​floor_area_sqm, ⁵​flat_model,\n#   ⁶​lease_commence_date, ⁷​remaining_lease\n\n\n\n\n\n\n3.1.0.1 Convert “Month” to DataTime Format\nAs we want to have the abilities to filter the data according to its dates, it’s best for us to convert the date column to a DateTime format.\n\nCodeData\n\n\n\nresale_prices$date <- zoo::as.Date(zoo::as.yearmon(resale_prices$month))\n\n\n\n\nhead(resale_prices$date, 5)\n\n[1] \"2017-01-01\" \"2017-01-01\" \"2017-01-01\" \"2017-01-01\" \"2017-01-01\"\n\n\n\n\n\n\n3.1.0.1.1 Data - Filter Jan 2021 to Feb 2023\nHere, we will filter the data so we will only be working with those from January 2021 to February 2023.\n\nCodeData\n\n\n\nresale_prices_total <- resale_prices %>% filter(date >= as.Date('2021-01-01')) %>% filter(date <= as.Date('2023-02-01'))\n\n\n\n\nhead(resale_prices_total, 5)\n\n# A tibble: 5 × 12\n  month   town     flat_…¹ block stree…² store…³ floor…⁴ flat_…⁵ lease…⁶ remai…⁷\n  <chr>   <chr>    <chr>   <chr> <chr>   <chr>     <dbl> <chr>     <dbl> <chr>  \n1 2021-01 ANG MO … 2 ROOM  170   ANG MO… 01 TO …      45 Improv…    1986 64 yea…\n2 2021-01 ANG MO … 2 ROOM  170   ANG MO… 07 TO …      45 Improv…    1986 64 yea…\n3 2021-01 ANG MO … 3 ROOM  331   ANG MO… 04 TO …      68 New Ge…    1981 59 yea…\n4 2021-01 ANG MO … 3 ROOM  534   ANG MO… 04 TO …      68 New Ge…    1980 58 yea…\n5 2021-01 ANG MO … 3 ROOM  561   ANG MO… 01 TO …      68 New Ge…    1980 58 yea…\n# … with 2 more variables: resale_price <dbl>, date <date>, and abbreviated\n#   variable names ¹​flat_type, ²​street_name, ³​storey_range, ⁴​floor_area_sqm,\n#   ⁵​flat_model, ⁶​lease_commence_date, ⁷​remaining_lease"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#import-independent-variables",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#import-independent-variables",
    "title": "Take-home Exercise 3",
    "section": "3.3 Import Independent Variables",
    "text": "3.3 Import Independent Variables\nWith any creation of a predictive model, comes the independent variables that the predictions will rely on.\n\n3.3.1 Geospatial Datasets\nSince this project is pertain to Singapore, OpenMapSG will be helpful for us to get these geospatial datasets with ease.\nAs you can see below, we will be using a package called onemapsgapi that wraps OpenMapSG API.\nUsing it is relatively simple:\n\nOne will need to register an account with OpenMapSG\nGet a token using get_token()\nSearch for datasets they want in search_themes()\nOptionally, look up on the status on desired dataset through get_theme_status()\nAnd finally get your data from get_theme()!\n\n\nlibrary(onemapsgapi)\ntoken <- get_token(\"Your Email\", \"Your Password\")\nsearch_themes(token, \"searchval\")\nget_theme_status(token, \"themename\")\nthemetibble <- get_theme(token, \"themename\")\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nI will have already performed the above steps to acquire my datasets. In our case, I will directly read the geospatial data I have downloaded using st_read().\n\n\n\nHawker CentresEldercare CentresParksKindergartensChildcare CentresBus StopMRT StationsSupermarkets\n\n\n\n\n\n\nhawkercentre_sf <- st_read(dsn=\"data/geospatial/hawkercentre\", layer=\"hawkercentre\") %>% st_transform(crs = 3414)\n\nReading layer `hawkercentre' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\hawkercentre' \n  using driver `ESRI Shapefile'\nSimple feature collection with 125 features and 18 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 103.6974 ymin: 1.272716 xmax: 103.9882 ymax: 1.449017\nGeodetic CRS:  WGS 84\n\n\n\n\n\n\n\n\neldercare_sf <- st_read(dsn=\"data/geospatial/eldercare\", layer=\"eldercare\") %>% st_transform(crs = 3414)\n\nReading layer `eldercare' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\eldercare' \n  using driver `ESRI Shapefile'\nSimple feature collection with 133 features and 4 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 103.7119 ymin: 1.271472 xmax: 103.9561 ymax: 1.439561\nGeodetic CRS:  WGS 84\n\n\n\n\n\n\n\n\nparks_sf <- st_read(dsn=\"data/geospatial/nationalparks\", layer=\"nationalparks\") %>% st_transform(crs = 3414)\n\nReading layer `nationalparks' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\nationalparks' \n  using driver `ESRI Shapefile'\nSimple feature collection with 421 features and 2 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 103.6929 ymin: 1.214491 xmax: 104.0538 ymax: 1.462094\nGeodetic CRS:  WGS 84\n\n\n\n\n\n\n\n\nkindergartens_sf <- st_read(dsn=\"data/geospatial/kindergartens\", layer=\"kindergartens\") %>% st_transform(crs = 3414)\n\nReading layer `kindergartens' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\kindergartens' \n  using driver `ESRI Shapefile'\nSimple feature collection with 448 features and 5 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 103.6887 ymin: 1.247759 xmax: 103.9717 ymax: 1.455452\nGeodetic CRS:  WGS 84\n\n\n\n\n\n\n\n\nchildcare_sf <- st_read(dsn=\"data/geospatial/childcare\", layer=\"childcare\") %>% st_transform(crs = 3414)\n\nReading layer `childcare' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\childcare' \n  using driver `ESRI Shapefile'\nSimple feature collection with 1925 features and 5 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 103.6878 ymin: 1.247759 xmax: 103.9897 ymax: 1.462134\nGeodetic CRS:  WGS 84\n\n\n\n\n\nbusstop_sf <- st_read(dsn=\"data/geospatial/BusStop_Feb2023\", layer=\"BusStop\") %>% st_transform(crs = 3414)\n\nReading layer `BusStop' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\BusStop_Feb2023' \n  using driver `ESRI Shapefile'\nSimple feature collection with 5159 features and 3 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 3970.122 ymin: 26482.1 xmax: 48284.56 ymax: 52983.82\nProjected CRS: SVY21\n\n\n\n\n\nmrt_sf <- st_read(dsn=\"data/geospatial/TrainStation_Feb2023\", layer=\"RapidTransitSystemStation\") %>% st_transform(crs = 3414)\n\nReading layer `RapidTransitSystemStation' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\TrainStation_Feb2023' \n  using driver `ESRI Shapefile'\nSimple feature collection with 220 features and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 6068.209 ymin: 27478.44 xmax: 45377.5 ymax: 47913.58\nProjected CRS: SVY21\n\n\n\n\n\nsupermarkets_sf <- st_read(dsn=\"data/geospatial/supermarkets\", layer=\"SUPERMARKETS\") %>% st_transform(crs = 3414)\n\nReading layer `SUPERMARKETS' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\supermarkets' \n  using driver `ESRI Shapefile'\nSimple feature collection with 526 features and 8 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 4901.188 ymin: 25529.08 xmax: 46948.22 ymax: 49233.6\nProjected CRS: SVY21\n\n\n\n\n\n\n\n3.3.2 Aspatial Data\n\nPrimary SchoolsMallsHDB Upgrades\n\n\n\nprimarySch <- fromJSON(\"data/geospatial/primaryschools/primaryschools.json\")[[\"SearchResults\"]][-1,c(2:5, 7, 13:14)]\nprimarySch_sf <- st_as_sf(primarySch, coords=c(\"LONGITUDE\", \"LATITUDE\"), crs=4326) %>% st_transform(crs = 3414)\n\n\n\n\nmalls <- read_xlsx(\"data/aspatial/malls-20230320.xlsx\")\n\n\n\n\nhdb_upgrades <- read_xlsx(\"data/aspatial/HDB_HIP-MUP-20230312.xlsx\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#mann-kendall-test",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#mann-kendall-test",
    "title": "Take-home Exercise 2",
    "section": "7.3 Mann-Kendall Test",
    "text": "7.3 Mann-Kendall Test\nFinally, we will be conducting the Mann-Kendall test to determine the trend of vaccination rates of a village and if they are significant.\n\n7.3.1 All Kelurahan\nWe will first examine the overall region.\n\n7.3.1.1 Emerging Hotspot Analysis\nWe want to observe here whether is temporal trend associated with vaccination rates or are vaccination rates purely situated in the spatial context through emerging_hotspot_analysis().\n\nehsa <- emerging_hotspot_analysis(\n  x = jakarta_st, \n  .var = \"vaccination rate\", \n  k = 1, \n  nsim = 99\n)\n\n\n\n7.3.1.2 Visualisation\n\n7.3.1.2.1 Distribution of EHSA Classes\nThe chart below shows an interesting hot and cold spots analysis. The highest bar is oscilating hotspots. It is defined by its wavering cluster as it has been also a significant cold spot, even though it’s a hot spot at the end of observing time period. This might be referring to much of the south and east Jakarta, where it’s has been only cold spots at the start.\nThe second highest being sporadic coldspots, where the areas have been on-again and off-again cold spot. These regions may be those villages in the central part of the maps, which has been sidelined by the drastic difference in vaccination rates between the areas further coastal and further inland throughout our examination. This is\nThe overall chart shows how much the villages have changed in vaccination rates across the months that little selurahan have remained hot or cold spots throughout..\n\nggplot(data = ehsa,\n       aes(x = classification)) +\n  geom_bar()\n\n\n\n\n\n\n7.3.1.2.2 EHSA\nJoining the EHSA data with the boundaries so we can view the trends in a map.\n\njakarta_ehsa <- jakarta_boundary %>%\n  left_join(ehsa,\n            by = c(\"KODE KELURAHAN\" = \"location\"))\nhead(jakarta_ehsa, 5)\n\nSimple feature collection with 5 features and 12 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 106.8105 ymin: -6.17575 xmax: 106.8711 ymax: -6.141043\nGeodetic CRS:  WGS 84\n  OBJECT_ID KODE KELURAHAN          DESA   KODE    PROVINSI      KAB_KOTA\n1     25477     3173031006     KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT\n2     25478     3173031007        GLODOK 317303 DKI JAKARTA JAKARTA BARAT\n3     25397     3171031003 HARAPAN MULIA 317103 DKI JAKARTA JAKARTA PUSAT\n4     25400     3171031006  CEMPAKA BARU 317103 DKI JAKARTA JAKARTA PUSAT\n5     25390     3171021001    PASAR BARU 317102 DKI JAKARTA JAKARTA PUSAT\n    KECAMATAN    DESA_KELUR JUMLAH_PEN        tau    p_value\n1  TAMAN SARI     KEAGUNGAN      21609 0.21212119 0.37269139\n2  TAMAN SARI        GLODOK       9069 0.51515144 0.02364218\n3   KEMAYORAN HARAPAN MULIA      29085 0.24242422 0.30367327\n4   KEMAYORAN  CEMPAKA BARU      41913 0.27272725 0.24372220\n5 SAWAH BESAR    PASAR BARU      15793 0.06060605 0.83701146\n       classification                       geometry\n1 no pattern detected MULTIPOLYGON (((106.8164 -6...\n2   sporadic coldspot MULTIPOLYGON (((106.8148 -6...\n3 no pattern detected MULTIPOLYGON (((106.8576 -6...\n4   sporadic coldspot MULTIPOLYGON (((106.8631 -6...\n5 no pattern detected MULTIPOLYGON (((106.8369 -6...\n\n\n\nehsa_sig <- jakarta_ehsa  %>%\n  filter(p_value < 0.05)\ntmap_mode(\"view\")\ntm_shape(jakarta_ehsa) +\n  tm_polygons(id=\"DESA\") +\n  tm_borders(alpha = 0.5) +\ntm_shape(ehsa_sig) +\n  tm_fill(\"classification\", id=\"DESA\") + \n  tm_borders(alpha = 0.4) +\n  tm_view(set.zoom.limits = c(8,15),\n          set.view = 11) \n\n\n\n\n\n\nUnlike as expected, oscilating hotspots are more evenly distributed than first thought of as they are not concentrated in any particular region. However clearly, the south and north regions are less dominated by oscilating hotspots, with especially the south having more sporadic coldspots than others.\n\n\n\n\n7.3.2 Kelurahan\nWe will now more closely examine 3 kelurahan and understand the trends behind them.\n\n7.3.2.1 Pluit\nPluit is located in north Jakarta, along the coast. This is a village which had higher vaccination rate but slowly overtook by others as the programme expanded..\n\npluit <- gi_stars %>% \n  ungroup() %>% \n  filter(`KELURAHAN` == \"PLUIT\") |> \n  select(`KELURAHAN`, `Date`, gi_star)\n\n\nggplot(data = pluit, \n       aes(x = `Date`, \n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\n\n\n\nThis is quite reflected in this chart, where its Gi* values have a downward trend.\n\npluit %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>% \n  tidyr::unnest_wider(mk)\n\n# A tibble: 1 × 5\n     tau     sl     S     D  varS\n   <dbl>  <dbl> <dbl> <dbl> <dbl>\n1 -0.576 0.0112   -38  66.0  213.\n\n\nThe p-value or sl then indicates that this is a significant trend, implying that time indeed plays a role in influencing the village’s vaccination rates.\n\n\n7.3.2.2 Melawai\nMelawai is a spordiac coldspot, locating in south Jakarta.\n\nmelawai <- gi_stars %>% \n  ungroup() %>% \n  filter(`KELURAHAN` == \"MELAWAI\") |> \n  select(`KELURAHAN`, `Date`, gi_star)\n\n\nggplot(data = melawai, \n       aes(x = `Date`, \n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\n\n\n\nIt, like Pluit, has a overall downward trend but it has a spike in October 2021 before continuing downwards.\n\nmelawai %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>% \n  tidyr::unnest_wider(mk)\n\n# A tibble: 1 × 5\n     tau        sl     S     D  varS\n   <dbl>     <dbl> <dbl> <dbl> <dbl>\n1 -0.909 0.0000521   -60  66.0  213.\n\n\nIt too has a p-value lower than 0.05, suggesting the downward trend is significant.\n\n\n7.3.2.3 Srengseng Sawah\nSrengseng Sawah is a village we have mentioned in the Observations of cholorpleth maps.\n\nsrengseng_sawah <- gi_stars %>% \n  ungroup() %>% \n  filter(`KELURAHAN` == \"SRENGSENG SAWAH\") |> \n  select(`KELURAHAN`, `Date`, gi_star)\n\n\nggplot(data = srengseng_sawah, \n       aes(x = `Date`, \n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\n\n\n\nUnlike the two villages above, there is actually an increase trend.\n\nsrengseng_sawah %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>% \n  tidyr::unnest_wider(mk)\n\n# A tibble: 1 × 5\n    tau     sl     S     D  varS\n  <dbl>  <dbl> <dbl> <dbl> <dbl>\n1 0.545 0.0164    36  66.0  213.\n\n\nThe low p-value also shows that the trend is significant.\n\n\n\n7.3.3 Overall\nThe trends in majority of the villages are significant, regardless of their directions.\n\nehsa <- gi_stars %>%\n  group_by(`KELURAHAN`) %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>%\n  tidyr::unnest_wider(mk)\nnrow(ehsa[ehsa$sl < 0.05,])\n\n[1] 179\n\nnrow(ehsa[ehsa$sl >= 0.05,])\n\n[1] 82"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html",
    "title": "In-class Exercise 10",
    "section": "",
    "text": "Tip\n\n\n\nOD_Matrix: dont use road network (takes too long) - osmr - r packages to use the same thing\nSpatialAcc packages for accessibility models (assumes that row is origin, column is destination)\nFCA packages for accessibility models (assumes that column is origin, row is destination)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#import-datasets",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#import-datasets",
    "title": "In-class Exercise 10",
    "section": "2.1 Import Datasets",
    "text": "2.1 Import Datasets\n\nmpsz <- st_read(dsn = \"data/geospatial\", layer = \"MP14_SUBZONE_NO_SEA_PL\")\n\nReading layer `MP14_SUBZONE_NO_SEA_PL' from data source \n  `C:\\deadline2359\\IS415-GAA\\In-class_Ex\\In-class_Ex10\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\n\n\nhexagons <- st_read(dsn = \"data/geospatial\", layer = \"hexagons\") \n\nReading layer `hexagons' from data source \n  `C:\\deadline2359\\IS415-GAA\\In-class_Ex\\In-class_Ex10\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 3125 features and 6 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 21506.33 xmax: 50010.26 ymax: 50256.33\nProjected CRS: SVY21 / Singapore TM\n\n\n\neldercare <- st_read(dsn = \"data/geospatial\", layer = \"ELDERCARE\") \n\nReading layer `ELDERCARE' from data source \n  `C:\\deadline2359\\IS415-GAA\\In-class_Ex\\In-class_Ex10\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 120 features and 19 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 14481.92 ymin: 28218.43 xmax: 41665.14 ymax: 46804.9\nProjected CRS: SVY21 / Singapore TM"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#update-crs-information",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#update-crs-information",
    "title": "In-class Exercise 10",
    "section": "2.2 Update CRS Information",
    "text": "2.2 Update CRS Information\n\nmpsz <- st_transform(mpsz, 3414)\neldercare <- st_transform(eldercare, 3414)\nhexagons <- st_transform(hexagons, 3414)\n\n\nst_crs(mpsz)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/data/geospatial/ELDERCARE.html",
    "href": "In-class_Ex/In-class_Ex10/data/geospatial/ELDERCARE.html",
    "title": "Ailys' IS415 Journey",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>  ELDERCARE  ENG dataset\n\nELDERCARE\n\n                 0 0     false"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/data/geospatial/hexagons.html",
    "href": "In-class_Ex/In-class_Ex10/data/geospatial/hexagons.html",
    "title": "Ailys' IS415 Journey",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     dataset\n\n\n                 0 0     false"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#cleaning",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#cleaning",
    "title": "In-class Exercise 10",
    "section": "2.3 Cleaning",
    "text": "2.3 Cleaning\n\neldercare <- eldercare %>%\n  select(fid, ADDRESSPOS) %>%\n  rename(destination_id = fid,\n         postal_code = ADDRESSPOS) %>% \n  mutate(capacity = 100)\n\n\nhexagons <- hexagons %>%\n  select(fid) %>%\n  rename(origin_id = fid) %>% \n  mutate(demand = 100)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#visualising-hansens-accessibility",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#visualising-hansens-accessibility",
    "title": "In-class Exercise 10",
    "section": "5.2 Visualising Hansen’s accessibility",
    "text": "5.2 Visualising Hansen’s accessibility\n\n5.2.1 Extracting map extend\nRetrieve the extend of the map area\n\nmapex <- st_bbox(hexagons)\n\nThen use for mapping purposes.\n\ntmap_mode(\"plot\")\ntm_shape(hexagon_Hansen,\n         bbox = mapex) + \n  tm_fill(col = \"accHansen\",\n          n = 10,\n          style = \"quantile\",\n          border.col = \"black\",\n          border.lwd = 1) +\ntm_shape(eldercare) +\n  tm_symbols(size = 0.1) +\n  tm_layout(main.title = \"Accessibility to eldercare: Hansen method\",\n            main.title.position = \"center\",\n            main.title.size = 2,\n            legend.outside = FALSE,\n            legend.height = 0.45, \n            legend.width = 3.0,\n            legend.format = list(digits = 6),\n            legend.position = c(\"right\", \"top\"),\n            frame = TRUE) +\n  tm_compass(type=\"8star\", size = 2) +\n  tm_scale_bar(width = 0.15) +\n  tm_grid(lwd = 0.1, alpha = 0.5)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#statistical-graphic-visualisation",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#statistical-graphic-visualisation",
    "title": "In-class Exercise 10",
    "section": "5.3 Statistical graphic visualisation",
    "text": "5.3 Statistical graphic visualisation\n\nhexagon_Hansen <- st_join(hexagon_Hansen, mpsz, \n                          join = st_intersects)\n\n\nggplot(data=hexagon_Hansen, \n       aes(y = log(accHansen), \n           x= REGION_N)) +\n  geom_boxplot() +\n  geom_point(stat=\"summary\", \n             fun.y=\"mean\", \n             colour =\"red\", \n             size=2)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#computing-kd2sfcas-accessibility",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#computing-kd2sfcas-accessibility",
    "title": "In-class Exercise 10",
    "section": "6.1 Computing KD2SFCA’s accessibility",
    "text": "6.1 Computing KD2SFCA’s accessibility\n\nacc_KD2SFCA <- data.frame(ac(hexagons$demand,\n                            eldercare$capacity,\n                            distmat_km, \n                            d0 = 50,\n                            power = 2, \n                            family = \"KD2SFCA\"))\n\ncolnames(acc_KD2SFCA) <- \"accKD2SFCA\"\nacc_KD2SFCA <- tbl_df(acc_KD2SFCA)\nhexagon_KD2SFCA <- bind_cols(hexagons, acc_KD2SFCA)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#visualising-kd2sfcas-accessibility",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#visualising-kd2sfcas-accessibility",
    "title": "In-class Exercise 10",
    "section": "6.2 Visualising KD2SFCA’s accessibility",
    "text": "6.2 Visualising KD2SFCA’s accessibility\n\ntmap_mode(\"plot\")\ntm_shape(hexagon_KD2SFCA,\n         bbox = mapex) + \n  tm_fill(col = \"accKD2SFCA\",\n          n = 10,\n          style = \"quantile\",\n          border.col = \"black\",\n          border.lwd = 1) +\ntm_shape(eldercare) +\n  tm_symbols(size = 0.1) +\n  tm_layout(main.title = \"Accessibility to eldercare: KD2SFCA method\",\n            main.title.position = \"center\",\n            main.title.size = 2,\n            legend.outside = FALSE,\n            legend.height = 0.45, \n            legend.width = 3.0,\n            legend.format = list(digits = 6),\n            legend.position = c(\"right\", \"top\"),\n            frame = TRUE) +\n  tm_compass(type=\"8star\", size = 2) +\n  tm_scale_bar(width = 0.15) +\n  tm_grid(lwd = 0.1, alpha = 0.5)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#statistical-graphic-visualisation-1",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#statistical-graphic-visualisation-1",
    "title": "In-class Exercise 10",
    "section": "6.3 Statistical graphic visualisation",
    "text": "6.3 Statistical graphic visualisation\n\nhexagon_KD2SFCA <- st_join(hexagon_KD2SFCA, mpsz, \n                          join = st_intersects)\n\n\nggplot(data=hexagon_KD2SFCA, \n       aes(y = accKD2SFCA, \n           x= REGION_N)) +\n  geom_boxplot() +\n  geom_point(stat=\"summary\", \n             fun.y=\"mean\", \n             colour =\"red\", \n             size=2)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#computing-sam-accessibility",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#computing-sam-accessibility",
    "title": "In-class Exercise 10",
    "section": "7.1 Computing SAM accessibility",
    "text": "7.1 Computing SAM accessibility\n\nacc_SAM <- data.frame(ac(hexagons$demand,\n                         eldercare$capacity,\n                         distmat_km, \n                         d0 = 50,\n                         power = 2, \n                         family = \"SAM\"))\n\ncolnames(acc_SAM) <- \"accSAM\"\nacc_SAM <- tbl_df(acc_SAM)\nhexagon_SAM <- bind_cols(hexagons, acc_SAM)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#visualising-sams-accessibility",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#visualising-sams-accessibility",
    "title": "In-class Exercise 10",
    "section": "7.2 Visualising SAM’s accessibility",
    "text": "7.2 Visualising SAM’s accessibility\n\ntmap_mode(\"plot\")\ntm_shape(hexagon_SAM,\n         bbox = mapex) + \n  tm_fill(col = \"accSAM\",\n          n = 10,\n          style = \"quantile\",\n          border.col = \"black\",\n          border.lwd = 1) +\ntm_shape(eldercare) +\n  tm_symbols(size = 0.1) +\n  tm_layout(main.title = \"Accessibility to eldercare: SAM method\",\n            main.title.position = \"center\",\n            main.title.size = 2,\n            legend.outside = FALSE,\n            legend.height = 0.45, \n            legend.width = 3.0,\n            legend.format = list(digits = 3),\n            legend.position = c(\"right\", \"top\"),\n            frame = TRUE) +\n  tm_compass(type=\"8star\", size = 2) +\n  tm_scale_bar(width = 0.15) +\n  tm_grid(lwd = 0.1, alpha = 0.5)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#statistical-graphic-visualisation-2",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#statistical-graphic-visualisation-2",
    "title": "In-class Exercise 10",
    "section": "7.3 Statistical graphic visualisation",
    "text": "7.3 Statistical graphic visualisation\n\nhexagon_SAM <- st_join(hexagon_SAM, mpsz, \n                       join = st_intersects)\n\n\nggplot(data=hexagon_SAM, \n       aes(y = accSAM, \n           x= REGION_N)) +\n  geom_boxplot() +\n  geom_point(stat=\"summary\", \n             fun.y=\"mean\", \n             colour =\"red\", \n             size=2)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#computing-distance-matrix-1",
    "href": "In-class_Ex/In-class_Ex10/In-class_Ex10.html#computing-distance-matrix-1",
    "title": "In-class Exercise 10",
    "section": "5.1 Computing Distance Matrix",
    "text": "5.1 Computing Distance Matrix\n\neldercare_coord <- st_coordinates(eldercare)\nhexagon_coord <- st_coordinates(hexagons)\n\nEucMatrix <- SpatialAcc::distance(hexagon_coord,\n                                  eldercare_coord,\n                                  type = \"euclidean\")\n\n\nEucMatrix_km <- as.matrix(EucMatrix/1000)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#hawker-centre",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#hawker-centre",
    "title": "Take-home Exercise 3",
    "section": "3.1 Hawker Centre",
    "text": "3.1 Hawker Centre\n\nst_crs(hawkercentre_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\n\nhawkercentre_sf <- st_set_crs(hawkercentre_sf, 3414)\nst_crs(hawkercentre_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#eldercare-centres-1",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#eldercare-centres-1",
    "title": "Take-home Exercise 3",
    "section": "3.2 Eldercare Centres",
    "text": "3.2 Eldercare Centres\n\nst_crs(eldercare_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\n\neldercare_sf <- st_set_crs(eldercare_sf, 3414)\nst_crs(eldercare_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#eldercare-centres-2",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#eldercare-centres-2",
    "title": "Take-home Exercise 3",
    "section": "3.3 Eldercare Centres",
    "text": "3.3 Eldercare Centres\n\nst_crs(nationalparks_sf)\n\nCoordinate Reference System:\n  User input: WGS 84 \n  wkt:\nGEOGCRS[\"WGS 84\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"latitude\",north,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"longitude\",east,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    ID[\"EPSG\",4326]]\n\n\neldercare_sf <- st_set_crs(eldercare_sf, 3414) st_crs(eldercare_sf)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#parks-1",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#parks-1",
    "title": "Take-home Exercise 3",
    "section": "3.3 Parks",
    "text": "3.3 Parks\n\nst_crs(parks_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\n\nparks_sf <- st_set_crs(parks_sf, 3414)\nst_crs(parks_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#kindergarten-1",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#kindergarten-1",
    "title": "Take-home Exercise 3",
    "section": "3.4 Kindergarten",
    "text": "3.4 Kindergarten\n\nst_crs(kindergartens_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\n\nparks_sf <- st_set_crs(kindergartens_sf, 3414)\nst_crs(kindergartens_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#mpsz",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#mpsz",
    "title": "Take-home Exercise 3",
    "section": "4.1 MPSZ",
    "text": "4.1 MPSZ\n\nlength(which(st_is_valid(subzone_sf) == FALSE))\n\n[1] 6\n\n\n\nsubzone_sf <- st_make_valid(subzone_sf)\nlength(which(st_is_valid(subzone_sf) == FALSE))\n\n[1] 0"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#statistical-graphics",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#statistical-graphics",
    "title": "Take-home Exercise 3",
    "section": "7.1 Statistical Graphics",
    "text": "7.1 Statistical Graphics"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#import-subzone-data",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#import-subzone-data",
    "title": "Take-home Exercise 3",
    "section": "3.2 Import Subzone Data",
    "text": "3.2 Import Subzone Data\n\nCodeData\n\n\n\nsubzone_sf <- st_read(dsn=\"data/geospatial/MPSZ-2019\", layer=\"MPSZ-2019\") %>% st_transform(crs = 3414)\n\nReading layer `MPSZ-2019' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\MPSZ-2019' \n  using driver `ESRI Shapefile'\nSimple feature collection with 332 features and 6 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 103.6057 ymin: 1.158699 xmax: 104.0885 ymax: 1.470775\nGeodetic CRS:  WGS 84\n\n\n\n\n\nhead(subzone_sf)\n\nSimple feature collection with 6 features and 6 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 8012.578 ymin: 22108.68 xmax: 35287.9 ymax: 31092.38\nProjected CRS: SVY21 / Singapore TM\n                SUBZONE_N SUBZONE_C      PLN_AREA_N PLN_AREA_C       REGION_N\n1             MARINA EAST    MESZ01     MARINA EAST         ME CENTRAL REGION\n2        INSTITUTION HILL    RVSZ05    RIVER VALLEY         RV CENTRAL REGION\n3          ROBERTSON QUAY    SRSZ01 SINGAPORE RIVER         SR CENTRAL REGION\n4 JURONG ISLAND AND BUKOM    WISZ01 WESTERN ISLANDS         WI    WEST REGION\n5            FORT CANNING    MUSZ02          MUSEUM         MU CENTRAL REGION\n6        MARINA EAST (MP)    MPSZ05   MARINE PARADE         MP CENTRAL REGION\n  REGION_C                       geometry\n1       CR MULTIPOLYGON (((33222.98 29...\n2       CR MULTIPOLYGON (((28481.45 30...\n3       CR MULTIPOLYGON (((28087.34 30...\n4       WR MULTIPOLYGON (((14557.7 304...\n5       CR MULTIPOLYGON (((29542.53 31...\n6       CR MULTIPOLYGON (((35279.55 30..."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/data/geospatial/MPSZ-2019/MPSZ-2019.html",
    "href": "Take-home_Ex/Take-home_Ex03/data/geospatial/MPSZ-2019/MPSZ-2019.html",
    "title": "Ailys' IS415 Journey",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     dataset\n\n\n        0 0     false"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#mrt",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#mrt",
    "title": "Take-home Exercise 3",
    "section": "4.4 MRT",
    "text": "4.4 MRT\nSimilarly for MRT, there are invalid geometries as well.\n\nlength(which(st_is_valid(mrt_sf) == FALSE))\n\n[1] 2\n\n\n\nmrt_sf[st_is_valid(mrt_sf) == FALSE,]\n\nSimple feature collection with 3 features and 4 fields (with 1 geometry empty)\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 26568.45 ymin: 27478.44 xmax: 28080.89 ymax: 37543.25\nProjected CRS: SVY21 / Singapore TM\n    TYP_CD STN_NAM TYP_CD_DES                STN_NAM_DE\n159      0    <NA>        MRT  HARBOURFRONT MRT STATION\nNA      NA    <NA>       <NA>                      <NA>\n218      0    <NA>        MRT UPPER THOMSON MRT STATION\n                          geometry\n159 POLYGON ((26736.44 27495.44...\nNA                   POLYGON EMPTY\n218 POLYGON ((27808.12 37518.2,...\n\n\nHowever, some geometries have less than 4 polygons, which st_make_valid() does not resolve. Thus we will be excluding them from our exercise.\n\nmrt_sf <- mrt_sf[st_is_valid(mrt_sf) == TRUE,]\nmrt_sf <- mrt_sf[!st_is_empty(mrt_sf),,drop=FALSE]\nlength(which(st_is_valid(mrt_sf) == FALSE))\n\n[1] 0"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#get-coordinates-for-hdb",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#get-coordinates-for-hdb",
    "title": "Take-home Exercise 3",
    "section": "4.5 Get Coordinates for HDB",
    "text": "4.5 Get Coordinates for HDB\n\nlibrary(httr)\ngeocode <- function(block, streetname=\"\") {\n  base_url <- \"https://developers.onemap.sg/commonapi/search\"\n  address <- paste(block, streetname, sep = \" \")\n  query <- list(\"searchVal\" = address, \n                \"returnGeom\" = \"Y\",\n                \"getAddrDetails\" = \"N\",\n                \"pageNum\" = \"1\")\n  \n  res <- GET(base_url, query = query)\n  restext<-content(res, as=\"text\")\n  \n  output <- fromJSON(restext)  %>% \n    as.data.frame %>%\n    select(results.LATITUDE, results.LONGITUDE)\n\n  return(output)\n}\n\n\nresale_prices_total$LATITUDE <- 0\nresale_prices_total$LONGITUDE <- 0\n\nfor (i in 1:nrow(resale_prices_total)){\n  temp_output <- geocode(resale_prices_total[i, 4], resale_prices_total[i, 5])\n  \n  resale_prices_total$LATITUDE[i] <- temp_output$results.LATITUDE\n  resale_prices_total$LONGITUDE[i] <- temp_output$results.LONGITUDE\n}\n\n\nresale_prices_sf <- st_as_sf(resale_prices_total, coords=c(\"LONGITUDE\", \"LATITUDE\"), crs=4326)\nst_write(resale_prices_sf, \"data/geospatial/resale_prices/resale_prices.shp\")\n\n\nresale_prices_sf <- st_read(dsn=\"data/geospatial/resale_prices\", layer=\"resale_prices\") %>% st_transform(crs = 3414)\n\nReading layer `resale_prices' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\resale_prices' \n  using driver `ESRI Shapefile'\nSimple feature collection with 60218 features and 12 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 103.6442 ymin: 1.27038 xmax: 103.9878 ymax: 1.457071\nGeodetic CRS:  WGS 84\n\n\n\n4.5.1 Merge with HDB Status\n\n4.5.1.1 HIP\n\nhdb_hip <- hdb_upgrades %>% filter(TYPE == \"HIP\")\ncolnames(hdb_hip)[3] =\"HIP\"\n\n\nresale_prices_upgrade_sf <- merge(resale_prices_sf, hdb_hip, by.x=c(\"block\", \"strt_nm\"), by.y=c(\"BLK\", \"STREET\"), all.x = TRUE)\n\n\n\n4.5.1.2 MUP\n\nhdb_mup <- hdb_upgrades %>% filter(TYPE == \"MUP\")\ncolnames(hdb_mup)[3] =\"MUP\"\n\n\nresale_prices_upgrade_sf <- merge(resale_prices_upgrade_sf, hdb_mup, by.x=c(\"block\", \"strt_nm\"), by.y=c(\"BLK\", \"STREET\"), all.x = TRUE)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#malls-1",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#malls-1",
    "title": "Take-home Exercise 3",
    "section": "4.6 Malls",
    "text": "4.6 Malls\nFinally, we have the mall’s data from Wikipedia. Similar to the HDB flats, we don’t have geospatial data. But thankfully, we can do the same thing using OneMapSG to get the coordinates.\n\nGet CoordinatesWrite to SHPRead SHP\n\n\n\nmalls$LATITUDE <- 0\nmalls$LONGITUDE <- 0\n\nfor (i in 1:nrow(malls)){\n  temp_output <- geocode(malls[i, 1], )\n  \n  malls$LATITUDE[i] <- temp_output$results.LATITUDE\n  malls$LONGITUDE[i] <- temp_output$results.LONGITUDE\n}\n\n\n\n\nmalls_sf <- st_as_sf(malls, coords=c(\"LONGITUDE\", \"LATITUDE\"), crs=4326)\nst_write(malls_sf, \"data/geospatial/malls/malls.shp\")\n\n\n\n\nmalls_sf <- st_read(dsn=\"data/geospatial/malls\", layer=\"malls\") %>% st_transform(crs = 3414)\n\nReading layer `malls' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\malls' \n  using driver `ESRI Shapefile'\nSimple feature collection with 167 features and 2 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 103.6784 ymin: 1.263932 xmax: 103.9895 ymax: 1.448194\nGeodetic CRS:  WGS 84"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#top-20-primary-schools",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#top-20-primary-schools",
    "title": "Take-home Exercise 3",
    "section": "4.7 Top 20 Primary Schools",
    "text": "4.7 Top 20 Primary Schools\n\ntop_primarySch_ranking_sf <- primarySch_ranking_sf %>% filter(rank <= 20)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#within-radius",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#within-radius",
    "title": "Take-home Exercise 3",
    "section": "5.1 Within radius",
    "text": "5.1 Within radius\n\nlibrary(units)\nradius_calculator <- function(original_sf, derived_sf, column_name, radius) {\n  dist_matrix <- st_distance(original_sf, derived_sf) %>%\n    drop_units() %>%\n    as.data.frame()\n  original_sf[,column_name] <- rowSums(dist_matrix <= radius)\n  return(original_sf)\n}\n\n\nresale_proximity_sf <- radius_calculator(resale_proximity_sf, kindergartens_sf, \"NUM_KINDERGARTEN\", 350)\nresale_proximity_sf <- radius_calculator(resale_proximity_sf, childcare_sf, \"NUM_CHILDCARE\", 350)\nresale_proximity_sf <- radius_calculator(resale_proximity_sf, busstop_sf, \"NUM_BUSSTOP\", 350)\nresale_proximity_sf <- radius_calculator(resale_proximity_sf, primarySch_ranking_sf, \"NUM_SCH\", 1000)\nresale_proximity_sf <- radius_calculator(resale_proximity_sf, top_primarySch_ranking_sf, \"NUM_TOPSCH\", 1000)\n\n\nst_write(resale_proximity_sf, \"data/geospatial/resale_proximity/resale_proximity.shp\")\n\n\nresale_proximity_sf <- st_read(dsn=\"data/geospatial/resale_proximity\", layer=\"resale_proximity\")\n\nReading layer `resale_proximity' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\resale_proximity' \n  using driver `ESRI Shapefile'\nSimple feature collection with 60218 features and 32 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 6958.193 ymin: 28097.64 xmax: 45192.3 ymax: 48741.06\nProjected CRS: SVY21 / Singapore TM"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#floor-level",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#floor-level",
    "title": "Take-home Exercise 3",
    "section": "6.1 Floor Level",
    "text": "6.1 Floor Level\n\nstorey_category <- unique(resale_proximity_sf$stry_rn)\nstorey_category\n\n [1] \"07 TO 09\" \"16 TO 18\" \"01 TO 03\" \"13 TO 15\" \"10 TO 12\" \"04 TO 06\"\n [7] \"19 TO 21\" \"22 TO 24\" \"25 TO 27\" \"34 TO 36\" \"31 TO 33\" \"37 TO 39\"\n[13] \"40 TO 42\" \"28 TO 30\" \"43 TO 45\" \"49 TO 51\" \"46 TO 48\"\n\n\n\nstorey_names <- 1:length(storey_category)\nstorey_order <- data.frame(storey_category, storey_names)\nstorey_order\n\n   storey_category storey_names\n1         07 TO 09            1\n2         16 TO 18            2\n3         01 TO 03            3\n4         13 TO 15            4\n5         10 TO 12            5\n6         04 TO 06            6\n7         19 TO 21            7\n8         22 TO 24            8\n9         25 TO 27            9\n10        34 TO 36           10\n11        31 TO 33           11\n12        37 TO 39           12\n13        40 TO 42           13\n14        28 TO 30           14\n15        43 TO 45           15\n16        49 TO 51           16\n17        46 TO 48           17\n\n\n\nresale_level_loc_sf <- merge(resale_proximity_sf, storey_order, by.x = \"stry_rn\", by.y = \"storey_category\", all.x=TRUE)\nresale_level_loc_sf\n\nSimple feature collection with 60218 features and 33 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 6958.193 ymin: 28097.64 xmax: 45192.3 ymax: 48741.06\nProjected CRS: SVY21 / Singapore TM\nFirst 10 features:\n    stry_rn block          strt_nm   month            town   flt_typ flr_r_s\n1  01 TO 03  117B     JLN TENTERAM 2021-08 KALLANG/WHAMPOA    4 ROOM      93\n2  01 TO 03  101A  LOR 2 TOA PAYOH 2021-10       TOA PAYOH EXECUTIVE     145\n3  01 TO 03    57  LOR 5 TOA PAYOH 2021-08       TOA PAYOH    3 ROOM      61\n4  01 TO 03  305A  ANCHORVALE LINK 2021-06        SENGKANG    5 ROOM     110\n5  01 TO 03   237    HOUGANG ST 21 2022-05         HOUGANG EXECUTIVE     148\n6  01 TO 03   538 ANG MO KIO AVE 5 2023-02      ANG MO KIO    3 ROOM      68\n7  01 TO 03   358   CLEMENTI AVE 2 2021-07        CLEMENTI    4 ROOM      92\n8  01 TO 03   461         SEGAR RD 2021-02   BUKIT PANJANG    4 ROOM      93\n9  01 TO 03  424D    YISHUN AVE 11 2022-11          YISHUN    3 ROOM      67\n10 01 TO 03   401   HOUGANG AVE 10 2021-07         HOUGANG    3 ROOM      68\n             flt_mdl ls_cmm_            rmnng_l rsl_prc       date  HIP\n1            Model A    2017 95 years 03 months  655000 2021-08-01 <NA>\n2          Apartment    1993 70 years 07 months  898000 2021-10-01 <NA>\n3           Standard    1973 50 years 06 months  260000 2021-08-01 <NA>\n4           Improved    2002 79 years 09 months  445000 2021-06-01 <NA>\n5         Maisonette    1984 61 years 03 months  760000 2022-05-01 <NA>\n6     New Generation    1980 56 years 02 months  358000 2023-02-01  HIP\n7     New Generation    1978 55 years 07 months  422000 2021-07-01  HIP\n8  Premium Apartment    2015 93 years 07 months  390000 2021-02-01 <NA>\n9            Model A    2015 92 years 03 months  360000 2022-11-01 <NA>\n10    New Generation    1985 62 years 11 months  325000 2021-07-01  HIP\n       TOWN_x  MUP    TOWN_y PROX_CB PROX_HA PROX_EL PROX_KI PROX_CH PROX_BU\n1        <NA> <NA>      <NA>   0.013   0.122   0.115   0.371   0.799   2.842\n2        <NA> <NA>      <NA>   0.012   0.114   0.033   0.422   1.905   2.629\n3        <NA>  MUP TOA PAYOH   0.012   0.115   0.033   0.423   0.902   0.934\n4        <NA> <NA>      <NA>   0.013   0.008   0.066   0.272   1.102   0.465\n5        <NA> <NA>      <NA>   0.013   0.079   0.042   0.113   1.366   4.606\n6  ANG MO KIO <NA>      <NA>   0.013   0.020   0.013   0.002   1.797   0.824\n7    CLEMENTI <NA>      <NA>   0.003   0.047   0.103   0.007   0.937   1.001\n8        <NA> <NA>      <NA>   0.012   0.038   0.045   0.255   1.691   0.739\n9        <NA> <NA>      <NA>   0.013   0.124   0.072   0.049   0.891   2.761\n10    HOUGANG <NA>      <NA>   0.013   0.008   0.095   0.107   1.587   2.062\n   PROX_MR PROX_SC PROX_SU PROX_MA PROX_TO NUM_KIN NUM_CHI NUM_BUS NUM_SCH\n1    0.075   0.033   0.074   0.057   0.007       0       1       6       3\n2    0.037   0.028   0.232   0.019   0.007       2       4      10       5\n3    0.037   0.028   0.232   0.019   0.007       1       5      11       3\n4    0.129   0.082   0.433   0.114   0.015       0       4       8       4\n5    0.156   0.079   0.317   0.116   0.014       1       4       8       2\n6    0.056   0.094   0.040   0.098   0.016       1       3      10       1\n7    0.044   0.007   0.159   0.161   0.001       1       3       9       2\n8    0.077   0.127   0.330   0.131   0.019       2       8       6       4\n9    0.086   0.165   0.502   0.106   0.016       0       2       6       3\n10   0.008   0.072   0.252   0.111   0.014       3       6       9       5\n   NUM_TOP storey_names                  geometry\n1        0            3 POINT (31058.62 34487.27)\n2        1            3     POINT (29552 35767.3)\n3        1            3 POINT (30022.91 35470.15)\n4        0            3 POINT (34103.93 41148.01)\n5        0            3 POINT (34180.87 37633.89)\n6        0            3    POINT (30229 39731.65)\n7        0            3 POINT (20851.34 32875.25)\n8        0            3 POINT (21095.91 40990.18)\n9        0            3  POINT (29769.97 44954.8)\n10       1            3 POINT (35086.31 39648.81)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#remaining-lease",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#remaining-lease",
    "title": "Take-home Exercise 3",
    "section": "6.2 Remaining Lease",
    "text": "6.2 Remaining Lease\n\nstr_list <- str_split(resale_level_loc_sf$rmnng_l, \" \")\n\nfor (i in 1:length(str_list)) {\n  if (length(unlist(str_list[i])) > 2) {\n      year <- as.numeric(unlist(str_list[i])[1])\n      month <- as.numeric(unlist(str_list[i])[3])\n      resale_level_loc_sf[i, \"remaining_lease\"] <- (year * 12) + month\n  }\n  else {\n    year <- as.numeric(unlist(str_list[i])[1])\n    resale_level_loc_sf[i, \"remaining_lease\"] <- (year * 12)\n  }\n}\nresale_remaining_lease_loc_sf <- resale_level_loc_sf\n\n\nst_write(resale_remaining_lease_loc_sf, \"data/geospatial/resale_proximity/resale_proximity.shp\")\n\n\nresale_remaining_lease_loc_sf <- st_read(dsn=\"data/geospatial/resale_proximity\", layer=\"resale_proximity\") %>% st_transform(crs = 3414)\n\nReading layer `resale_proximity' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\resale_proximity' \n  using driver `ESRI Shapefile'\nSimple feature collection with 60218 features and 32 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 6958.193 ymin: 28097.64 xmax: 45192.3 ymax: 48741.06\nProjected CRS: SVY21 / Singapore TM"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#age-of-unit",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#age-of-unit",
    "title": "Take-home Exercise 3",
    "section": "6.3 Age of Unit",
    "text": "6.3 Age of Unit\n\nresale_remaining_lease_loc_sf$year <- zoo::as.Date(zoo::as.yearmon(resale_remaining_lease_loc_sf$ls_cmm_))\nresale_remaining_lease_loc_sf$age = round(interval(resale_remaining_lease_loc_sf$year, resale_remaining_lease_loc_sf$date)/ years(1))\nresale_age_loc_sf <- resale_remaining_lease_loc_sf"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#upgrades",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#upgrades",
    "title": "Take-home Exercise 3",
    "section": "6.4 Upgrades",
    "text": "6.4 Upgrades\n\n\n6.4.1 Encoding\n\nresale_upgrade_loc_sf <- resale_age_loc_sf\n\n\nresale_upgrade_loc_sf$HIP <- ifelse(is.na(resale_upgrade_loc_sf$HIP), 0, 1)\nresale_upgrade_loc_sf$MUP <- ifelse(is.na(resale_upgrade_loc_sf$MUP), 0, 1)\n\n\n\n6.4.2 Write to SHP\n\nst_write(resale_remaining_lease_loc_sf, \"data/geospatial/resale_upgrade_loc_sf/resale_upgrade_loc_sf.shp\")\n\n\n\n6.4.3 Read SHP\n\nresale_proximity_sf <- st_read(dsn=\"data/geospatial/resale_upgrade_loc_sf\", layer=\"resale_upgrade_loc_sf\")\n\nReading layer `resale_upgrade_loc_sf' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\resale_upgrade_loc_sf' \n  using driver `ESRI Shapefile'\nSimple feature collection with 60218 features and 32 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 6958.193 ymin: 28097.64 xmax: 45192.3 ymax: 48741.06\nProjected CRS: SVY21 / Singapore TM"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#hdb-types",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#hdb-types",
    "title": "Take-home Exercise 3",
    "section": "6.5 HDB Types",
    "text": "6.5 HDB Types\n\nhdb_types <- unique(resale_upgrade_loc_sf$flt_typ)\nhdb_types\n\n[1] \"3 ROOM\"           \"5 ROOM\"           \"4 ROOM\"           \"EXECUTIVE\"       \n[5] \"2 ROOM\"           \"MULTI-GENERATION\" \"1 ROOM\"          \n\n\n\nresale_type_loc_sf <- resale_upgrade_loc_sf %>% filter(resale_upgrade_loc_sf$flt_typ == \"3 ROOM\")\nresale_type_loc_sf\n\nSimple feature collection with 13779 features and 34 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 11597.97 ymin: 28097.64 xmax: 45192.3 ymax: 48622.47\nProjected CRS: SVY21 / Singapore TM\nFirst 10 features:\n   block         strt_nm   month            town flt_typ  stry_rn flr_r_s\n1      1        BEACH RD 2021-02 KALLANG/WHAMPOA  3 ROOM 07 TO 09      68\n2      1        BEACH RD 2021-03 KALLANG/WHAMPOA  3 ROOM 07 TO 09      68\n3      1        BEACH RD 2021-07 KALLANG/WHAMPOA  3 ROOM 16 TO 18      68\n4      1        BEACH RD 2022-12 KALLANG/WHAMPOA  3 ROOM 07 TO 09      68\n5      1        BEACH RD 2022-07 KALLANG/WHAMPOA  3 ROOM 01 TO 03      68\n6      1        BEACH RD 2021-04 KALLANG/WHAMPOA  3 ROOM 07 TO 09      68\n7      1 BEDOK STH AVE 1 2021-01           BEDOK  3 ROOM 07 TO 09      59\n8      1 BEDOK STH AVE 1 2021-04           BEDOK  3 ROOM 01 TO 03      59\n9      1 BEDOK STH AVE 1 2021-05           BEDOK  3 ROOM 13 TO 15      59\n10     1 BEDOK STH AVE 1 2021-09           BEDOK  3 ROOM 10 TO 12      67\n    flt_mdl ls_cmm_            rmnng_l rsl_prc       date  HIP TOWN_x  MUP\n1  Improved    1979 57 years 08 months  328000 2021-02-01 <NA>   <NA>  MUP\n2  Improved    1979 57 years 07 months  350888 2021-03-01 <NA>   <NA>  MUP\n3  Improved    1979 57 years 03 months  355000 2021-07-01 <NA>   <NA>  MUP\n4  Improved    1979           56 years  418000 2022-12-01 <NA>   <NA>  MUP\n5  Improved    1979 56 years 03 months  350000 2022-07-01 <NA>   <NA>  MUP\n6  Improved    1979 57 years 05 months  328000 2021-04-01 <NA>   <NA>  MUP\n7  Improved    1976  54 years 01 month  268000 2021-01-01 <NA>   <NA> <NA>\n8  Improved    1976 53 years 10 months  265000 2021-04-01 <NA>   <NA> <NA>\n9  Improved    1976 53 years 08 months  301000 2021-05-01 <NA>   <NA> <NA>\n10 Improved    1976 53 years 05 months  322000 2021-09-01 <NA>   <NA> <NA>\n            TOWN_y PROX_CB PROX_HA PROX_EL PROX_KI PROX_CH PROX_BU PROX_MR\n1  KALLANG/WHAMPOA   0.011   0.105   0.024   0.297   0.510   4.712   0.001\n2  KALLANG/WHAMPOA   0.011   0.105   0.024   0.297   0.510   4.712   0.001\n3  KALLANG/WHAMPOA   0.011   0.105   0.024   0.297   0.510   4.712   0.001\n4  KALLANG/WHAMPOA   0.011   0.105   0.024   0.297   0.510   4.712   0.001\n5  KALLANG/WHAMPOA   0.011   0.105   0.024   0.297   0.510   4.712   0.001\n6  KALLANG/WHAMPOA   0.011   0.105   0.024   0.297   0.510   4.712   0.001\n7             <NA>   0.013   0.029   0.028   0.324   0.727   1.535   0.040\n8             <NA>   0.013   0.029   0.028   0.324   0.727   1.535   0.040\n9             <NA>   0.013   0.029   0.028   0.324   0.727   1.535   0.040\n10            <NA>   0.013   0.029   0.028   0.324   0.727   1.535   0.040\n   PROX_SC PROX_SU PROX_MA PROX_TO NUM_KIN NUM_CHI NUM_BUS NUM_SCH NUM_TOP\n1    0.017   0.418   0.042   0.006       0       2      15       0       0\n2    0.017   0.418   0.042   0.006       0       2      15       0       0\n3    0.017   0.418   0.042   0.006       0       2      15       0       0\n4    0.017   0.418   0.042   0.006       0       2      15       0       0\n5    0.017   0.418   0.042   0.006       0       2      15       0       0\n6    0.017   0.418   0.042   0.006       0       2      15       0       0\n7    0.047   0.321   0.065   0.011       0       4       5       1       0\n8    0.047   0.321   0.065   0.011       0       4       5       1       0\n9    0.047   0.321   0.065   0.011       0       4       5       1       0\n10   0.047   0.321   0.065   0.011       0       4       5       1       0\n                    geometry       year age\n1  POINT (30309.27 30830.82) 1979-01-01  42\n2  POINT (30309.27 30830.82) 1979-01-01  42\n3  POINT (30309.27 30830.82) 1979-01-01  42\n4  POINT (30309.27 30830.82) 1979-01-01  44\n5  POINT (30309.27 30830.82) 1979-01-01  43\n6  POINT (30309.27 30830.82) 1979-01-01  42\n7  POINT (39173.81 33678.86) 1976-01-01  45\n8  POINT (39173.81 33678.86) 1976-01-01  45\n9  POINT (39173.81 33678.86) 1976-01-01  45\n10 POINT (39173.81 33678.86) 1976-01-01  46"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#save",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#save",
    "title": "Take-home Exercise 3",
    "section": "6.6 save",
    "text": "6.6 save\n\nfinal_resale_prices <- resale_type_loc_sf\nfinal_resale_prices <- final_resale_prices %>% \n        rename(\"storey_range\" = \"stry_rn\",\n               \"street_name\" = \"strt_nm\",\n               \"flat_type\" = \"flt_typ\",\n               \"floor_area_sqm\" = \"flr_r_s\",\n               \"flat_model\" = \"flt_mdl\",\n               \"lease_commence_date\" = \"ls_cmm_\",\n               \"remaining_lease_original\" = \"rmnng_l\",\n               \"resale_price\" = \"rsl_prc\",\n               \"PROX_CBD\" = \"PROX_CB\",\n               \"PROX_HAWKER\" = \"PROX_HA\",\n               \"PROX_ELDERCARE\" = \"PROX_EL\",\n               \"PROX_KINDERGARTEN\" = \"PROX_KI\",\n               \"PROX_CHILDCARE\" = \"PROX_CH\",\n               \"PROX_BUSSTOP\" = \"PROX_BU\",\n               \"PROX_MRT\" = \"PROX_MR\",\n               \"PROX_SCH\" = \"PROX_SC\",\n               \"PROX_TOPSCH\" = \"PROX_TO\",\n               \"PROX_SUPERMARKET\" = \"PROX_SU\",\n               \"PROX_MALL\" = \"PROX_MA\",\n               \"NUM_KINDERGARTEN\" = \"NUM_KIN\",\n               \"NUM_CHILDCARE\" = \"NUM_CHI\",\n               \"NUM_BUSSTOP\" = \"NUM_BUS\",\n               \"NUM_TOPSCH\" = \"NUM_TOP\")\nnames(final_resale_prices)\n\n [1] \"block\"                    \"street_name\"             \n [3] \"month\"                    \"town\"                    \n [5] \"flat_type\"                \"storey_range\"            \n [7] \"floor_area_sqm\"           \"flat_model\"              \n [9] \"lease_commence_date\"      \"remaining_lease_original\"\n[11] \"resale_price\"             \"date\"                    \n[13] \"HIP\"                      \"TOWN_x\"                  \n[15] \"MUP\"                      \"TOWN_y\"                  \n[17] \"PROX_CBD\"                 \"PROX_HAWKER\"             \n[19] \"PROX_ELDERCARE\"           \"PROX_KINDERGARTEN\"       \n[21] \"PROX_CHILDCARE\"           \"PROX_BUSSTOP\"            \n[23] \"PROX_MRT\"                 \"PROX_SCH\"                \n[25] \"PROX_SUPERMARKET\"         \"PROX_MALL\"               \n[27] \"PROX_TOPSCH\"              \"NUM_KINDERGARTEN\"        \n[29] \"NUM_CHILDCARE\"            \"NUM_BUSSTOP\"             \n[31] \"NUM_SCH\"                  \"NUM_TOPSCH\"              \n[33] \"year\"                     \"age\"                     \n[35] \"geometry\"                \n\n\n\nwrite_rds(final_resale_prices, \"data/model/final_resale_prices.rds\")\n\n\nfinal_resale_prices <- read_rds(\"data/model/final_resale_prices.rds\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#filtering",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#filtering",
    "title": "Take-home Exercise 3",
    "section": "8.1 Filtering",
    "text": "8.1 Filtering\n\n8.1.1 Train\nSadly due to my laptop’s limited computation power, I have filtered the training data to be only from June 2022 to December 2022 :(\nWe will also filter for the columns that are of interest to us, as shown below.\n\nnames(final_resale_prices)[c(7, 11, 13, 15, 17:34, 36)]\n\n [1] \"floor_area_sqm\"    \"resale_price\"      \"HIP\"              \n [4] \"MUP\"               \"PROX_CBD\"          \"PROX_HAWKER\"      \n [7] \"PROX_ELDERCARE\"    \"PROX_KINDERGARTEN\" \"PROX_CHILDCARE\"   \n[10] \"PROX_BUSSTOP\"      \"PROX_MRT\"          \"PROX_SCH\"         \n[13] \"PROX_SUPERMARKET\"  \"PROX_MALL\"         \"PROX_TOPSCH\"      \n[16] \"NUM_KINDERGARTEN\"  \"NUM_CHILDCARE\"     \"NUM_BUSSTOP\"      \n[19] \"NUM_SCH\"           \"NUM_TOPSCH\"        \"storey_names\"     \n[22] \"remaining_lease\"   \"age\"              \n\n\n\ntrain_resale_prices <- final_resale_prices %>% filter(between(date, as.Date('2022-06-01'), as.Date('2022-12-01')))\ntrain_resale_prices <- train_resale_prices[, c(7, 11, 13, 15, 17:34, 36)]\n\n\n\n8.1.2 Test\nThe test data is then this year’s transactions, being in January and February 2023.\n\ntest_resale_prices <- final_resale_prices %>% filter(between(date, as.Date('2023-01-01'), as.Date('2023-02-01')))\ntest_resale_prices <- test_resale_prices[, c(7, 11, 13, 15, 17:34, 36)]"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#visualising-the-relationships-of-the-independent-variables",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#visualising-the-relationships-of-the-independent-variables",
    "title": "Take-home Exercise 3",
    "section": "8.2 Visualising the relationships of the independent variables",
    "text": "8.2 Visualising the relationships of the independent variables\nWe will want to check for multicollinearity, in that whether any of the variables is highly correlated with one another. If not removed, the models may not be wholy representative of the different variables and the predicted hence then be wrong.\nCorrelation matrix is what we will be using in this section.\n\ntotal_resale_prices <- final_resale_prices[, c(7, 11, 13, 15, 17:34, 36)]\nst_geometry(total_resale_prices) <- NULL\n\n\ncorrplot(cor(total_resale_prices), diag = FALSE, order = \"AOE\",\n         tl.pos = \"td\", tl.cex = 0.5, method = \"number\", type = \"upper\")\n\n\n\n\nLooks like age of the HDB flats and remaining lease are practically inversely correlated, having a correlation of more than +/-0.8. So one will be removed, age will be removed.\nSimilarly, proximity of schools will be removed in favour of top schools."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#preparing-publication-quality-table-gtsummary-method",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#preparing-publication-quality-table-gtsummary-method",
    "title": "Take-home Exercise 3",
    "section": "8.3 Preparing Publication Quality Table: gtsummary method",
    "text": "8.3 Preparing Publication Quality Table: gtsummary method\n\ntbl_regression(resale_price.mlr, intercept = TRUE)\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    (Intercept)\n217,932\n186,745, 249,119\n<0.001\n    floor_area_sqm\n4,379\n3,955, 4,803\n<0.001\n    HIP\n-49,888\n-55,876, -43,900\n<0.001\n    MUP\n-72,399\n-79,365, -65,433\n<0.001\n    PROX_CBD\n-1,111,345\n-2,022,932, -199,759\n0.017\n    PROX_HAWKER\n-198,234\n-260,803, -135,665\n<0.001\n    PROX_ELDERCARE\n-60,342\n-128,174, 7,489\n0.081\n    PROX_CHILDCARE\n-3,351\n-8,345, 1,643\n0.2\n    PROX_SUPERMARKET\n-50,430\n-67,135, -33,726\n<0.001\n    PROX_MALL\n-182,216\n-254,665, -109,767\n<0.001\n    PROX_TOPSCH\n-3,131,808\n-3,745,281, -2,518,335\n<0.001\n    NUM_KINDERGARTEN\n-5,930\n-9,200, -2,660\n<0.001\n    NUM_CHILDCARE\n2,195\n695, 3,694\n0.004\n    NUM_SCH\n-766\n-2,793, 1,261\n0.5\n    NUM_TOPSCH\n10,097\n4,885, 15,310\n<0.001\n  \n  \n  \n    \n      1 CI = Confidence Interval\n    \n  \n\n\n\n\n\ntbl_regression(resale_price.mlr, \n               intercept = TRUE) %>% \n  add_glance_source_note(\n    label = list(sigma ~ \"\\U03C3\"),\n    include = c(r.squared, adj.r.squared, \n                AIC, statistic,\n                p.value, sigma))\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    (Intercept)\n217,932\n186,745, 249,119\n<0.001\n    floor_area_sqm\n4,379\n3,955, 4,803\n<0.001\n    HIP\n-49,888\n-55,876, -43,900\n<0.001\n    MUP\n-72,399\n-79,365, -65,433\n<0.001\n    PROX_CBD\n-1,111,345\n-2,022,932, -199,759\n0.017\n    PROX_HAWKER\n-198,234\n-260,803, -135,665\n<0.001\n    PROX_ELDERCARE\n-60,342\n-128,174, 7,489\n0.081\n    PROX_CHILDCARE\n-3,351\n-8,345, 1,643\n0.2\n    PROX_SUPERMARKET\n-50,430\n-67,135, -33,726\n<0.001\n    PROX_MALL\n-182,216\n-254,665, -109,767\n<0.001\n    PROX_TOPSCH\n-3,131,808\n-3,745,281, -2,518,335\n<0.001\n    NUM_KINDERGARTEN\n-5,930\n-9,200, -2,660\n<0.001\n    NUM_CHILDCARE\n2,195\n695, 3,694\n0.004\n    NUM_SCH\n-766\n-2,793, 1,261\n0.5\n    NUM_TOPSCH\n10,097\n4,885, 15,310\n<0.001\n  \n  \n    \n      R² = 0.274; Adjusted R² = 0.271; AIC = 94,988; Statistic = 101; p-value = <0.001; σ = 74,129\n    \n  \n  \n    \n      1 CI = Confidence Interval"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#checking-for-multicolinearity",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#checking-for-multicolinearity",
    "title": "Take-home Exercise 3",
    "section": "8.4 Checking for multicolinearity",
    "text": "8.4 Checking for multicolinearity\n\nols_vif_tol(resale_price.mlr)\n\n          Variables Tolerance      VIF\n1    floor_area_sqm 0.9431674 1.060257\n2               HIP 0.8346136 1.198159\n3               MUP 0.8375694 1.193931\n4          PROX_CBD 0.4847280 2.063013\n5       PROX_HAWKER 0.8941397 1.118393\n6    PROX_ELDERCARE 0.9211740 1.085571\n7    PROX_CHILDCARE 0.9362782 1.068059\n8  PROX_SUPERMARKET 0.9730071 1.027742\n9         PROX_MALL 0.5920959 1.688916\n10      PROX_TOPSCH 0.4740046 2.109684\n11 NUM_KINDERGARTEN 0.6802116 1.470131\n12    NUM_CHILDCARE 0.6707035 1.490972\n13          NUM_SCH 0.7610742 1.313932\n14       NUM_TOPSCH 0.8840727 1.131129\n\n\n\nols_plot_resid_fit(resale_price.mlr)\n\n\n\n\n\nols_plot_resid_hist(resale_price.mlr)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#testing-for-spatial-autocorrelation",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#testing-for-spatial-autocorrelation",
    "title": "Take-home Exercise 3",
    "section": "8.5 Testing for Spatial Autocorrelation",
    "text": "8.5 Testing for Spatial Autocorrelation\n\nresale_price.mlr.output <- as.data.frame(resale_price.mlr$residuals)\nfinal_resale_price.mlr.sf <- cbind(train_resale_prices, resale_price.mlr.output) %>%\n  rename(`MLR_RES` = `resale_price.mlr.residuals`)\nfinal_resale_price.mlr.sp <- as_Spatial(final_resale_price.mlr.sf)\nfinal_resale_price.mlr.sp\n\nclass       : SpatialPointsDataFrame \nfeatures    : 3759 \nextent      : 11597.97, 45154.27, 28097.64, 48622.47  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 24\nnames       : floor_area_sqm, resale_price, HIP, MUP, PROX_CBD, PROX_HAWKER, PROX_ELDERCARE, PROX_KINDERGARTEN, PROX_CHILDCARE, PROX_BUSSTOP, PROX_MRT, PROX_SCH, PROX_SUPERMARKET, PROX_MALL, PROX_TOPSCH, ... \nmin values  :             51,       240000,   0,   0,    0.001,       0.002,          0.001,             0.001,          0.002,        0.005,    0.001,    0.001,            0.001,     0.003,       0.001, ... \nmax values  :            137,       958000,   1,   1,    0.013,       0.125,          0.133,             0.438,          1.912,        5.138,    0.217,    0.181,            0.526,     0.167,        0.02, ... \n\n\n\n8.5.1 Map\n\ntmap_mode(\"view\")\ntm_shape(subzone_sf)+\n  tmap_options(check.and.fix = TRUE) +\n  tm_polygons(alpha = 0.4) +\ntm_shape(final_resale_price.mlr.sf) +  \n  tm_dots(col = \"MLR_RES\",\n          alpha = 0.6,\n          style=\"quantile\") +\n  tm_view(set.zoom.limits = c(11,14))\n\n\n\n\n\ntmap_mode(\"plot\")\n\n\nnb <- dnearneigh(coordinates(final_resale_price.mlr.sp), 0, 1500, longlat = FALSE)\nnb_lw <- nb2listw(nb, style = 'W')\nlm.morantest(resale_price.mlr, nb_lw)\n\n\nmlr_pred <- predict.lm(resale_price.mlr, test_resale_prices)\n\n\nwrite_rds(mlr_pred, \"data/model/mlr_pred.rds\")\n\n\nmlr_pred <- read_rds(\"data/model/mlr_pred.rds\")\n\n\nmlr_pred_df <- as.data.frame(mlr_pred)\ntest_data_p_mlr <- cbind(test_resale_prices, mlr_pred_df)\n\n\nMetrics::rmse(test_data_p_mlr$resale_price, \n     test_data_p_mlr$mlr_pred)\n\n[1] 75888.6\n\n\n\nOLS_scatterplot <- ggplot(data = test_data_p_mlr,\n       aes(x = mlr_pred,\n           y = resale_price)) +\n  geom_point()\n\nOLS_scatterplot"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#building-fixed-bandwidth-gwr-model",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#building-fixed-bandwidth-gwr-model",
    "title": "Take-home Exercise 3",
    "section": "10.1 Building Fixed Bandwidth GWR Model",
    "text": "10.1 Building Fixed Bandwidth GWR Model\n\n10.1.1 Computing fixed bandwith\n\nresale_price.sp <- as_Spatial(train_resale_prices)\n\n\nset.seed(1234)\nbw_adaptive <- bw.gwr(resale_price ~ floor_area_sqm + HIP + MUP + PROX_CBD + PROX_HAWKER +  PROX_ELDERCARE + PROX_KINDERGARTEN + PROX_CHILDCARE + PROX_BUSSTOP + PROX_MRT +  PROX_SUPERMARKET + PROX_MALL + PROX_TOPSCH + NUM_KINDERGARTEN + NUM_CHILDCARE + NUM_BUSSTOP + NUM_TOPSCH, \n                      data=resale_price.sp, \n                      approach=\"CV\", \n                      kernel=\"gaussian\", \n                      adaptive=TRUE, \n                      longlat=FALSE)\n\n\nAs you can see from above, the most suitable bandwidth is 208.\n\ntrain_resale_prices <- train_resale_prices %>% \n  st_drop_geometry()\n\n\ntrain_resale_prices <- train_resale_prices %>% \n  st_drop_geometry()\n\n\nset.seed(1234)\nrf <- ranger(resale_price ~ floor_area_sqm + HIP + MUP + PROX_CBD + PROX_HAWKER +  PROX_ELDERCARE + PROX_KINDERGARTEN + PROX_CHILDCARE + PROX_BUSSTOP + PROX_MRT +  PROX_SUPERMARKET + PROX_MALL + PROX_TOPSCH + NUM_KINDERGARTEN + NUM_CHILDCARE + NUM_BUSSTOP + NUM_TOPSCH,\n             data=train_resale_prices)\nprint(rf)\n\n\nset.seed(1234)\ngrf_adaptive <- grf(formula = resale_price ~ floor_area_sqm + HIP + MUP + PROX_CBD + PROX_HAWKER +  PROX_ELDERCARE + PROX_KINDERGARTEN + PROX_CHILDCARE + PROX_SUPERMARKET + PROX_MALL + PROX_TOPSCH + NUM_KINDERGARTEN + NUM_CHILDCARE + NUM_BUSSTOP + NUM_SCH + NUM_TOPSCH, \n                     dframe=train_resale_prices,\n                     bw=bw_adaptive,\n                     kernel=\"adaptive\",\n                     coords=coords_train,\n                      ntree = 30)\n\n\nwrite_rds(grf_adaptive, \"data/model/grf_adaptive.rds\")\n\n\ngrf_adaptive <- read_rds(\"data/model/grf_adaptive.rds\")\n\n\ntest_data <- cbind(test_resale_prices, coords_test) %>%\n  st_drop_geometry()\n\n\ngwRF_pred <- predict.grf(grf_adaptive, \n                           test_data, \n                           x.var.name=\"X\",\n                           y.var.name=\"Y\", \n                           local.w=1,\n                           global.w=0)\n\n\ngwRF_pred <- write_rds(gwRF_pred, \"data/model/gwRF_pred.rds\")\n\n\ngwRF_pred <- read_rds(\"data/model/gwRF_pred.rds\")\ngwRF_pred_df <- as.data.frame(gwRF_pred)\n\n\ntest_data_p <- cbind(test_data, gwRF_pred)\n\n\nwrite_rds(test_data_p, \"data/model/test_data_p.rds\")\n\n\ntest_data_p <- read_rds(\"data/model/test_data_p.rds\")\ntest_data_p <- as.data.frame(test_data_p)\n\n\nMetrics::rmse(test_data_p$resale_price, \n     test_data_p$gwRF_pred)\n\n[1] 33323.73\n\n\n\nggplot(data = test_data_p,\n       aes(x = gwRF_pred,\n           y = resale_price)) +\n  geom_point()"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#central-business-district",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#central-business-district",
    "title": "Take-home Exercise 3",
    "section": "4.1 Central Business District",
    "text": "4.1 Central Business District\n\ncbd_sf <- subzone_sf %>% filter(subzone_sf$PLN_AREA_N == \"DOWNTOWN CORE\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#primary-schools",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#primary-schools",
    "title": "Take-home Exercise 3",
    "section": "4.2 Primary Schools",
    "text": "4.2 Primary Schools\n\n4.2.1 Scraping of Ranking Data\nTo make full use of primary schools as an independent variable, we need to merge the ranking we get from Schlah’s Primary School Rankings. It provides substantial data in how it derived its ranking, which offers a more objective rank.\nWe then scraped this data from the website.\n\nCodeData\n\n\n\nprimarySch_ranking <- fromJSON(\"data/geospatial/primaryschools/primaryschools_rankings.json\")[[\"props\"]][[\"pageProps\"]][[\"sortedSchools\"]]\n\n\n\n\nhead(primarySch_ranking, 5)\n\n  rank total     schoolInfo.schoolSlug schoolInfo.schoolCode\n1    1   186    nanyang-primary-school                  5258\n2    2   186            tao-nan-school                  5240\n3    3   186      catholic-high-school                  7102\n4    4   186    nan-hua-primary-school                  5622\n5    5   186 st-hilda-s-primary-school                  5025\n       schoolInfo.schoolName schoolInfo.schoolNameZh\n1     Nanyang Primary School                南洋小学\n2             Tao Nan School                        \n3       Catholic High School                公教中学\n4     Nan Hua Primary School             南 华 小 学\n5 St. Hilda's Primary School            圣希尔达小学\n                                      schoolInfo.schoolLogoUrl\n1   https://beta.moe.gov.sg/uploads/nanyang-primary-school.jpg\n2           https://beta.moe.gov.sg/uploads/tao-nan-school.jpg\n3     https://beta.moe.gov.sg/uploads/catholic-high-school.jpg\n4   https://beta.moe.gov.sg/uploads/nan-hua-primary-school.jpg\n5 https://beta.moe.gov.sg/uploads/st-hildas-primary-school.jpg\n  schoolInfo.schoolLevel schoolInfo.schoolZone   schoolInfo.schoolType\n1         Primary School                  West Government-Aided School\n2         Primary School                  East Government-Aided School\n3         Primary School                 North Government-Aided School\n4         Primary School                  West Government-Aided School\n5         Primary School                  East Government-Aided School\n  schoolInfo.schoolNature schoolInfo.schoolSession\n1            Co-Ed School           Single Session\n2            Co-Ed School           Single Session\n3            Boys' School           Single Session\n4            Co-Ed School           Single Session\n5            Co-Ed School           Single Session\n                   schoolInfo.website schoolInfo.address schoolInfo.schoolArea\n1         https://www.nyps.moe.edu.sg     52 King's Road           Bukit Timah\n2       https://www.taonan.moe.edu.sg 49 Marine Crescent         Marine Parade\n3 https://www.catholichigh.moe.edu.sg 9 Bishan Street 22                Bishan\n4    https://www.nanhuapri.moe.edu.sg   30 Jalan Lempeng              Clementi\n5         https://www.shps.moe.edu.sg   2 Tampines Ave 3              Tampines\n  schoolInfo.postalCode schoolInfo.tel      schoolInfo.email\n1                268097       64672677       nyps@moe.edu.sg\n2                449761       64428307 taonan_sch@moe.edu.sg\n3                579767       64589869        chs@moe.edu.sg\n4                128806       67788050       nhps@moe.edu.sg\n5                529706       67811916       shps@moe.edu.sg\n  schoolInfo.latitude schoolInfo.longitude\n1            1.320847             103.8078\n2            1.305285             103.9116\n3            1.354723             103.8449\n4            1.306116             103.7651\n5            1.349350             103.9379\n                                                                                                                                                                                                                                                                                       schoolInfo.nearestSlugs\n1 raffles-girls-primary-school, singapore-chinese-girls-primary-school, new-town-primary-school, henry-park-primary-school, queenstown-primary-school, methodist-girls-school-primary, anglo-chinese-school-primary, fairfield-methodist-school-primary, alexandra-primary-school, anglo-chinese-school-junior\n2                                                                    chij-katong-primary, ngee-ann-primary-school, haig-girls-school, st-stephen-s-school, opera-estate-primary-school, eunos-primary-school, kong-hwa-school, maha-bodhi-school, telok-kurau-primary-school, geylang-methodist-school-primary\n3                                   guangyang-primary-school, townsville-primary-school, kuo-chuan-presbyterian-primary-school, teck-ghee-primary-school, ai-tong-school, marymount-convent-school, ang-mo-kio-primary-school, kheng-cheng-school, first-toa-payoh-primary-school, st-gabriel-s-primary-school\n4                        clementi-primary-school, pei-tong-primary-school, qifa-primary-school, fairfield-methodist-school-primary, henry-park-primary-school, bukit-timah-primary-school, methodist-girls-school-primary, pei-hwa-presbyterian-primary-school, new-town-primary-school, keming-primary-school\n5                                              junyuan-primary-school, tampines-primary-school, poi-ching-school, yumin-primary-school, chongzheng-primary-school, gongshang-primary-school, angsana-primary-school, st-anthony-s-canossian-primary-school, tampines-north-primary-school, red-swastika-school\n                                          schoolInfo.schoolStatus\n1 Special Assistance Plan (SAP), Gifted Education Programme (GEP)\n2 Special Assistance Plan (SAP), Gifted Education Programme (GEP)\n3 Special Assistance Plan (SAP), Gifted Education Programme (GEP)\n4 Special Assistance Plan (SAP), Gifted Education Programme (GEP)\n5                                Gifted Education Programme (GEP)\n                              schoolInfo.specialNeeds\n1 Allied educators (Learning and behavioural support)\n2 Allied educators (Learning and behavioural support)\n3 Allied educators (Learning and behavioural support)\n4 Allied educators (Learning and behavioural support)\n5 Allied educators (Learning and behavioural support)\n                                                                                                                                                                                                                                                                                      schoolInfo.schoolMission\n1                                                                                                Developing our pupils to reach their fullest potential within a bicultural environment that is steeped in diligence, prudence, respectability and simplicity, thereby enabling them to contribute to society.\n2                                                                                                                                                                                                                                To nurture innovative pupils of exemplary character with a love for learning.\n3                                                                  To establish Catholic High School as a school of distinction in innovative and challenging programmes, a forerunner in character building and a beacon for the mindset of excellence, firmly built upon the foundation of Christian values.\n4                                                                                                                                                                                                                                             Nurturing Gracious Citizens rooted in Values and Chinese Culture\n5 As an Anglican school, we are committed to providing a balanced development of body, mind and spirit for our students and nurturing God-fearing citizens for our nation.Our school values are:  Serve Humbly, Love Sincerely, Learn Continuously, Lead Wisely, Live ResponsiblyOur School motto:  Go Forward\n                                                                                                                                                       schoolInfo.schoolVision\n1                                                                                                                                     Learners of Character, Leaders in Action\n2                                                                                                                                              Love to Learn and Learn to Love\n3 The Catholic High student is a leader, gentleman and bilingual scholar of high integrity and robust character, who is passionate about life, learning and service to others.\n4                                                                                                  A School of Engaged Learners who Lead with Character and Serve with a Heart\n5                                                                          One Hildan Family anchored on Godly values - Nurturing Servant Leaders and Changemakers of Tomorrow\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              schoolInfo.schoolEchos\n1 Nanyang Primary School (NYPS) was established in 1917 as the primary section of The Singapore Nanyang Girls' School. NYPS was separated from the secondary section in 1978 due to increasing pupil enrolment and has functioned as a single-session school since 2004.  It was accorded the Special Assistance Plan (SAP) status in 1984.  In 1990, it began to offer MOE's Gifted Education Programme (GEP)., The school strives to provide an education which prepares the students beyond academic excellence. With the provision of a bi-cultural learning environment, students are nurtured to be learners of character and leaders who will create a positive impact on their communities and society., The Nanyang Curriculum adopts the Head, Heart and Hands approach for the holistic development of the students, as the school believes that internalisation, reflection and putting into action values and skills, are key to learning. The key leverage for the holistic development of students in the Nanyang Curriculum is differentiation which caters to students' different learning needs. Building on its rich Chinese traditions and values while equipping our students with 21st century skills and competencies underscores curriculum innovation in NYPS., An extensive culture for learning and innovation permeates the school as evident in the whole school embarking on the Professional Learning Community (PLC) journey, introducing Lesson Study (LS) as an additional tool to Action Research (AR) and Learning Circle (LC) for teachers to implement curriculum innovations that will deepen their pedagogical knowledge., The school also believes in establishing strong partnership for the holistic development of students.  The key partners comprising the School Management Committee, Nanyang Schools Alumni Association and Parent Teacher Association work collaboratively to preserve the NYPS spirit and identity, reinforcing the values-based culture via role-modelling and their contributions and support.\n2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Guided by our mission to nurture innovative pupils of exemplary character with a love for learning, we are committed to nurturing and developing each child to be the best that he or she can be. We are committed to pushing the boundaries of excellence in curriculum innovation to provide an all-round, values-based education for our students. As a Special Assistance Plan (SAP) school, we will continue to provide a holistic Chinese culture learning experience for our pupils. With strong support from our alumni, parents, the Singapore Hokkien Huay Kuan and hard work from our pupils and teachers, the school will be able to help every pupil realise his or her full potential.\n3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Founded in 1935 by the late Rev. Fr. Edward Becheras, Catholic High School is one of Singapore's highly regarded institutions under the auspices of the Catholic Archdiocese. As a Special Assistance Plan (SAP) school, CHS is grounded in the philosophy of bilingualism and biculturalism. As a Catholic mission school, love is the motivation behind all our actions. We ensure there is Joy of Learning in school life, and that students develop a Mindset of Excellence. The school's core values underpin every member's attitude, actions and aspirations. Our heritage, alumni and parent support group are the strengths that our school draws upon for our model of education, where every student is a Leader, Gentleman and Bilingual Scholar in the making. Offering the unique dual-track model with both the O-Level and Integrated Programmes (IP), the CHS experience offers a curriculum strong in academic distinction, leadership and character development, and sports and aesthetics excellence. Our IP students will spend their first 4 years in CHS before progressing to Eunoia Junior College to complete the IP.\n4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Nan Hua Primary school is a government-aided school which was started in 1917.  As, a Special Assistance Plan (SAP) school, our students learn both the English and Chinese as, first languages. We are also one of the nine Gifted Education Programme (GEP) Centres in, Singapore., Guided by the school's vision and mission and with the school's motto (Loyalty, Filial Piety, Humanity, Love, Courtesy, Righteousness, Integrity and Sense of, Shame) as the foundational values, we aim to help every Nan Hua child develop into, gracious citizen rooted in values and Chinese culture who is also a caring contributor of the, society; one who leads with character and serves with a heart., Our success story strongly builds on the basis that it takes 'a village to raise a child'. We, firmly believe is collaborating closely with our key partners such as the members of, our School Management Committee, Alumni Association, Parent Support Group,, various community partners and parents to help our children in their development., Together with our dedicated teaching team and committed administrative and support, staff, we seek to give our best to nurture each child holistically and provide them with a, student-centric, values-driven education., Nan Hua Primary School distinguishes herself to be a school with rich traditions, a culture of excellence and one that prepares our children for the 21st century.\n5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            St Hilda's Primary School established in 1934 is an Anglican Christian school with boys and girls from multi-ethnic backgrounds   Through generations of committed school leaders, staff, church workers and parents, the school has developed a culture of excellence and care.  One of the key school strengths is the emphasis on moral values and character development.  We have daily devotions and a strong Character and Leadership Development programme.  The school challenges our students to do well not only academically but also in their co-curricular activities.  Every Hildan through his or her six years of education will grow to be an Articulate, Confident, Innovative and Caring Ambassador.\n  schoolInfo.motherTongues                  schoolInfo.affiliatedSchools\n1                  Chinese                     nanyang-girls-high-school\n2                  Chinese                                              \n3                  Chinese catholic-junior-college, catholic-high-school\n4                  Chinese                                              \n5    Chinese, Malay, Tamil                   st-hilda-s-secondary-school\n  admissionRank sportsRank artsRank uniformedGroupsRank\n1            11          1        2                   3\n2            19          7       18                   7\n3             8         15        5                  40\n4             1         77       47                 124\n5             9         39       28                  47\n\n\n\n\n\n\n\n4.2.2 Wrangle Dataset on Primary Schools’ Rankings\nYou may realise from above that primarySch_ranking that the there are quite a few columns prefixed with “schoolInfo$”, which mean that these columns are actually under the column schoolInfo in primarySch_ranking. Using unnest(), the columns inside schoolInfo will be expanded so that we can more easily access schools’ informations like names, addresses.\n\nCodeData\n\n\n\nprimarySch_ranking = unnest(primarySch_ranking, schoolInfo)[,c(1, 5, 9, 14:16, 22, 28:32)] \n\n\n\n\nhead(primarySch_ranking)\n\n# A tibble: 6 × 12\n   rank school…¹ schoo…² address schoo…³ posta…⁴ schoo…⁵ affil…⁶ admis…⁷ sport…⁸\n  <int> <chr>    <chr>   <chr>   <chr>   <chr>   <list>  <list>    <int>   <int>\n1     1 Nanyang… West    52 Kin… Bukit … 268097  <chr>   <chr>        11       1\n2     2 Tao Nan… East    49 Mar… Marine… 449761  <chr>   <chr>        19       7\n3     3 Catholi… North   9 Bish… Bishan  579767  <chr>   <chr>         8      15\n4     4 Nan Hua… West    30 Jal… Clemen… 128806  <chr>   <chr>         1      77\n5     5 St. Hil… East    2 Tamp… Tampin… 529706  <chr>   <chr>         9      39\n6     6 Henry P… West    1 Holl… Bukit … 278790  <chr>   <chr>        12       9\n# … with 2 more variables: artsRank <int>, uniformedGroupsRank <int>, and\n#   abbreviated variable names ¹​schoolName, ²​schoolZone, ³​schoolArea,\n#   ⁴​postalCode, ⁵​schoolStatus, ⁶​affiliatedSchools, ⁷​admissionRank, ⁸​sportsRank\n\n\n\n\n\n\n\n4.2.3 Merging Geospatial and Aspatial Data of Primary Schools\nUsing postal codes, we will merge them together!\n\nCodeData\n\n\n\nprimarySch_ranking_sf = merge(primarySch_ranking, primarySch_sf, by.x='postalCode', by.y=\"SCH_POSTAL_CODE\")\n\n\n\n\nhead(primarySch_ranking_sf, 5)\n\n  postalCode rank                  schoolName schoolZone\n1     088256  182   Cantonment Primary School      South\n2     099757  101              Chij (Kellock)      South\n3     099840   27    Radin Mas Primary School      South\n4     109100  168 Blangah Rise Primary School      South\n5     128104   33         Qifa Primary School       West\n                   address  schoolArea schoolStatus         affiliatedSchools\n1       1 Cantonment Close Bukit Merah                                       \n2      1 Bukit Teresa Road Bukit Merah              chij-st-theresa-s-convent\n3    1 Bukit Purmei Avenue Bukit Merah                                       \n4 91 Telok Blangah Heights Bukit Merah                                       \n5     50 West Coast Avenue    Clementi                                       \n  admissionRank sportsRank artsRank uniformedGroupsRank\n1           132        153      163                 153\n2           104         29       82                 163\n3            10         74       83                  13\n4           132        167      173                  61\n5            61         26       10                 106\n                   SCHOOLNAME SCH_HSE_BLK_NUM HSE_BLK_NUM         SCH_ROAD_NAME\n1   CANTONMENT PRIMARY SCHOOL               1           1      CANTONMENT CLOSE\n2              CHIJ (KELLOCK)               1           1     BUKIT TERESA ROAD\n3    RADIN MAS PRIMARY SCHOOL               1           1   BUKIT PURMEI AVENUE\n4 BLANGAH RISE PRIMARY SCHOOL              91          91 TELOK BLANGAH HEIGHTS\n5         QIFA PRIMARY SCHOOL              50          50     WEST COAST AVENUE\n                   geometry\n1  POINT (28735.3 28695.24)\n2 POINT (27413.63 28588.52)\n3 POINT (26951.05 28619.79)\n4 POINT (25215.83 28728.96)\n5  POINT (19496.7 32798.72)\n\n\n\n\n\nBut sadly the merged sf has 180 rows while the original geospatial dataset has 181 rows, meaning there is a school with mismatch data.\n\n4.2.3.0.1 Finding Mismatched Row\nWe will first order primarySch_ranking_sf according to their ranking.\n\nprimarySch__order_ranking_sf = primarySch_ranking_sf[order(primarySch_ranking_sf$rank),]\n\nWe then loop through the primarySch_ranking, the original DataFrame, to find the schools not in the merged sf.\nNote that there are actually 186 rows in primarySch_ranking, meaning there is a difference of 6 rows.\n\nschools_dont_exist = list()\nfor (i in 1:nrow(primarySch_ranking)){\n  if (i %in% primarySch__order_ranking_sf$rank == FALSE){\n    schools_dont_exist <- append(schools_dont_exist, i)\n  }\n}\n\nschools <- data.frame()\n\nfor (sch in schools_dont_exist){\n  schools = rbind(schools, primarySch_ranking[primarySch_ranking$rank == sch,])\n}\nschools\n\n# A tibble: 6 × 12\n   rank school…¹ schoo…² address schoo…³ posta…⁴ schoo…⁵ affil…⁶ admis…⁷ sport…⁸\n  <int> <chr>    <chr>   <chr>   <chr>   <chr>   <list>  <list>    <int>   <int>\n1   116 Pioneer… West    23 Jur… Jurong… 649076  <chr>   <chr>       132     103\n2   119 Stamfor… South   1 Vict… Central 198423  <chr>   <chr>       132      42\n3   134 Eunos P… East    95 Jal… Geylang 419529  <chr>   <chr>       132      88\n4   137 Guangya… South   6 Bish… Bishan  579806  <chr>   <chr>       132     145\n5   165 Juying … West    31 Jur… Jurong… 649037  <chr>   <chr>       132     116\n6   171 Angsana… East    3 Tamp… Tampin… 529366  <chr>   <chr>       132     150\n# … with 2 more variables: artsRank <int>, uniformedGroupsRank <int>, and\n#   abbreviated variable names ¹​schoolName, ²​schoolZone, ³​schoolArea,\n#   ⁴​postalCode, ⁵​schoolStatus, ⁶​affiliatedSchools, ⁷​admissionRank, ⁸​sportsRank\n\n\nSo… we need to look through all the current situations of all 6 schools and determine, which one is the one in OneMapSG’s geospatial data.\n\nPioneer Primary School merged in Juying Primary School in 2021. In addition, the merged school is moving to a new location in 2026, hence not opening from its Primary 1 Registration from 2021 to 2024\nStamford Primary School has merged with Farrer Park Primary School in 2023.\nEunos Primary School has merged with Telok Kurau Primary School.\nGuangyang Primary School has merged with Townsville Primary School.\n\nWith that, Angsana Primary School is the row that has its postal code different.\nChecking the school’s website, Angsana Primary School’s postal code is actually 528565. Hence we need to change primarySch_ranking’s postal code to facilitate merging.\n\nprimarySch_ranking[primarySch_ranking$schoolName == \"Angsana Primary School\",\"postalCode\"] = '528565'\n\nprimarySch_ranking_df = merge(primarySch_ranking, primarySch_sf, by.x='postalCode', by.y=\"SCH_POSTAL_CODE\")\nnrow(primarySch_ranking_df)\n\n[1] 181\n\nprimarySch_ranking_sf <- st_as_sf(primarySch_ranking_df) %>% st_transform(crs = 3414)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#masterplan-subzone-2019",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#masterplan-subzone-2019",
    "title": "Take-home Exercise 3",
    "section": "4.3 Masterplan Subzone 2019",
    "text": "4.3 Masterplan Subzone 2019\nLooking at the subzone dataset, it seems that there are invalid geometries in it.\n\nlength(which(st_is_valid(subzone_sf) == FALSE))\n\n[1] 6\n\n\nThus, we will be using st_make_valid() to correct them.\n\nsubzone_sf <- st_make_valid(subzone_sf)\nlength(which(st_is_valid(subzone_sf) == FALSE))\n\n[1] 0"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#hdb",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#hdb",
    "title": "Take-home Exercise 3",
    "section": "4.5 HDB",
    "text": "4.5 HDB\nThe sf DataFrame we are acquired from Data.gov.sg does not have any geospatial data. But it has the block and streetname that we can derived the data from, through OpenMapSG API.\n\nlibrary(httr)\ngeocode <- function(block, streetname=\"\") {\n  base_url <- \"https://developers.onemap.sg/commonapi/search\"\n  address <- paste(block, streetname, sep = \" \")\n  query <- list(\"searchVal\" = address, \n                \"returnGeom\" = \"Y\",\n                \"getAddrDetails\" = \"N\",\n                \"pageNum\" = \"1\")\n  \n  res <- GET(base_url, query = query)\n  restext<-content(res, as=\"text\")\n  \n  output <- fromJSON(restext)  %>% \n    as.data.frame %>%\n    select(results.LATITUDE, results.LONGITUDE)\n\n  return(output)\n}\n\n\nGet CoordinatesWrite to SHPRead SHP\n\n\n\nresale_prices_total$LATITUDE <- 0\nresale_prices_total$LONGITUDE <- 0\n\nfor (i in 1:nrow(resale_prices_total)){\n  temp_output <- geocode(resale_prices_total[i, 4], resale_prices_total[i, 5])\n  \n  resale_prices_total$LATITUDE[i] <- temp_output$results.LATITUDE\n  resale_prices_total$LONGITUDE[i] <- temp_output$results.LONGITUDE\n}\n\n\n\n\nresale_prices_sf <- st_as_sf(resale_prices_total, coords=c(\"LONGITUDE\", \"LATITUDE\"), crs=4326)\nst_write(resale_prices_sf, \"data/geospatial/resale_prices/resale_prices.shp\")\n\n\n\n\nresale_prices_sf <- st_read(dsn=\"data/geospatial/resale_prices\", layer=\"resale_prices\") %>% st_transform(crs = 3414)\n\nReading layer `resale_prices' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\resale_prices' \n  using driver `ESRI Shapefile'\nSimple feature collection with 60218 features and 12 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 103.6442 ymin: 1.27038 xmax: 103.9878 ymax: 1.457071\nGeodetic CRS:  WGS 84\n\n\n\n\n\n\n4.5.1 Merge with HDB Status\nWe also have data on the upgrades done on these buildings. It will be good to separate the both two types of upgrades.\nNote that MUP is actually then the precessor of HIP before 2007. Differentiating the upgrades then ables us to see if the timing of upgrades has an impact on the resell prices.\n\n4.5.1.1 Home Improvement Programme (HIP)\nHIP is described as HDB’s programme to “resolve common maintenance problems of ageing flats”.\n\nhdb_hip <- hdb_upgrades %>% filter(TYPE == \"HIP\")\ncolnames(hdb_hip)[3] =\"HIP\"\n\n\nresale_prices_upgrade_sf <- merge(resale_prices_sf, hdb_hip, by.x=c(\"block\", \"strt_nm\"), by.y=c(\"BLK\", \"STREET\"), all.x = TRUE)\n\n\n\n4.5.1.2 Main Upgrading Programme (MUP)\nBefore 2007, MUP was dedicated to do the same things.\n\nhdb_mup <- hdb_upgrades %>% filter(TYPE == \"MUP\")\ncolnames(hdb_mup)[3] =\"MUP\"\n\n\nresale_prices_upgrade_sf <- merge(resale_prices_upgrade_sf, hdb_mup, by.x=c(\"block\", \"strt_nm\"), by.y=c(\"BLK\", \"STREET\"), all.x = TRUE)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#top-primary-schools",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#top-primary-schools",
    "title": "Take-home Exercise 3",
    "section": "4.7 Top Primary Schools",
    "text": "4.7 Top Primary Schools\nIt is difficult to really determine what is the appropriate number of top schools to filter for, since schools can very much have their own specialties and histories (like alumni communities) that can affect the data, outside of the ones used by the website we scrapped the ranking data from.\nHence top 20 is admittedly derived after I looked through the dataset and judged that the top 20 schools are really known to be some of the best primary schools, which sentiments I believe will be similar among the general Singapore population.\n\ntop_primarySch_ranking_sf <- primarySch_ranking_sf %>% filter(rank <= 20)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#primary-schools-1",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#primary-schools-1",
    "title": "Take-home Exercise 3",
    "section": "4.2 Primary Schools",
    "text": "4.2 Primary Schools\n\n4.2.1 Scraping of Ranking Data\nTo make full use of primary schools as an independent variable, we need to merge the ranking we get from Schlah’s Primary School Rankings. It provides substantial data in how it derived its ranking, which offers a more objective rank.\nWe then scraped this data from the website.\n\nCodeData\n\n\n\nprimarySch_ranking <- fromJSON(\"data/geospatial/primaryschools/primaryschools_rankings.json\")[[\"props\"]][[\"pageProps\"]][[\"sortedSchools\"]]\n\n\n\n\nhead(primarySch_ranking, 5)\n\n  rank total     schoolInfo.schoolSlug schoolInfo.schoolCode\n1    1   186    nanyang-primary-school                  5258\n2    2   186            tao-nan-school                  5240\n3    3   186      catholic-high-school                  7102\n4    4   186    nan-hua-primary-school                  5622\n5    5   186 st-hilda-s-primary-school                  5025\n       schoolInfo.schoolName schoolInfo.schoolNameZh\n1     Nanyang Primary School                南洋小学\n2             Tao Nan School                        \n3       Catholic High School                公教中学\n4     Nan Hua Primary School             南 华 小 学\n5 St. Hilda's Primary School            圣希尔达小学\n                                      schoolInfo.schoolLogoUrl\n1   https://beta.moe.gov.sg/uploads/nanyang-primary-school.jpg\n2           https://beta.moe.gov.sg/uploads/tao-nan-school.jpg\n3     https://beta.moe.gov.sg/uploads/catholic-high-school.jpg\n4   https://beta.moe.gov.sg/uploads/nan-hua-primary-school.jpg\n5 https://beta.moe.gov.sg/uploads/st-hildas-primary-school.jpg\n  schoolInfo.schoolLevel schoolInfo.schoolZone   schoolInfo.schoolType\n1         Primary School                  West Government-Aided School\n2         Primary School                  East Government-Aided School\n3         Primary School                 North Government-Aided School\n4         Primary School                  West Government-Aided School\n5         Primary School                  East Government-Aided School\n  schoolInfo.schoolNature schoolInfo.schoolSession\n1            Co-Ed School           Single Session\n2            Co-Ed School           Single Session\n3            Boys' School           Single Session\n4            Co-Ed School           Single Session\n5            Co-Ed School           Single Session\n                   schoolInfo.website schoolInfo.address schoolInfo.schoolArea\n1         https://www.nyps.moe.edu.sg     52 King's Road           Bukit Timah\n2       https://www.taonan.moe.edu.sg 49 Marine Crescent         Marine Parade\n3 https://www.catholichigh.moe.edu.sg 9 Bishan Street 22                Bishan\n4    https://www.nanhuapri.moe.edu.sg   30 Jalan Lempeng              Clementi\n5         https://www.shps.moe.edu.sg   2 Tampines Ave 3              Tampines\n  schoolInfo.postalCode schoolInfo.tel      schoolInfo.email\n1                268097       64672677       nyps@moe.edu.sg\n2                449761       64428307 taonan_sch@moe.edu.sg\n3                579767       64589869        chs@moe.edu.sg\n4                128806       67788050       nhps@moe.edu.sg\n5                529706       67811916       shps@moe.edu.sg\n  schoolInfo.latitude schoolInfo.longitude\n1            1.320847             103.8078\n2            1.305285             103.9116\n3            1.354723             103.8449\n4            1.306116             103.7651\n5            1.349350             103.9379\n                                                                                                                                                                                                                                                                                       schoolInfo.nearestSlugs\n1 raffles-girls-primary-school, singapore-chinese-girls-primary-school, new-town-primary-school, henry-park-primary-school, queenstown-primary-school, methodist-girls-school-primary, anglo-chinese-school-primary, fairfield-methodist-school-primary, alexandra-primary-school, anglo-chinese-school-junior\n2                                                                    chij-katong-primary, ngee-ann-primary-school, haig-girls-school, st-stephen-s-school, opera-estate-primary-school, eunos-primary-school, kong-hwa-school, maha-bodhi-school, telok-kurau-primary-school, geylang-methodist-school-primary\n3                                   guangyang-primary-school, townsville-primary-school, kuo-chuan-presbyterian-primary-school, teck-ghee-primary-school, ai-tong-school, marymount-convent-school, ang-mo-kio-primary-school, kheng-cheng-school, first-toa-payoh-primary-school, st-gabriel-s-primary-school\n4                        clementi-primary-school, pei-tong-primary-school, qifa-primary-school, fairfield-methodist-school-primary, henry-park-primary-school, bukit-timah-primary-school, methodist-girls-school-primary, pei-hwa-presbyterian-primary-school, new-town-primary-school, keming-primary-school\n5                                              junyuan-primary-school, tampines-primary-school, poi-ching-school, yumin-primary-school, chongzheng-primary-school, gongshang-primary-school, angsana-primary-school, st-anthony-s-canossian-primary-school, tampines-north-primary-school, red-swastika-school\n                                          schoolInfo.schoolStatus\n1 Special Assistance Plan (SAP), Gifted Education Programme (GEP)\n2 Special Assistance Plan (SAP), Gifted Education Programme (GEP)\n3 Special Assistance Plan (SAP), Gifted Education Programme (GEP)\n4 Special Assistance Plan (SAP), Gifted Education Programme (GEP)\n5                                Gifted Education Programme (GEP)\n                              schoolInfo.specialNeeds\n1 Allied educators (Learning and behavioural support)\n2 Allied educators (Learning and behavioural support)\n3 Allied educators (Learning and behavioural support)\n4 Allied educators (Learning and behavioural support)\n5 Allied educators (Learning and behavioural support)\n                                                                                                                                                                                                                                                                                      schoolInfo.schoolMission\n1                                                                                                Developing our pupils to reach their fullest potential within a bicultural environment that is steeped in diligence, prudence, respectability and simplicity, thereby enabling them to contribute to society.\n2                                                                                                                                                                                                                                To nurture innovative pupils of exemplary character with a love for learning.\n3                                                                  To establish Catholic High School as a school of distinction in innovative and challenging programmes, a forerunner in character building and a beacon for the mindset of excellence, firmly built upon the foundation of Christian values.\n4                                                                                                                                                                                                                                             Nurturing Gracious Citizens rooted in Values and Chinese Culture\n5 As an Anglican school, we are committed to providing a balanced development of body, mind and spirit for our students and nurturing God-fearing citizens for our nation.Our school values are:  Serve Humbly, Love Sincerely, Learn Continuously, Lead Wisely, Live ResponsiblyOur School motto:  Go Forward\n                                                                                                                                                       schoolInfo.schoolVision\n1                                                                                                                                     Learners of Character, Leaders in Action\n2                                                                                                                                              Love to Learn and Learn to Love\n3 The Catholic High student is a leader, gentleman and bilingual scholar of high integrity and robust character, who is passionate about life, learning and service to others.\n4                                                                                                  A School of Engaged Learners who Lead with Character and Serve with a Heart\n5                                                                          One Hildan Family anchored on Godly values - Nurturing Servant Leaders and Changemakers of Tomorrow\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              schoolInfo.schoolEchos\n1 Nanyang Primary School (NYPS) was established in 1917 as the primary section of The Singapore Nanyang Girls' School. NYPS was separated from the secondary section in 1978 due to increasing pupil enrolment and has functioned as a single-session school since 2004.  It was accorded the Special Assistance Plan (SAP) status in 1984.  In 1990, it began to offer MOE's Gifted Education Programme (GEP)., The school strives to provide an education which prepares the students beyond academic excellence. With the provision of a bi-cultural learning environment, students are nurtured to be learners of character and leaders who will create a positive impact on their communities and society., The Nanyang Curriculum adopts the Head, Heart and Hands approach for the holistic development of the students, as the school believes that internalisation, reflection and putting into action values and skills, are key to learning. The key leverage for the holistic development of students in the Nanyang Curriculum is differentiation which caters to students' different learning needs. Building on its rich Chinese traditions and values while equipping our students with 21st century skills and competencies underscores curriculum innovation in NYPS., An extensive culture for learning and innovation permeates the school as evident in the whole school embarking on the Professional Learning Community (PLC) journey, introducing Lesson Study (LS) as an additional tool to Action Research (AR) and Learning Circle (LC) for teachers to implement curriculum innovations that will deepen their pedagogical knowledge., The school also believes in establishing strong partnership for the holistic development of students.  The key partners comprising the School Management Committee, Nanyang Schools Alumni Association and Parent Teacher Association work collaboratively to preserve the NYPS spirit and identity, reinforcing the values-based culture via role-modelling and their contributions and support.\n2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Guided by our mission to nurture innovative pupils of exemplary character with a love for learning, we are committed to nurturing and developing each child to be the best that he or she can be. We are committed to pushing the boundaries of excellence in curriculum innovation to provide an all-round, values-based education for our students. As a Special Assistance Plan (SAP) school, we will continue to provide a holistic Chinese culture learning experience for our pupils. With strong support from our alumni, parents, the Singapore Hokkien Huay Kuan and hard work from our pupils and teachers, the school will be able to help every pupil realise his or her full potential.\n3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Founded in 1935 by the late Rev. Fr. Edward Becheras, Catholic High School is one of Singapore's highly regarded institutions under the auspices of the Catholic Archdiocese. As a Special Assistance Plan (SAP) school, CHS is grounded in the philosophy of bilingualism and biculturalism. As a Catholic mission school, love is the motivation behind all our actions. We ensure there is Joy of Learning in school life, and that students develop a Mindset of Excellence. The school's core values underpin every member's attitude, actions and aspirations. Our heritage, alumni and parent support group are the strengths that our school draws upon for our model of education, where every student is a Leader, Gentleman and Bilingual Scholar in the making. Offering the unique dual-track model with both the O-Level and Integrated Programmes (IP), the CHS experience offers a curriculum strong in academic distinction, leadership and character development, and sports and aesthetics excellence. Our IP students will spend their first 4 years in CHS before progressing to Eunoia Junior College to complete the IP.\n4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Nan Hua Primary school is a government-aided school which was started in 1917.  As, a Special Assistance Plan (SAP) school, our students learn both the English and Chinese as, first languages. We are also one of the nine Gifted Education Programme (GEP) Centres in, Singapore., Guided by the school's vision and mission and with the school's motto (Loyalty, Filial Piety, Humanity, Love, Courtesy, Righteousness, Integrity and Sense of, Shame) as the foundational values, we aim to help every Nan Hua child develop into, gracious citizen rooted in values and Chinese culture who is also a caring contributor of the, society; one who leads with character and serves with a heart., Our success story strongly builds on the basis that it takes 'a village to raise a child'. We, firmly believe is collaborating closely with our key partners such as the members of, our School Management Committee, Alumni Association, Parent Support Group,, various community partners and parents to help our children in their development., Together with our dedicated teaching team and committed administrative and support, staff, we seek to give our best to nurture each child holistically and provide them with a, student-centric, values-driven education., Nan Hua Primary School distinguishes herself to be a school with rich traditions, a culture of excellence and one that prepares our children for the 21st century.\n5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            St Hilda's Primary School established in 1934 is an Anglican Christian school with boys and girls from multi-ethnic backgrounds   Through generations of committed school leaders, staff, church workers and parents, the school has developed a culture of excellence and care.  One of the key school strengths is the emphasis on moral values and character development.  We have daily devotions and a strong Character and Leadership Development programme.  The school challenges our students to do well not only academically but also in their co-curricular activities.  Every Hildan through his or her six years of education will grow to be an Articulate, Confident, Innovative and Caring Ambassador.\n  schoolInfo.motherTongues                  schoolInfo.affiliatedSchools\n1                  Chinese                     nanyang-girls-high-school\n2                  Chinese                                              \n3                  Chinese catholic-junior-college, catholic-high-school\n4                  Chinese                                              \n5    Chinese, Malay, Tamil                   st-hilda-s-secondary-school\n  admissionRank sportsRank artsRank uniformedGroupsRank\n1            11          1        2                   3\n2            19          7       18                   7\n3             8         15        5                  40\n4             1         77       47                 124\n5             9         39       28                  47\n\n\n\n\n\n\n\n4.2.2 Wrangle Dataset on Primary Schools’ Rankings\nYou may realise from above that primarySch_ranking that the there are quite a few columns prefixed with “schoolInfo$”, which mean that these columns are actually under the column schoolInfo in primarySch_ranking. Using unnest(), the columns inside schoolInfo will be expanded so that we can more easily access schools’ informations like names, addresses.\n\nCodeData\n\n\n\nprimarySch_ranking = unnest(primarySch_ranking, schoolInfo)[,c(1, 5, 9, 14:16, 22, 28:32)] \n\n\n\n\nhead(primarySch_ranking)\n\n# A tibble: 6 × 12\n   rank school…¹ schoo…² address schoo…³ posta…⁴ schoo…⁵ affil…⁶ admis…⁷ sport…⁸\n  <int> <chr>    <chr>   <chr>   <chr>   <chr>   <list>  <list>    <int>   <int>\n1     1 Nanyang… West    52 Kin… Bukit … 268097  <chr>   <chr>        11       1\n2     2 Tao Nan… East    49 Mar… Marine… 449761  <chr>   <chr>        19       7\n3     3 Catholi… North   9 Bish… Bishan  579767  <chr>   <chr>         8      15\n4     4 Nan Hua… West    30 Jal… Clemen… 128806  <chr>   <chr>         1      77\n5     5 St. Hil… East    2 Tamp… Tampin… 529706  <chr>   <chr>         9      39\n6     6 Henry P… West    1 Holl… Bukit … 278790  <chr>   <chr>        12       9\n# … with 2 more variables: artsRank <int>, uniformedGroupsRank <int>, and\n#   abbreviated variable names ¹​schoolName, ²​schoolZone, ³​schoolArea,\n#   ⁴​postalCode, ⁵​schoolStatus, ⁶​affiliatedSchools, ⁷​admissionRank, ⁸​sportsRank\n\n\n\n\n\n\n\n4.2.3 Merging Geospatial and Aspatial Data of Primary Schools\nUsing postal codes, we will merge them together!\n\nCodeData\n\n\n\nprimarySch_ranking_sf = merge(primarySch_ranking, primarySch_sf, by.x='postalCode', by.y=\"SCH_POSTAL_CODE\")\n\n\n\n\nhead(primarySch_ranking_sf, 5)\n\n  postalCode rank                  schoolName schoolZone\n1     088256  182   Cantonment Primary School      South\n2     099757  101              Chij (Kellock)      South\n3     099840   27    Radin Mas Primary School      South\n4     109100  168 Blangah Rise Primary School      South\n5     128104   33         Qifa Primary School       West\n                   address  schoolArea schoolStatus         affiliatedSchools\n1       1 Cantonment Close Bukit Merah                                       \n2      1 Bukit Teresa Road Bukit Merah              chij-st-theresa-s-convent\n3    1 Bukit Purmei Avenue Bukit Merah                                       \n4 91 Telok Blangah Heights Bukit Merah                                       \n5     50 West Coast Avenue    Clementi                                       \n  admissionRank sportsRank artsRank uniformedGroupsRank\n1           132        153      163                 153\n2           104         29       82                 163\n3            10         74       83                  13\n4           132        167      173                  61\n5            61         26       10                 106\n                   SCHOOLNAME SCH_HSE_BLK_NUM HSE_BLK_NUM         SCH_ROAD_NAME\n1   CANTONMENT PRIMARY SCHOOL               1           1      CANTONMENT CLOSE\n2              CHIJ (KELLOCK)               1           1     BUKIT TERESA ROAD\n3    RADIN MAS PRIMARY SCHOOL               1           1   BUKIT PURMEI AVENUE\n4 BLANGAH RISE PRIMARY SCHOOL              91          91 TELOK BLANGAH HEIGHTS\n5         QIFA PRIMARY SCHOOL              50          50     WEST COAST AVENUE\n                   geometry\n1  POINT (28735.3 28695.24)\n2 POINT (27413.63 28588.52)\n3 POINT (26951.05 28619.79)\n4 POINT (25215.83 28728.96)\n5  POINT (19496.7 32798.72)\n\n\n\n\n\nBut sadly the merged sf has 180 rows while the original geospatial dataset has 181 rows, meaning there is a school with mismatch data.\n\n4.2.3.0.1 Finding Mismatched Row\nWe will first order primarySch_ranking_sf according to their ranking.\n\nprimarySch__order_ranking_sf = primarySch_ranking_sf[order(primarySch_ranking_sf$rank),]\n\nWe then loop through the primarySch_ranking, the original DataFrame, to find the schools not in the merged sf.\nNote that there are actually 186 rows in primarySch_ranking, meaning there is a difference of 6 rows.\n\nschools_dont_exist = list()\nfor (i in 1:nrow(primarySch_ranking)){\n  if (i %in% primarySch__order_ranking_sf$rank == FALSE){\n    schools_dont_exist <- append(schools_dont_exist, i)\n  }\n}\n\nschools <- data.frame()\n\nfor (sch in schools_dont_exist){\n  schools = rbind(schools, primarySch_ranking[primarySch_ranking$rank == sch,])\n}\nschools\n\n# A tibble: 6 × 12\n   rank school…¹ schoo…² address schoo…³ posta…⁴ schoo…⁵ affil…⁶ admis…⁷ sport…⁸\n  <int> <chr>    <chr>   <chr>   <chr>   <chr>   <list>  <list>    <int>   <int>\n1   116 Pioneer… West    23 Jur… Jurong… 649076  <chr>   <chr>       132     103\n2   119 Stamfor… South   1 Vict… Central 198423  <chr>   <chr>       132      42\n3   134 Eunos P… East    95 Jal… Geylang 419529  <chr>   <chr>       132      88\n4   137 Guangya… South   6 Bish… Bishan  579806  <chr>   <chr>       132     145\n5   165 Juying … West    31 Jur… Jurong… 649037  <chr>   <chr>       132     116\n6   171 Angsana… East    3 Tamp… Tampin… 529366  <chr>   <chr>       132     150\n# … with 2 more variables: artsRank <int>, uniformedGroupsRank <int>, and\n#   abbreviated variable names ¹​schoolName, ²​schoolZone, ³​schoolArea,\n#   ⁴​postalCode, ⁵​schoolStatus, ⁶​affiliatedSchools, ⁷​admissionRank, ⁸​sportsRank\n\n\nSo… we need to look through all the current situations of all 6 schools and determine, which one is the one in OneMapSG’s geospatial data.\n\nPioneer Primary School merged in Juying Primary School in 2021. In addition, the merged school is moving to a new location in 2026, hence not opening from its Primary 1 Registration from 2021 to 2024\nStamford Primary School has merged with Farrer Park Primary School in 2023.\nEunos Primary School has merged with Telok Kurau Primary School.\nGuangyang Primary School has merged with Townsville Primary School.\n\nWith that, Angsana Primary School is the row that has its postal code different.\nChecking the school’s website, Angsana Primary School’s postal code is actually 528565. Hence we need to change primarySch_ranking’s postal code to facilitate merging.\n\nprimarySch_ranking[primarySch_ranking$schoolName == \"Angsana Primary School\",\"postalCode\"] = '528565'\n\nprimarySch_ranking_df = merge(primarySch_ranking, primarySch_sf, by.x='postalCode', by.y=\"SCH_POSTAL_CODE\")\nnrow(primarySch_ranking_df)\n\n[1] 181\n\nprimarySch_ranking_sf <- st_as_sf(primarySch_ranking_df) %>% st_transform(crs = 3414)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#proximity---distance",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#proximity---distance",
    "title": "Take-home Exercise 3",
    "section": "5.1 Proximity - Distance",
    "text": "5.1 Proximity - Distance\nBelow is the function that enables us to attain the distance between a HDB apartment and specific facilities.\n\nproximity_calculator <- function(original_sf, derived_sf, column_name) {\n  dist_matrix <- st_distance(original_sf, derived_sf)\n  original_sf[, column_name] <- rowMins(dist_matrix) / 1000\n  return(original_sf)\n}\n\n\nresale_proximity_sf <- resale_prices_upgrade_sf \nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = cbd_sf, column_name = \"PROX_CBD\")\nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = hawkercentre_sf, column_name=\"PROX_HAWKER\")\nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = eldercare_sf, column_name = \"PROX_ELDERCARE\")\nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = parks_sf, column_name=\"PROX_PARK\")\nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = kindergartens_sf, column_name = \"PROX_KINDERGARTEN\")\nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = childcare_sf, column_name = \"PROX_CHILDCARE\")\nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = busstop_sf, column_name = \"PROX_BUSSTOP\")\nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = mrt_sf, column_name = \"PROX_MRT\")\nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = primarySch_ranking_sf, column_name = \"PROX_SCH\")\nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = supermarkets_sf, column_name=\"PROX_SUPERMARKET\")\nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = malls_sf, column_name = \"PROX_MALL\")\nresale_proximity_sf <- proximity_calculator(original_sf = resale_proximity_sf, derived_sf = top_primarySch_ranking_sf, column_name = \"PROX_TOPSCH\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#proximity---number",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#proximity---number",
    "title": "Take-home Exercise 3",
    "section": "5.2 Proximity - Number",
    "text": "5.2 Proximity - Number\nBelow is then the function that enables us to attain the number of such facilities within specific distances of a HDB apartment.\n\nlibrary(units)\nradius_calculator <- function(original_sf, derived_sf, column_name, radius) {\n  dist_matrix <- st_distance(original_sf, derived_sf) %>%\n    drop_units() %>%\n    as.data.frame()\n  original_sf[,column_name] <- rowSums(dist_matrix <= radius)\n  return(original_sf)\n}\n\n\nresale_proximity_sf <- radius_calculator(resale_proximity_sf, kindergartens_sf, \"NUM_KINDERGARTEN\", 350)\nresale_proximity_sf <- radius_calculator(resale_proximity_sf, childcare_sf, \"NUM_CHILDCARE\", 350)\nresale_proximity_sf <- radius_calculator(resale_proximity_sf, busstop_sf, \"NUM_BUSSTOP\", 350)\nresale_proximity_sf <- radius_calculator(resale_proximity_sf, primarySch_ranking_sf, \"NUM_SCH\", 1000)\nresale_proximity_sf <- radius_calculator(resale_proximity_sf, top_primarySch_ranking_sf, \"NUM_TOPSCH\", 1000)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#save-to-shp",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#save-to-shp",
    "title": "Take-home Exercise 3",
    "section": "5.3 Save to SHP",
    "text": "5.3 Save to SHP\n\nSave to SHPRead SHP\n\n\n\nst_write(resale_proximity_sf, \"data/geospatial/resale_proximity/resale_proximity.shp\")\n\n\n\n\nresale_proximity_sf <- st_read(dsn=\"data/geospatial/resale_proximity\", layer=\"resale_proximity\")\n\nReading layer `resale_proximity' from data source \n  `C:\\deadline2359\\IS415-GAA\\Take-home_Ex\\Take-home_Ex03\\data\\geospatial\\resale_proximity' \n  using driver `ESRI Shapefile'\nSimple feature collection with 60218 features and 32 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 6958.193 ymin: 28097.64 xmax: 45192.3 ymax: 48741.06\nProjected CRS: SVY21 / Singapore TM"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#save-to-rds",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#save-to-rds",
    "title": "Take-home Exercise 3",
    "section": "6.6 Save to RDS",
    "text": "6.6 Save to RDS\n\nRename ColumnsWrite to RDSRead RDS\n\n\n\nfinal_resale_prices <- resale_type_loc_sf\nfinal_resale_prices <- final_resale_prices %>% \n        rename(\"storey_range\" = \"stry_rn\",\n               \"street_name\" = \"strt_nm\",\n               \"flat_type\" = \"flt_typ\",\n               \"floor_area_sqm\" = \"flr_r_s\",\n               \"flat_model\" = \"flt_mdl\",\n               \"lease_commence_date\" = \"ls_cmm_\",\n               \"remaining_lease_original\" = \"rmnng_l\",\n               \"resale_price\" = \"rsl_prc\",\n               \"PROX_CBD\" = \"PROX_CB\",\n               \"PROX_HAWKER\" = \"PROX_HA\",\n               \"PROX_ELDERCARE\" = \"PROX_EL\",\n               \"PROX_KINDERGARTEN\" = \"PROX_KI\",\n               \"PROX_CHILDCARE\" = \"PROX_CH\",\n               \"PROX_BUSSTOP\" = \"PROX_BU\",\n               \"PROX_MRT\" = \"PROX_MR\",\n               \"PROX_SCH\" = \"PROX_SC\",\n               \"PROX_TOPSCH\" = \"PROX_TO\",\n               \"PROX_SUPERMARKET\" = \"PROX_SU\",\n               \"PROX_MALL\" = \"PROX_MA\",\n               \"NUM_KINDERGARTEN\" = \"NUM_KIN\",\n               \"NUM_CHILDCARE\" = \"NUM_CHI\",\n               \"NUM_BUSSTOP\" = \"NUM_BUS\",\n               \"NUM_TOPSCH\" = \"NUM_TOP\")\nnames(final_resale_prices)\n\n [1] \"block\"                    \"street_name\"             \n [3] \"month\"                    \"town\"                    \n [5] \"flat_type\"                \"storey_range\"            \n [7] \"floor_area_sqm\"           \"flat_model\"              \n [9] \"lease_commence_date\"      \"remaining_lease_original\"\n[11] \"resale_price\"             \"date\"                    \n[13] \"HIP\"                      \"TOWN_x\"                  \n[15] \"MUP\"                      \"TOWN_y\"                  \n[17] \"PROX_CBD\"                 \"PROX_HAWKER\"             \n[19] \"PROX_ELDERCARE\"           \"PROX_KINDERGARTEN\"       \n[21] \"PROX_CHILDCARE\"           \"PROX_BUSSTOP\"            \n[23] \"PROX_MRT\"                 \"PROX_SCH\"                \n[25] \"PROX_SUPERMARKET\"         \"PROX_MALL\"               \n[27] \"PROX_TOPSCH\"              \"NUM_KINDERGARTEN\"        \n[29] \"NUM_CHILDCARE\"            \"NUM_BUSSTOP\"             \n[31] \"NUM_SCH\"                  \"NUM_TOPSCH\"              \n[33] \"year\"                     \"age\"                     \n[35] \"geometry\"                \n\n\n\n\n\nwrite_rds(final_resale_prices, \"data/model/final_resale_prices.rds\")\n\n\n\n\nfinal_resale_prices <- read_rds(\"data/model/final_resale_prices.rds\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#distribution-of-resale-prices",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#distribution-of-resale-prices",
    "title": "Take-home Exercise 3",
    "section": "7.2 Distribution of Resale Prices",
    "text": "7.2 Distribution of Resale Prices\n\nlibrary(patchwork)\nprice_3rm <- ggplot(data=final_resale_prices, aes(x=`resale_price`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"orange\")\n\nprice_all <- ggplot(data=resale_prices_sf, aes(x=`rsl_prc`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"lightblue\")\n\nprice_3rm + price_all\n\n\n\n\nWe can see that 3-room HDB flats lean to the right, like all flats. But noticeably, the prices are definitely lower than other sorts of flats, usually with more actual rooms."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#distribution-of-resale-prices-1",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#distribution-of-resale-prices-1",
    "title": "Take-home Exercise 3",
    "section": "7.3 Distribution of Resale Prices",
    "text": "7.3 Distribution of Resale Prices\nLooks like 4-room apartments have the most transactions. Whereas 5-room and 3-room flats come second and third respectively. There could be more interest in these sort of flats, but can also be due to most flats are 3 to 5 room flats, which limits options available.\n\nggplot(resale_prices_sf, aes(flt_typ)) +\n  geom_bar(fill=\"orange\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#preparation-of-publication-quality-table",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#preparation-of-publication-quality-table",
    "title": "Take-home Exercise 3",
    "section": "9.1 Preparation of Publication Quality Table",
    "text": "9.1 Preparation of Publication Quality Table\nUsing tbl_regression(), we want to find out which variables are not significant significant enough to retain in the model.\n\ntbl_regression(resale_price.mlr, intercept = TRUE)\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    (Intercept)\n218,087\n184,062, 252,113\n<0.001\n    floor_area_sqm\n4,323\n3,900, 4,747\n<0.001\n    HIP\n-49,268\n-55,261, -43,276\n<0.001\n    MUP\n-71,581\n-78,487, -64,676\n<0.001\n    PROX_CBD\n-1,353,369\n-2,275,627, -431,111\n0.004\n    PROX_HAWKER\n-203,613\n-266,717, -140,510\n<0.001\n    PROX_ELDERCARE\n-64,469\n-131,092, 2,154\n0.058\n    PROX_KINDERGARTEN\n11,029\n-6,450, 28,508\n0.2\n    PROX_CHILDCARE\n-2,824\n-7,818, 2,169\n0.3\n    PROX_BUSSTOP\n3,177\n1,602, 4,752\n<0.001\n    PROX_MRT\n-33,629\n-73,550, 6,292\n0.10\n    PROX_SUPERMARKET\n-47,490\n-64,356, -30,625\n<0.001\n    PROX_MALL\n-186,034\n-259,782, -112,287\n<0.001\n    PROX_TOPSCH\n-3,018,242\n-3,643,119, -2,393,364\n<0.001\n    NUM_KINDERGARTEN\n-6,320\n-9,590, -3,050\n<0.001\n    NUM_CHILDCARE\n2,241\n745, 3,736\n0.003\n    NUM_BUSSTOP\n-591\n-1,541, 360\n0.2\n    NUM_TOPSCH\n10,060\n4,922, 15,199\n<0.001\n  \n  \n  \n    \n      1 CI = Confidence Interval\n    \n  \n\n\n\n\nWith PROX_ELDERCARE, PROX_KINDERGARTEN, PROX_CHILDCARE, PROX_MRT and NUM_BUSSTOP having a p-value above 0.01, we will subsequently remove them to improve our model.\n\nVersion 1: Create New MLRCheck for Significance\n\n\n\nresale_price.mlr <- lm(formula = resale_price ~ floor_area_sqm + HIP + MUP + PROX_CBD + PROX_HAWKER +  + PROX_BUSSTOP +  PROX_SUPERMARKET + PROX_MALL + PROX_TOPSCH + NUM_KINDERGARTEN + NUM_CHILDCARE + NUM_TOPSCH, data = train_resale_prices)\n\n\n\n\ntbl_regression(resale_price.mlr, intercept = TRUE)\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    (Intercept)\n202,017\n171,060, 232,974\n<0.001\n    floor_area_sqm\n4,341\n3,919, 4,762\n<0.001\n    HIP\n-49,680\n-55,614, -43,746\n<0.001\n    MUP\n-71,982\n-78,869, -65,095\n<0.001\n    PROX_CBD\n-1,094,917\n-1,992,630, -197,205\n0.017\n    PROX_HAWKER\n-200,882\n-263,045, -138,720\n<0.001\n    PROX_BUSSTOP\n3,285\n1,713, 4,857\n<0.001\n    PROX_SUPERMARKET\n-50,517\n-67,150, -33,883\n<0.001\n    PROX_MALL\n-172,911\n-245,285, -100,536\n<0.001\n    PROX_TOPSCH\n-3,177,094\n-3,784,479, -2,569,709\n<0.001\n    NUM_KINDERGARTEN\n-6,478\n-9,669, -3,287\n<0.001\n    NUM_CHILDCARE\n2,428\n955, 3,901\n0.001\n    NUM_TOPSCH\n9,496\n4,394, 14,598\n<0.001\n  \n  \n  \n    \n      1 CI = Confidence Interval"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#checking-for-non-linearity",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#checking-for-non-linearity",
    "title": "Take-home Exercise 3",
    "section": "9.4 Checking for Non-Linearity",
    "text": "9.4 Checking for Non-Linearity\nWith most datapoints scatter on and around the 0 line, we can determine the relationship is linear.\n\nols_plot_resid_fit(resale_price.mlr)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#checking-for-normality-assumption",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#checking-for-normality-assumption",
    "title": "Take-home Exercise 3",
    "section": "9.5 Checking for Normality Assumption",
    "text": "9.5 Checking for Normality Assumption\nThe model is also normal in distribution.\n\nols_plot_resid_hist(resale_price.mlr)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#checking-for-spatial-autocorrelation",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#checking-for-spatial-autocorrelation",
    "title": "Take-home Exercise 3",
    "section": "9.6 Checking for Spatial Autocorrelation",
    "text": "9.6 Checking for Spatial Autocorrelation\nWith this test, we then check for the spatial variation in resell prices using the residuals from our MLR model.\nBecause we need the geospatial polygons to map our residuals and that spdep package only processes sp datatype, we will first convert resale_price.mlr to a DataFrame, then to a sf DataFrame, finally a sp DataFrame.\n\nresale_price.mlr.output <- as.data.frame(resale_price.mlr$residuals)\nfinal_resale_price.mlr.sf <- cbind(train_resale_prices, resale_price.mlr.output) %>%\n  rename(`MLR_RES` = `resale_price.mlr.residuals`)\nfinal_resale_price.mlr.sp <- as_Spatial(final_resale_price.mlr.sf)\nfinal_resale_price.mlr.sp\n\nclass       : SpatialPointsDataFrame \nfeatures    : 3759 \nextent      : 11597.97, 45154.27, 28097.64, 48622.47  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 24\nnames       : floor_area_sqm, resale_price, HIP, MUP, PROX_CBD, PROX_HAWKER, PROX_ELDERCARE, PROX_KINDERGARTEN, PROX_CHILDCARE, PROX_BUSSTOP, PROX_MRT, PROX_SCH, PROX_SUPERMARKET, PROX_MALL, PROX_TOPSCH, ... \nmin values  :             51,       240000,   0,   0,    0.001,       0.002,          0.001,             0.001,          0.002,        0.005,    0.001,    0.001,            0.001,     0.003,       0.001, ... \nmax values  :            137,       958000,   1,   1,    0.013,       0.125,          0.133,             0.438,          1.912,        5.138,    0.217,    0.181,            0.526,     0.167,        0.02, ... \n\n\n\n9.6.1 Visualisation\n\ntmap_mode(\"view\")\ntm_shape(subzone_sf)+\n  tmap_options(check.and.fix = TRUE) +\n  tm_polygons(alpha = 0.4) +\ntm_shape(final_resale_price.mlr.sf) +  \n  tm_dots(col = \"MLR_RES\",\n          alpha = 0.6,\n          style=\"quantile\") +\n  tm_view(set.zoom.limits = c(11,14))\n\n\n\n\n\ntmap_mode(\"plot\")\n\nFrom the visualisation, we can determine that there are signs of spatial autocorrelation."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#prediction",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#prediction",
    "title": "Take-home Exercise 3",
    "section": "9.7 Prediction",
    "text": "9.7 Prediction\nFinally, we come to prediction.\n\nCodeWrite to RDSRead RDS\n\n\n\nmlr_pred <- predict.lm(resale_price.mlr, test_resale_prices)\n\n\n\n\nwrite_rds(mlr_pred, \"data/model/mlr_pred.rds\")\n\n\n\n\nmlr_pred <- read_rds(\"data/model/mlr_pred.rds\")\n\n\n\n\n\nmlr_pred_df <- as.data.frame(mlr_pred)\ntest_data_mlr <- cbind(test_resale_prices, mlr_pred_df)\n\nUsing Root Mean Square Error (RMSE), we can observe the difference between the predicted values and the actual values, which enables us to determine whether the model fares well in predicting.\n\nMetrics::rmse(test_data_mlr$resale_price, \n     test_data_mlr$mlr_pred)\n\n[1] 75876.34\n\n\n\n9.7.1 Visualisation\n\nols_scatterplot <- ggplot(data = test_data_mlr,\n       aes(x = mlr_pred,\n           y = resale_price)) +\n  geom_point() +\n  geom_abline(col = \"Red\")\n\nols_scatterplot\n\n\n\n\nAlthough there is a visible trend in how the datapoints are structured (i.e., a line), you can see that most datapoints fall out this line. This suggests that the model is probably decent, but has way more areas for improvements in order to accurately predict future transactional prices."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#optimal-bandwidth",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#optimal-bandwidth",
    "title": "Take-home Exercise 3",
    "section": "10.1 Optimal Bandwidth",
    "text": "10.1 Optimal Bandwidth\nSince we are creating an adaptive model, we will use bw.gwr() from GWmodel package to determine the optimal bandwidth.\n\nset.seed(1234)\nbw_adaptive <- bw.gwr(resale_price ~ floor_area_sqm + HIP + MUP + PROX_CBD + PROX_HAWKER +  PROX_ELDERCARE + PROX_KINDERGARTEN + PROX_CHILDCARE + PROX_BUSSTOP + PROX_MRT +  PROX_SUPERMARKET + PROX_MALL + PROX_TOPSCH + NUM_KINDERGARTEN + NUM_CHILDCARE + NUM_BUSSTOP + NUM_TOPSCH, \n                      data=resale_price.sp, \n                      approach=\"CV\", \n                      kernel=\"gaussian\", \n                      adaptive=TRUE, \n                      longlat=FALSE)\n\n\nAs you can see from above, the most suitable bandwidth is 208."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#calibration-of-geographical-random-forest-model-grfm",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#calibration-of-geographical-random-forest-model-grfm",
    "title": "Take-home Exercise 3",
    "section": "10.2 Calibration of Geographical Random Forest Model (GRFM)",
    "text": "10.2 Calibration of Geographical Random Forest Model (GRFM)\nUsing the SpatialML package, we calibrate our Random Forest model from there.\n\nCalibrationSave to RDSRead RDS\n\n\n\nset.seed(1234)\ngrf_adaptive <- grf(formula = resale_price ~ floor_area_sqm + HIP + MUP + PROX_CBD + PROX_HAWKER +  PROX_ELDERCARE + PROX_KINDERGARTEN + PROX_CHILDCARE + PROX_SUPERMARKET + PROX_MALL + PROX_TOPSCH + NUM_KINDERGARTEN + NUM_CHILDCARE + NUM_BUSSTOP + NUM_SCH + NUM_TOPSCH, \n                     dframe=train_resale_prices,\n                     bw=bw_adaptive,\n                     kernel=\"adaptive\",\n                     coords=coords_train,\n                      ntree = 30)\n\n\n\n\nwrite_rds(grf_adaptive, \"data/model/grf_adaptive.rds\")\n\n\n\n\ngrf_adaptive <- read_rds(\"data/model/grf_adaptive.rds\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#prediction-1",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#prediction-1",
    "title": "Take-home Exercise 3",
    "section": "10.3 Prediction",
    "text": "10.3 Prediction\n\n10.3.1 Preparation\nNow, we can combine the test data and coordinates together.\n\ntest_data <- cbind(test_resale_prices, coords_test) %>%\n  st_drop_geometry()\n\nAnd onwards to our prediction using predict.grf() using the above variable.\n\nPredictionWrite to rDSRead RDS\n\n\n\ngwRF_pred <- predict.grf(grf_adaptive, \n                           test_data, \n                           x.var.name=\"X\",\n                           y.var.name=\"Y\", \n                           local.w=1,\n                           global.w=0)\n\n\n\n\ngwRF_pred <- write_rds(gwRF_pred, \"data/model/gwRF_pred.rds\")\n\n\n\n\ngwRF_pred <- read_rds(\"data/model/gwRF_pred.rds\")\ngwRF_pred_df <- as.data.frame(gwRF_pred)\n\n\n\n\n\n10.3.1.1 Visualisation\nLike in the OLS model above, we will use calculate the RMSE to determine the accuracy of our new model.\n\ntest_data_plot <- cbind(test_data, gwRF_pred)\n\n\nMetrics::rmse(test_data_plot$resale_price, \n     test_data_plot$gwRF_pred)\n\n[1] 33323.73\n\n\n\nggplot(data = test_data_plot,\n       aes(x = gwRF_pred,\n           y = resale_price)) +\n  geom_point() +\n  geom_abline(col = \"Red\")\n\n\n\n\nThe chart showcases the datapoints scattered relatively straight across a line, suggesting predicted resale prices and actual resale prices are quite close together."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#save-to-rds-1",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#save-to-rds-1",
    "title": "Take-home Exercise 3",
    "section": "9.2 Save to RDS",
    "text": "9.2 Save to RDS\n\nwrite_rds(resale_price.mlr, \"data/model/resale_price.mlr.rds\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#read-rds-1",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#read-rds-1",
    "title": "Take-home Exercise 3",
    "section": "9.3 Read RDS",
    "text": "9.3 Read RDS\n\nresale_price.mlr <- read_rds(\"data/model/resale_price.mlr.rds\")\nsummary(resale_price.mlr)\n\n\nCall:\nlm(formula = resale_price ~ floor_area_sqm + HIP + MUP + PROX_CBD + \n    PROX_HAWKER + +PROX_BUSSTOP + PROX_SUPERMARKET + PROX_MALL + \n    PROX_TOPSCH + NUM_KINDERGARTEN + NUM_CHILDCARE + NUM_TOPSCH, \n    data = train_resale_prices)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-204779  -44453   -7564   25831  378838 \n\nCoefficients:\n                   Estimate Std. Error t value Pr(>|t|)    \n(Intercept)        202017.3    15789.7  12.794  < 2e-16 ***\nfloor_area_sqm       4340.5      214.8  20.210  < 2e-16 ***\nHIP                -49679.5     3026.6 -16.414  < 2e-16 ***\nMUP                -71981.8     3512.6 -20.492  < 2e-16 ***\nPROX_CBD         -1094917.1   457877.0  -2.391 0.016838 *  \nPROX_HAWKER       -200882.5    31705.8  -6.336 2.64e-10 ***\nPROX_BUSSTOP         3284.7      801.8   4.096 4.28e-05 ***\nPROX_SUPERMARKET   -50516.8     8483.9  -5.954 2.85e-09 ***\nPROX_MALL         -172910.5    36914.5  -4.684 2.91e-06 ***\nPROX_TOPSCH      -3177094.1   309795.9 -10.255  < 2e-16 ***\nNUM_KINDERGARTEN    -6478.0     1627.5  -3.980 7.01e-05 ***\nNUM_CHILDCARE        2428.2      751.3   3.232 0.001240 ** \nNUM_TOPSCH           9496.4     2602.3   3.649 0.000267 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 73990 on 3746 degrees of freedom\nMultiple R-squared:  0.276, Adjusted R-squared:  0.2737 \nF-statistic:   119 on 12 and 3746 DF,  p-value: < 2.2e-16\n\n\n:::\nYes! Now, there are no more insignificant variables. Let’s move on."
  }
]